define(function() {

	var OWG = function() {

function fa(a){throw a;}var h=void 0,k=!0,l=null,p=!1;function s(){return function(){}}function ga(a){return function(b){this[a]=b}}function ha(a){return function(){return this[a]}}function u(a){return function(){return a}}
var w,z=this;

	// Below is the only one my string for amd-ing owg code, that's generated from google closure
	z.execScript = window.execScript;

function ja(a){a=a.split(".");for(var b=z,c;c=a.shift();)if(b[c]!=l)b=b[c];else return l;return b}
function ka(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function A(a){return a!==h}function ma(a){return"array"==ka(a)}function na(a){var b=ka(a);return"array"==b||"object"==b&&"number"==typeof a.length}function oa(a){return"string"==typeof a}function pa(a){return"function"==ka(a)}function qa(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}function ra(a){return a[ta]||(a[ta]=++ua)}var ta="closure_uid_"+(1E9*Math.random()>>>0),ua=0;
function wa(a,b,c){return a.call.apply(a.bind,arguments)}function Aa(a,b,c){a||fa(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function Ba(a,b,c){Ba=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wa:Aa;return Ba.apply(l,arguments)}var Ca=Date.now||function(){return+new Date};
function B(a,b){var c=a.split("."),d=z;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&A(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function Da(a,b){function c(){}c.prototype=b.prototype;a.Gg=b.prototype;a.prototype=new c;a.prototype.constructor=a};var F=0,G=1,Ea=2,Fa=3,Ga=4,Ha=5,Ia=6,Ja=7,Ka=8,La=9,Ma=10,Na=11,Oa=12,Pa=13,Qa=14,Ra=15,Sa=16,Ta=17,Ua=18,Va=19,Wa=20,Xa=21,Ya=22,Za=23,$a=24,ab=65533,bb=65534,cb=25,db=26,eb=65535;B("OG_OBJECT_CONTEXT",F);B("OG_OBJECT_SCENE",G);B("OG_OBJECT_WORLD",Ea);B("OG_OBJECT_IMAGELAYER",Fa);B("OG_OBJECT_ELEVATIONLAYER",Ga);B("OG_OBJECT_WAYPOINTLAYER",Ha);B("OG_OBJECT_GEOMETRYLAYER",Ja);B("OG_OBJECT_POILAYER",Ia);B("OG_OBJECT_VOXELLAYER",Ka);B("OG_OBJECT_VECTORLAYER",La);B("OG_OBJECT_IMAGE",Ma);
B("OG_OBJECT_TEXTURE",Na);B("OG_OBJECT_PIXELBUFFER",Oa);B("OG_OBJECT_GEOMETRY",Pa);B("OG_OBJECT_MESH",Qa);B("OG_OBJECT_SURFACE",Ra);B("OG_OBJECT_VECTOR",Sa);B("OG_OBJECT_CAMERA",Ta);B("OG_OBJECT_TEXT",Ua);B("OG_OBJECT_BINARYDATA",Va);B("OG_OBJECT_LIGHT",Wa);B("OG_OBJECT_NAVIGATIONCONTROLLER",Xa);B("OG_OBJECT_POI",Ya);B("OG_OBJECT_BILLBOARD",Za);B("OG_OBJECT_BILLBOARDLAYER",$a);B("OG_OBJECT_AOEIMAGELAYER",ab);B("OG_OBJECT_AOEIMAGE",bb);B("OG_OBJECT_POINTSPRITE",cb);B("OG_OBJECT_EARTHPOLYLINE",db);
B("OG_OBJECT_INVALID",eb);B("OG_RENDEREFFECT_RGB",0);B("OG_RENDEREFFECT_CHROMADEPTH",1);var fb=1,gb=2,hb=3,ib=4;B("OG_SCENE_3D_ELLIPSOID_WGS84",fb);B("OG_SCENE_3D_FLAT_CARTESIAN",gb);B("OG_SCENE_2D_SCREEN",hb);B("OG_SCENE_CUSTOM",ib);B("OG_NAVIGATIONMODE_GLOBE",0);B("OG_NAVIGATIONMODE_FLIGHT",1);B("OG_NAVIGATIONMODE_CONSTRAINED",2);B("OG_NAVIGATIONMODE_DYNAMIC",3);var jb=1,kb=2;B("OG_OBJECT_READY",jb);B("OG_OBJECT_BUSY",kb);B("OG_OBJECT_FAILED",3);var lb=[];function H(a){if(-1==a)return l;for(var b=0;b<lb.length;b++)if(lb[b].id==a)return lb[b];return l}function I(){this.parent=l;this.name="ogObject";this.type=eb;this.id=-1;this.status=jb;this.L=this.M=l}I.prototype.nb=s();function J(a){a=a.id;for(var b=0;b<lb.length;b++)if(lb[b].id==a){lb[b].nb();lb.splice(b,1);break}}I.prototype.Ra=s();function mb(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function nb(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function ob(a){if(!pb.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(qb,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(rb,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(sb,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(tb,"&quot;"));return a}var qb=/&/g,rb=/</g,sb=/>/g,tb=/\"/g,pb=/[&<>\"]/;
function ub(a){return nb(a.replace(/  /g," &#160;"),h)};var vb,wb,xb,yb,zb,Ab;function Bb(){return z.navigator?z.navigator.userAgent:l}yb=xb=wb=vb=p;var Cb;if(Cb=Bb()){var Db=z.navigator;vb=0==Cb.indexOf("Opera");wb=!vb&&-1!=Cb.indexOf("MSIE");xb=!vb&&-1!=Cb.indexOf("WebKit");yb=!vb&&!xb&&"Gecko"==Db.product}var Eb=vb,Fb=wb,Gb=yb,Hb=xb,Ib,Jb=z.navigator;Ib=Jb&&Jb.platform||"";zb=-1!=Ib.indexOf("Mac");Ab=-1!=Ib.indexOf("Win");var Kb=-1!=Ib.indexOf("Linux");function Lb(){var a=z.document;return a?a.documentMode:h}var Mb;
a:{var Nb="",Ob;if(Eb&&z.opera)var Pb=z.opera.version,Nb="function"==typeof Pb?Pb():Pb;else if(Gb?Ob=/rv\:([^\);]+)(\)|;)/:Fb?Ob=/MSIE\s+([^\);]+)(\)|;)/:Hb&&(Ob=/WebKit\/(\S+)/),Ob)var Qb=Ob.exec(Bb()),Nb=Qb?Qb[1]:"";if(Fb){var Rb=Lb();if(Rb>parseFloat(Nb)){Mb=String(Rb);break a}}Mb=Nb}var Sb={};
function Tb(a){var b;if(!(b=Sb[a])){b=0;for(var c=String(Mb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",j=d[f]||"",m=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var q=m.exec(g)||["","",""],t=n.exec(j)||["","",""];if(0==q[0].length&&0==t[0].length)break;b=((0==q[1].length?0:parseInt(q[1],10))<(0==t[1].length?0:parseInt(t[1],10))?-1:(0==q[1].length?0:parseInt(q[1],
10))>(0==t[1].length?0:parseInt(t[1],10))?1:0)||((0==q[2].length)<(0==t[2].length)?-1:(0==q[2].length)>(0==t[2].length)?1:0)||(q[2]<t[2]?-1:q[2]>t[2]?1:0)}while(0==b)}b=Sb[a]=0<=b}return b}var Ub=z.document,Vb=!Ub||!Fb?h:Lb()||("CSS1Compat"==Ub.compatMode?parseInt(Mb,10):5);function Wb(a,b){for(var c in a)b.call(h,a[c],c,a)}function Xb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Yb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Yb.length;f++)c=Yb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function $b(a){Error.captureStackTrace?Error.captureStackTrace(this,$b):this.stack=Error().stack||"";a&&(this.message=String(a))}Da($b,Error);$b.prototype.name="CustomError";function ac(a,b){b.unshift(a);$b.call(this,mb.apply(l,b));b.shift();this.uq=a}Da(ac,$b);ac.prototype.name="AssertionError";function bc(a,b){fa(new ac("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var cc=Array.prototype,dc=cc.indexOf?function(a,b,c){return cc.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:0>c?Math.max(0,a.length+c):c;if(oa(a))return!oa(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ec=cc.forEach?function(a,b,c){cc.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=oa(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},fc=cc.filter?function(a,b,c){return cc.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=
0,g=oa(a)?a.split(""):a,j=0;j<d;j++)if(j in g){var m=g[j];b.call(c,m,j,a)&&(e[f++]=m)}return e};function gc(a,b,c){return 2>=arguments.length?cc.slice.call(a,b):cc.slice.call(a,b,c)};var hc="StopIteration"in z?z.StopIteration:Error("StopIteration");function ic(){}ic.prototype.next=function(){fa(hc)};ic.prototype.Zj=function(){return this};function jc(a){if(a instanceof ic)return a;if("function"==typeof a.Zj)return a.Zj(p);if(na(a)){var b=0,c=new ic;c.next=function(){for(;;){b>=a.length&&fa(hc);if(b in a)return a[b++];b++}};return c}fa(Error("Not implemented"))};function kc(a,b){this.Zc={};this.xb=[];var c=arguments.length;if(1<c){c%2&&fa(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){if(a instanceof kc)c=a.Wi(),d=a.Nk();else{var c=Xb(a),e=[],f=0;for(d in a)e[f++]=a[d];d=e}for(e=0;e<c.length;e++)this.set(c[e],d[e])}}w=kc.prototype;w.Na=0;w.wj=0;w.Kf=ha("Na");w.Nk=function(){lc(this);for(var a=[],b=0;b<this.xb.length;b++)a.push(this.Zc[this.xb[b]]);return a};w.Wi=function(){lc(this);return this.xb.concat()};
w.j=function(a,b){if(this===a)return k;if(this.Na!=a.Kf())return p;var c=b||mc;lc(this);for(var d,e=0;d=this.xb[e];e++)if(!c(this.get(d),a.get(d)))return p;return k};function mc(a,b){return a===b}w.clear=function(){this.Zc={};this.wj=this.Na=this.xb.length=0};
function lc(a){if(a.Na!=a.xb.length){for(var b=0,c=0;b<a.xb.length;){var d=a.xb[b];Object.prototype.hasOwnProperty.call(a.Zc,d)&&(a.xb[c++]=d);b++}a.xb.length=c}if(a.Na!=a.xb.length){for(var e={},c=b=0;b<a.xb.length;)d=a.xb[b],Object.prototype.hasOwnProperty.call(e,d)||(a.xb[c++]=d,e[d]=1),b++;a.xb.length=c}}w.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Zc,a)?this.Zc[a]:b};
w.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Zc,a)||(this.Na++,this.xb.push(a),this.wj++);this.Zc[a]=b};w.Zj=function(a){lc(this);var b=0,c=this.xb,d=this.Zc,e=this.wj,f=this,g=new ic;g.next=function(){for(;;){e!=f.wj&&fa(Error("The map has changed since the iterator was created"));b>=c.length&&fa(hc);var g=c[b++];return a?g:d[g]}};return g};function nc(a){return oc(a||arguments.callee.caller,[])}
function oc(a,b){var c=[];if(0<=dc(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(pc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=pc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(oc(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function pc(a){if(qc[a])return qc[a];a=String(a);if(!qc[a]){var b=/function ([^\(]+)/.exec(a);qc[a]=b?b[1]:"[Anonymous]"}return qc[a]}var qc={};function rc(a,b,c,d,e){this.reset(a,b,c,d,e)}rc.prototype.Dp=0;rc.prototype.Bk=l;rc.prototype.Ak=l;var sc=0;rc.prototype.reset=function(a,b,c,d,e){this.Dp="number"==typeof e?e:sc++;this.Nn=d||Ca();this.Yc=a;this.$m=b;this.Um=c;delete this.Bk;delete this.Ak};rc.prototype.di=ga("Yc");function tc(a){this.op=a}tc.prototype.dj=l;tc.prototype.Yc=l;tc.prototype.uk=l;tc.prototype.Oh=l;function uc(a,b){this.name=a;this.value=b}uc.prototype.toString=ha("name");var vc=new uc("SHOUT",1200),wc=new uc("SEVERE",1E3),xc=new uc("WARNING",900),yc=new uc("INFO",800),zc=new uc("CONFIG",700),Ac=[new uc("OFF",Infinity),vc,wc,xc,yc,zc,new uc("FINE",500),new uc("FINER",400),new uc("FINEST",300),new uc("ALL",0)],Bc=l;
function Cc(a){if(!Bc){Bc={};for(var b=0,c;c=Ac[b];b++)Bc[c.value]=c,Bc[c.name]=c}return Bc[a]||l}w=tc.prototype;w.getParent=ha("dj");w.Km=function(){this.uk||(this.uk={});return this.uk};w.di=ga("Yc");function Dc(a){if(a.Yc)return a.Yc;if(a.dj)return Dc(a.dj);bc("Root logger has no level set.");return l}
w.log=function(a,b,c){if(a.value>=Dc(this).value){a=this.gp(a,b,c);b="log:"+a.$m;z.console&&(z.console.timeStamp?z.console.timeStamp(b):z.console.markTimeline&&z.console.markTimeline(b));z.msWriteProfilerMark&&z.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.Oh)for(var e=0,f=h;f=c.Oh[e];e++)f(d);b=b.getParent()}}};
w.gp=function(a,b,c){var d=new rc(a,String(b),this.op);if(c){d.Bk=c;var e;var f=arguments.callee.caller;try{var g;var j=ja("window.location.href");if(oa(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var m,n,q=p;try{m=c.lineNumber||c.rq||"Not available"}catch(t){m="Not available",q=k}try{n=c.fileName||c.filename||c.sourceURL||z.$googDebugFname||j}catch(r){n="Not available",q=k}g=q||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,
lineNumber:m,fileName:n,stack:c.stack||"Not available"}:c}e="Message: "+ob(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+ob(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ob(nc(f)+"-> ")}catch(v){e="Exception trying to expose exception! You win, we lose. "+v}d.Ak=e}return d};function Ec(a,b){a.log(xc,b,h)}w.info=function(a,b){this.log(yc,a,b)};var Fc={},Gc=l;
function Hc(){Gc||(Gc=new tc(""),Fc[""]=Gc,Gc.di(zc))}function K(a){Hc();var b;if(!(b=Fc[a])){b=new tc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=K(a.substr(0,c));c.Km()[d]=b;b.dj=c;Fc[a]=b}return b};function Ic(){this.name="ogTexture";this.type=Na;this.l=l;this.Mn="";this.status=kb}Ic.prototype=new I;
Ic.prototype.Ra=function(a){if(a==l)Ec(K("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==l)Ec(K("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=G)Ec(K("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.l=this.parent.parent.c.tj.Pl(a.url,function(){b.status=jb;b.M&&b.M(b.id)},function(){b.status=3;b.L&&b.L(b.id)},p);this.Mn=a.url}};
Ic.prototype.nb=function(){this.l&&(this.parent.parent.c.tj.Rl(this.Mn),this.l=l,this.status=3)};Ic.prototype.U=function(a,b,c){this.status==jb&&this.l&&(c!=l?this.l.U(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.l.U(a,b))};var Jc=6378137,Kc=0.006694379990197,Lc=0.006739496742,M=1.1920930376163766E-7,Mc=8388607;function Nc(a){for(var b=1;a>b;)b*=2;return b};function Oc(){this.name="ogCamera";this.type=Ta;this.kc=this.pitch=this.Ua=this.cc=this.ec=this.fc=0}Oc.prototype=new I;w=Oc.prototype;w.nb=function(){this.kc=this.pitch=this.Ua=this.cc=this.ec=this.fc=0};w.Ca=function(a,b,c){this.fc=a;this.ec=b;this.cc=c;this.parent.Ef==this&&Pc(this).Ca(a,b,c)};w.of=function(){var a={};a.longitude=this.fc;a.latitude=this.ec;a.elevation=this.cc;return a};
w.Db=function(a,b,c){this.Ua=a;this.pitch=b;this.kc=c;this==this.parent.Ef&&Pc(this).Db(0.017453292519943295*a,0.017453292519943295*b,0.017453292519943295*c)};w.ah=function(){var a={};a.yaw=this.Ua;a.pitch=this.pitch;a.roll=this.kc;return a};w.nh=function(a,b,c,d){this==this.parent.Ef&&Pc(this).nh(a,b,c,d)};function Pc(a){var b=l;a=a.parent.parent.c;a.e&&a.e.O&&(b=a.e.O);return b}
function Qc(a){var b=Pc(a),c=b.of(),b=b.ah();a.fc=c.longitude;a.ec=c.latitude;a.cc=c.elevation;a.Ua=57.29577951308232*b.Ua;a.pitch=57.29577951308232*b.pitch;a.kc=57.29577951308232*b.kc};function N(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.vc=new Float32Array([a,b,c])}w=N.prototype;w.m=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};w.sa=function(){this.vc[0]=this.a[0];this.vc[1]=this.a[1];this.vc[2]=this.a[2];return this.vc};w.Zg=ha("a");w.mf=function(){var a=new N;a.m(this.a[0],this.a[1],this.a[2]);return a};w.fo=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};w.Yj=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
w.zo=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};w.ko=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1];a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function Rc(a,b,c){var d=b.a[0],e=b.a[1];b=b.a[2];var f=c.a[0],g=c.a[1];c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}w.lo=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
w.Mj=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return Math.sqrt(a*a+b*b+c*c)};w.yo=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return a*a+b*b+c*c};w.Qc=function(){var a=this.Mj();0!=a&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};w.vo=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};w.og=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};B("Cross",Rc);B("vec3",N);N.prototype.Add=N.prototype.fo;N.prototype.Cross=N.prototype.ko;
N.prototype.Dot=N.prototype.lo;N.prototype.Get=N.prototype.Zg;N.prototype.Length=N.prototype.Mj;N.prototype.Neg=N.prototype.vo;N.prototype.Normalize=N.prototype.Qc;N.prototype.Set=N.prototype.m;N.prototype.SquaredLength=N.prototype.yo;N.prototype.Subtract=N.prototype.zo;N.prototype.Sub=N.prototype.Yj;N.prototype.ToString=N.prototype.og;function O(){this.a=Array(16);this.oi();this.vc=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}w=O.prototype;w.Je=function(a){if(16==a.length)for(var b=0;16>b;b++)this.a[b]=a[b]};w.sa=function(){for(var a=0;16>a;a++)this.vc[a]=this.a[a];return this.vc};w.Zg=ha("a");w.mf=function(){for(var a=new O,b=0;16>b;b++)a.a[b]=this.a[b];return a};w.da=function(a){for(var b=0;16>b;b++)this.a[b]=a.a[b]};
w.oi=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};w.Ao=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
w.md=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};w.$l=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};w.Yd=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return k};
w.Vj=function(a){var b=Math.sin(a);a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};w.dm=function(a){var b=Math.sin(a);a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
w.em=function(a){var b=Math.sin(a);a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
w.uo=function(a,b,c,d,e,f,g,j,m){var n,q,t,r;d=a-d;e=b-e;f=c-f;r=1/Math.sqrt(d*d+e*e+f*f);d*=r;e*=r;f*=r;n=j*f-m*e;m=m*d-g*f;g=g*e-j*d;(r=Math.sqrt(n*n+m*m+g*g))?(r=1/r,n*=r,m*=r,g*=r):g=m=n=0;j=e*g-f*m;q=f*n-d*g;t=d*m-e*n;(r=Math.sqrt(j*j+q*q+t*t))?(r=1/r,j*=r,q*=r,t*=r):t=q=j=0;this.a[0]=n;this.a[4]=m;this.a[8]=g;this.a[12]=-(n*a+m*b+g*c);this.a[1]=j;this.a[5]=q;this.a[9]=t;this.a[13]=-(j*a+q*b+t*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
w.W=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],m=a.a[6],n=a.a[7],q=a.a[8],t=a.a[9],r=a.a[10],v=a.a[11],x=a.a[12],y=a.a[13],D=a.a[14],C=a.a[15],E=b.a[0],U=b.a[1],la=b.a[2],X=b.a[3],Y=b.a[4],P=b.a[5],aa=b.a[6],ba=b.a[7],ca=b.a[8],xa=b.a[9],ya=b.a[10],za=b.a[11],L=b.a[12],da=b.a[13],va=b.a[14],ea=b.a[15];this.a[0]=E*c+U*g+la*q+X*x;this.a[1]=E*d+U*j+la*t+X*y;this.a[2]=E*e+U*m+la*r+X*D;this.a[3]=E*f+U*n+la*v+X*C;this.a[4]=Y*c+P*g+aa*q+ba*x;this.a[5]=Y*d+P*j+aa*t+ba*y;this.a[6]=
Y*e+P*m+aa*r+ba*D;this.a[7]=Y*f+P*n+aa*v+ba*C;this.a[8]=ca*c+xa*g+ya*q+za*x;this.a[9]=ca*d+xa*j+ya*t+za*y;this.a[10]=ca*e+xa*m+ya*r+za*D;this.a[11]=ca*f+xa*n+ya*v+za*C;this.a[12]=L*c+da*g+va*q+ea*x;this.a[13]=L*d+da*j+va*t+ea*y;this.a[14]=L*e+da*m+va*r+ea*D;this.a[15]=L*f+da*n+va*v+ea*C};w.Me=function(){for(var a=this.mf(),b=0;4>b;b++)for(var c=0;4>c;c++)this.a[4*b+c]=a.a[4*c+b]};
w.Qa=function(a){var b=new N;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
w.oo=function(a,b,c,d,e,f){var g=b-a,j=d-c,m=f-e;this.a[0]=2*e/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=2*e/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/m;this.a[14]=-(2*f*e)/m;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
w.am=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
w.Yl=function(a,b,c,d,e,f){var g=b-a,j=d-c,m=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/m;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/m;this.a[15]=1};w.Zl=function(a,b,c,d){this.Yl(a,b,c,d,-1,1)};
w.Rd=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
w.jo=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
w.Ll=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
w.Ug=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a);b=Math.sin(b);c=Math.sin(c);a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
w.mo=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],j=this.a[10];1E-6>Math.abs(b)&&1E-6>Math.abs(d)?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,j))};w.lf=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
w.Bj=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
w.no=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=a*a,f=b*b,g=c*c,j=d*d;this.a[0]=e+f-g-j;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-j;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+j;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
w.ig=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,j=a*b,m=a*c,n=b*c;a*=d;b*=d;c*=d;this.a[0]=1-2*f-2*g;this.a[4]=2*j+2*c;this.a[8]=2*m-2*b;this.a[12]=0;this.a[1]=2*j-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*n+2*a;this.a[13]=0;this.a[2]=2*m+2*b;this.a[6]=2*n-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
w.wo=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],j=this.a[6],m=this.a[10],n=a+e+m;0<n?(n=2*Math.sqrt(n+1),a=0.25*n,e=(j-f)/n,m=(c-g)/n,b=(d-b)/n):a>e&a>m?(n=2*Math.sqrt(1+a-e-m),a=(j-f)/n,e=0.25*n,m=(b+d)/n,b=(c+g)/n):e>m?(n=2*Math.sqrt(1+e-a-m),a=(c-g)/n,e=(b+d)/n,m=0.25*n,b=(f+j)/n):(n=2*Math.sqrt(1+m-a-e),a=(d-b)/n,e=(c+g)/n,m=(f+j)/n,b=0.25*n);return[e,m,b,a]};
w.kg=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],m=a.a[7],n=a.a[8],q=a.a[9],t=a.a[10],r=a.a[11],v=a.a[12],x=a.a[13],y=a.a[14];a=a.a[15];var D=1/(b*g*t*a+b*j*r*x+b*m*q*y+c*f*r*y+c*j*n*a+c*m*t*v+d*f*q*a+d*g*r*v+d*m*n*x+e*f*t*x+e*g*n*y+e*j*q*v-b*g*r*y-b*j*q*a-b*m*t*x-c*f*t*a-c*j*r*v-c*m*n*y-d*f*r*x-d*g*n*a-d*m*q*v-e*f*q*y-e*g*t*v-e*j*n*x);this.a[0]=(g*t*a+j*r*x+m*q*y-g*r*y-j*q*a-m*t*x)*D;this.a[4]=(f*r*y+j*n*a+m*t*v-f*t*a-j*r*v-m*n*y)*D;this.a[8]=(f*q*a+g*r*v+m*n*x-
f*r*x-g*n*a-m*q*v)*D;this.a[12]=(f*t*x+g*n*y+j*q*v-f*q*y-g*t*v-j*n*x)*D;this.a[1]=(c*r*y+d*q*a+e*t*x-c*t*a-d*r*x-e*q*y)*D;this.a[5]=(b*t*a+d*r*v+e*n*y-b*r*y-d*n*a-e*t*v)*D;this.a[9]=(b*r*x+c*n*a+e*q*v-b*q*a-c*r*v-e*n*x)*D;this.a[13]=(b*q*y+c*t*v+d*n*x-b*t*x-c*n*y-d*q*v)*D;this.a[2]=(c*j*a+d*m*x+e*g*y-c*m*y-d*g*a-e*j*x)*D;this.a[6]=(b*m*y+d*f*a+e*j*v-b*j*a-d*m*v-e*f*y)*D;this.a[10]=(b*g*a+c*m*v+e*f*x-b*m*x-c*f*a-e*g*v)*D;this.a[14]=(b*j*x+c*f*y+d*g*v-b*g*y-c*j*v-d*f*x)*D;this.a[3]=(c*m*t+d*g*r+e*j*
q-c*j*r-d*m*q-e*g*t)*D;this.a[7]=(b*j*r+d*m*n+e*f*t-b*m*t-d*f*r-e*j*n)*D;this.a[11]=(b*m*q+c*f*r+e*g*n-b*g*r-c*m*n-e*f*q)*D;this.a[15]=(b*g*t+c*j*n+d*f*q-b*j*q-c*f*t-d*g*n)*D};w.og=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};B("mat4",O);O.prototype.CalcBodyFrame=O.prototype.Ug;
O.prototype.CalcNavigationFrame=O.prototype.Rd;O.prototype.Cami3d=O.prototype.lf;O.prototype.CopyFrom=O.prototype.da;O.prototype.Copy=O.prototype.mf;O.prototype.Frustum=O.prototype.oo;O.prototype.Get=O.prototype.Zg;O.prototype.Identity=O.prototype.oi;O.prototype.Inverse=O.prototype.kg;O.prototype.LookAt=O.prototype.uo;O.prototype.Multiply=O.prototype.W;O.prototype.MultiplyVec3=O.prototype.Qa;O.prototype.Ortho2D=O.prototype.Zl;O.prototype.Ortho=O.prototype.Yl;O.prototype.OverwriteTranslation=O.prototype.$l;
O.prototype.Perspective=O.prototype.am;O.prototype.RotationX=O.prototype.Vj;O.prototype.RotationY=O.prototype.dm;O.prototype.RotationZ=O.prototype.em;O.prototype.Scale=O.prototype.Yd;O.prototype.SetFromArray=O.prototype.Je;O.prototype.ToString=O.prototype.og;O.prototype.Translation=O.prototype.md;O.prototype.Transpose=O.prototype.Me;O.prototype.Zero=O.prototype.Ao;O.prototype.CalcNavigationFrame2=O.prototype.jo;O.prototype.CalcNavigationFrameZUp=O.prototype.Ll;O.prototype.ExtractEulerAngles=O.prototype.mo;
O.prototype.CamViewFrustum=O.prototype.Bj;O.prototype.FromQuaternion=O.prototype.no;O.prototype.FromQuaternionComponents=O.prototype.ig;O.prototype.Rot2Quat=O.prototype.wo;function Sc(){this.qi=[];this.pi=[];this.lg=[];this.Eb={};this.Eb.x=0;this.Eb.y=0;this.Eb.p=0;this.Nd={};this.Nd.longitude=0;this.Nd.latitude=0;this.Nd.elevation=0;this.sd=p;this.Ya=[0,0];this.ad=-1;this.Yk=0;this.Ba=Tc;this.ua=0}var Tc=0,Uc=1,Vc=2,Wc=3,Xc=4,Yc=5;Sc.prototype.Ca=function(a,b,c){this.Eb.x=a;this.Eb.y=b;this.Eb.p=c};Sc.prototype.of=ha("Eb");function Zc(a,b,c,d){a.Nd.longitude=b;a.Nd.latitude=c;a.Nd.elevation=d};function $c(){this.result={};this.result.N=0;this.result.Nc=0;this.result.Fd=0;this.Pb={};this.Pb.x=0;this.Pb.y=0;this.Pb.p=0;this.Qb={};this.Qb.x=0;this.Qb.y=0;this.Qb.p=0;this.qb={};this.qb.x=0;this.qb.y=0;this.qb.p=0;this.Yb={};this.Yb.x=0;this.Yb.y=0;this.Yb.p=0;this.Zb={};this.Zb.x=0;this.Zb.y=0;this.Zi=this.Qe=this.Zb.p=0;this.Sl=2.220446049250313E-16}
$c.prototype.Kj=function(a,b,c,d,e,f,g,j,m,n,q,t,r,v,x){this.Pb.x=n-g;this.Pb.y=q-j;this.Pb.p=t-m;this.Qb.x=r-g;this.Qb.y=v-j;this.Qb.p=x-m;this.Yb.x=e*this.Qb.p-f*this.Qb.y;this.Yb.y=f*this.Qb.x-d*this.Qb.p;this.Yb.p=d*this.Qb.y-e*this.Qb.x;this.Qe=this.Pb.x*this.Yb.x+this.Pb.y*this.Yb.y+this.Pb.p*this.Yb.p;this.qb.x=a-g;this.qb.y=b-j;this.qb.p=c-m;this.Zi=1/this.Qe;this.Zb.x=this.qb.y*this.Pb.p-this.qb.p*this.Pb.y;this.Zb.y=this.qb.p*this.Pb.x-this.qb.x*this.Pb.p;this.Zb.p=this.qb.x*this.Pb.y-this.qb.y*
this.Pb.x;if(this.Qe>this.Sl){this.result.Nc=this.qb.x*this.Yb.x+this.qb.y*this.Yb.y+this.qb.p*this.Yb.p;if(0>this.result.Nc||this.result.Nc>this.Qe)return l;this.result.Fd=d*this.Zb.x+e*this.Zb.y+f*this.Zb.p;if(0>this.result.Fd||this.result.Nc+this.result.Fd>this.Qe)return l}else if(this.Qe<-this.Sl){this.result.Nc=this.qb.x*this.Yb.x+this.qb.y*this.Yb.y+this.qb.p*this.Yb.p;if(0<this.result.Nc||this.result.Nc<this.Qe)return l;this.result.Fd=d*this.Zb.x+e*this.Zb.y+f*this.Zb.p;if(0<this.result.Fd||
this.result.Nc+this.result.Fd<this.Qe)return l}else return l;this.result.N=this.Qb.x*this.Zb.x+this.Qb.y*this.Zb.y+this.Qb.p*this.Zb.p;this.result.Nc*=this.Zi;this.result.Fd*=this.Zi;this.result.N*=this.Zi;return this.result};B("TriangleIntersector",$c);$c.prototype.IntersectTriangle=$c.prototype.Kj;function ad(){this.hi=this.ii=this.fi=this.gi=0;this.Ui=1;this.result={ff:0,ef:0}}
ad.prototype.bh=function(a,b,c,d,e,f,g,j,m,n,q,t){this.Ui=1;0<=d?(this.result.ff=(g-a)/d,this.result.ef=(n-a)/d):(this.result.ff=(n-a)/d,this.result.ef=(g-a)/d);0<=e?(this.gi=(j-b)/e,this.fi=(q-b)/e):(this.gi=(q-b)/e,this.fi=(j-b)/e);if(this.result.ff>this.fi||this.gi>this.result.ef)this.Ui=-1;this.gi>this.result.ff&&(this.result.ff=this.gi);this.fi<this.result.ef&&(this.result.ef=this.fi);0<=f?(this.ii=(m-c)/f,this.hi=(t-c)/f):(this.ii=(t-c)/f,this.hi=(m-c)/f);if(this.result.ff>this.hi||this.ii>
this.result.ef)this.Ui=-1;this.ii>this.result.ff&&(this.result.ff=this.ii);this.hi<this.result.ef&&(this.result.ef=this.hi);return 0<this.Ui?this.result:l};B("AABB",ad);ad.prototype.HitBox=ad.prototype.bh;function bd(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.vc=new Float32Array([a,b,c,d])}bd.prototype.m=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};bd.prototype.sa=function(){this.vc[0]=this.a[0];this.vc[1]=this.a[1];this.vc[2]=this.a[2];this.vc[3]=this.a[3];return this.vc};bd.prototype.Zg=ha("a");bd.prototype.og=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};B("vec4",bd);bd.prototype.Get=bd.prototype.Zg;bd.prototype.Set=bd.prototype.m;function cd(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}fa(Error("Invalid JSON string: "+a))};function Q(a){this.c=a;this.b=a.b;this.D=this.l=this.Rb=this.ha=l;this.mode="";this.jb=this.Yf=0;this.re=this.S=l;this.Ha=p;this.xm=this.se=this.X=l;this.Em=new bd;this.Em.m(1,1,1,1);this.Fm=new bd;this.Fm.m(1,1,1,1);this.Dc=new bd;this.Dc.m(1,1,1,1);this.mc=new bd;this.mc.m(1,0,0,1);this.Nm=new $c;this.offset=this.Aa=this.ba=l;this.Wo=0;this.Di=new ad;this.na=l;this.Th=this.T=0;this.v={};this.ge=Array(3);this.fe=Array(3);this.ye=new O;this.bj=p;this.yb=-1}w=Q.prototype;
w.sf=function(a,b,c,d){this.Dc.m(a,b,c,d)};function dd(a,b){0==b.length%7&&(a.D=new Float32Array(b),a.mode="pc",a.T=7)}function ed(a,b){0==b.length%5&&(a.D=new Float32Array(b),a.mode="pt",a.T=5)}function fd(a,b){0==b.length%5&&(a.D=new Float32Array(b),a.mode="poi",a.T=5)}function gd(a,b,c){a.S=new Uint16Array(b);a.re=c;a.jb=b.length;a.Ha=k;switch(c){case "TRIANGLES":a.Th=b.length/3;break;case "TRIANGLESTRIP":a.Th=b.length-2}}w.Uc=ga("l");
w.Ne=function(){this.ha=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ha);this.b.bufferData(this.b.ARRAY_BUFFER,this.D,this.b.STATIC_DRAW);this.Rb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Rb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.S,this.b.STATIC_DRAW)};
w.t=function(){this.ha&&(this.b.deleteBuffer(this.ha),this.ha=l);this.Rb&&(this.b.deleteBuffer(this.Rb),this.Rb=l);this.bj?this.l.t():this.l=l;this.D=l;this.mode="";this.jb=this.Yf=0;this.re=this.S=l};
w.va=function(a,b,c,d,e){if(this.Ha){b=b||0;c=c||0;this.ha==l&&this.Ne();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ha);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Rb);this.na&&(this.c.Sc(),this.ye.W(this.na,this.c.Tb),this.c.Tc(this.ye));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,12,0);hd(this.c.Za,this.c.ya,this.mc);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,p,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,p,32,24);d=this.c.Za;e=this.c.Rh;var f=this.c.Tf,g=this.c.$c;d.Xb&&(d.b.useProgram(d.Xb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Xb,"matModelView"),p,f.sa()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Xb,"matProjection"),p,g.sa()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Xb,"matNormal"),p,e.sa()),d.b.uniform1i(d.b.getUniformLocation(d.Xb,
"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,p,28,12);id(this.c.Za,this.c.ya,this.Dc);break;case "pnc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,40,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,p,40,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,
p,40,24);jd(this.c.Za,this.c.Rh,this.c.Tf,this.c.ya,this.Dc);break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,p,20,12);d=this.c.Za;e=this.c.ya;f=this.Dc;d.Ic&&(d.b.useProgram(d.Ic),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ic,"matMVP"),p,e.sa()),d.b.uniform1i(d.b.getUniformLocation(d.Ic,"uTexture"),0),d.b.uniform4fv(d.b.getUniformLocation(d.Ic,"uColor"),f.sa()));break;
case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,p,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,p,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,p,48,40);d=this.c.Za;e=this.c.ya;d.Hc&&(d.b.useProgram(d.Hc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Hc,"matMVP"),p,e.sa()));break;case "font":this.b.enableVertexAttribArray(0);
this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,p,20,12);d==l&&(d=this.Em);e=this.c.Za;f=this.c.ya;e.bd&&(e.b.useProgram(e.bd),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.bd,"matMVP"),p,f.sa()),e.b.uniform4fv(e.b.getUniformLocation(e.bd,"uColor"),d.sa()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,20,0);this.b.vertexAttribPointer(1,
2,this.b.FLOAT,p,20,12);e==l&&(e=this.Fm);d=this.c.Za;f=this.c.ya;d.dd&&(d.b.useProgram(d.dd),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.dd,"matMVP"),p,f.sa()),d.b.uniform4fv(d.b.getUniformLocation(d.dd,"uColor"),e.sa()));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,p,20,12);d=this.c.Za;e=this.c.ya;f=this.c.Tb;d.Jc&&(d.b.useProgram(d.Jc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Jc,
"matM"),p,f.sa()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Jc,"matMVP"),p,e.sa()),d.b.uniform1i(d.b.getUniformLocation(d.Jc,"uTexture"),0));break;default:alert("Draw: unknown surface mode!!")}this.l&&(d=this.l,d.$b&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,d.l)));switch(this.re){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.jb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,
b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.jb,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.jb,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.jb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.jb,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.na&&this.c.Kd();
this.l&&(a=this.l,a.$b&&a.b.bindTexture(a.b.TEXTURE_2D,l));this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
w.oc=function(a,b,c,d){d||(d=this);c&&(this.qd=c);b&&(this.ke=b);a.BoundingBox&&(d.ba=a.BoundingBox[0],d.Aa=a.BoundingBox[1]);a.Offset&&(d.offset=a.Offset);a.CurtainIndex&&(d.Wo=a.CurtainIndex);switch(a.VertexSemantic){case "p":d.Yf=a.Vertices.length/3;b=d;c=a.Vertices;0==c.length%3&&(b.D=new Float32Array(c),b.mode="p",b.T=3);d.mode="p";gd(d,a.Indices,a.IndexSemantic);d.jb=a.Indices.length;break;case "pnt":d.Yf=a.Vertices.length/8;b=d;c=a.Vertices;0==c.length%8&&(b.D=new Float32Array(c),b.mode="pnt",
b.T=8);d.mode="pnt";gd(d,a.Indices,a.IndexSemantic);d.jb=a.Indices.length;break;case "pc":d.Yf=a.Vertices.length/7;d.mode="pc";dd(d,a.Vertices);gd(d,a.Indices,a.IndexSemantic);d.jb=a.Indices.length;break;case "pnc":d.Yf=a.Vertices.length/10;d.mode="pnc";b=d;c=a.Vertices;0==c.length%10&&(b.D=new Float32Array(c),b.mode="pnc",b.T=10);gd(d,a.Indices,a.IndexSemantic);d.jb=a.Indices.length;break;case "pt":d.Yf=a.Vertices.length/5;d.mode="pt";ed(d,a.Vertices);gd(d,a.Indices,a.IndexSemantic);d.jb=a.Indices.length;
break;case "pnct":d.Yf=a.Vertices.length/12;d.mode="p";b=d;c=a.Vertices;0==c.length%12&&(b.D=new Float32Array(c),b.mode="pnct",b.T=12);gd(d,a.Indices,a.IndexSemantic);d.jb=a.Indices.length;break;default:alert("CreateFromJSONObject: unknown surface mode!!")}a.DiffuseMap&&(d.l=new R(d.c),d.l.repeat=k,S(d.l,a.DiffuseMap,function(){var a=d;a.$b=k;a.ke&&a.ke(a)},function(){var a=d;Ec(K("owg.Mesh"),"Downloading Error: Texture not found...");a.qd&&a.qd(a)},k),d.bj=k);a.Center&&d.lh(a.Center[0],a.Center[1],
a.Center[2]);d.bj||(d.$b=k);d.xm&&d.xm();d.ke&&!d.bj&&d.ke(d)};function kd(a,b,c,d){b==l?alert("invalid json-url"):(a.se=b,a.X=new window.XMLHttpRequest,a.X.open("GET",a.se,k),a.ke=c,a.qd=d,a.X.onreadystatechange=function(){if(4==a.X.readyState)if(404==a.X.status)a.qd&&a.qd(a);else{var b=cd(a.X.responseText);a.oc(b,l,l,a)}},a.X.send())}
w.Le=function(a,b,c,d,e,f){var g=p,j,m,n,q;m=j=0;n=1E20;for(var t=0;t<this.Th;t++){var r=t;switch(this.re){case "TRIANGLES":this.v.Lg=this.D[this.S[3*r]*this.T];this.v.Mg=this.D[this.S[3*r]*this.T+1];this.v.Ng=this.D[this.S[3*r]*this.T+2];this.v.Og=this.D[this.S[3*r+1]*this.T];this.v.Pg=this.D[this.S[3*r+1]*this.T+1];this.v.Qg=this.D[this.S[3*r+1]*this.T+2];this.v.ji=this.D[this.S[3*r+2]*this.T];this.v.ki=this.D[this.S[3*r+2]*this.T+1];this.v.li=this.D[this.S[3*r+2]*this.T+2];break;case "TRIANGLESTRIP":0==
r%2?(this.v.Lg=this.D[this.S[r]*this.T],this.v.Mg=this.D[this.S[r]*this.T+1],this.v.Ng=this.D[this.S[r]*this.T+2],this.v.Og=this.D[this.S[r+1]*this.T],this.v.Pg=this.D[this.S[r+1]*this.T+1],this.v.Qg=this.D[this.S[r+1]*this.T+2]):(this.v.Lg=this.D[this.S[r+1]*this.T],this.v.Mg=this.D[this.S[r+1]*this.T+1],this.v.Ng=this.D[this.S[r+1]*this.T+2],this.v.Og=this.D[this.S[r]*this.T],this.v.Pg=this.D[this.S[r]*this.T+1],this.v.Qg=this.D[this.S[r]*this.T+2]);this.v.ji=this.D[this.S[r+2]*this.T];this.v.ki=
this.D[this.S[r+2]*this.T+1];this.v.li=this.D[this.S[r+2]*this.T+2];break;default:Ec(K("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.offset&&(this.v.Lg+=this.offset[0],this.v.Mg+=this.offset[1],this.v.Ng+=this.offset[2],this.v.Og+=this.offset[0],this.v.Pg+=this.offset[1],this.v.Qg+=this.offset[2],this.v.ji+=this.offset[0],this.v.ki+=this.offset[1],this.v.li+=this.offset[2]);if(!(this.S[r]==this.S[r+1]||this.S[r]==this.S[r+2]||this.S[r+1]==
this.S[r+2])){if(this.na){r=new O;r.da(this.ye);var v=new N;v.m(this.v.Lg,this.v.Mg,this.v.Ng);var x=new N;x.m(this.v.Og,this.v.Pg,this.v.Qg);var y=new N;y.m(this.v.ji,this.v.ki,this.v.li);v=r.Qa(v);x=r.Qa(x);r=r.Qa(y);r=this.Nm.Kj(a,b,c,d,e,f,v.a[0],v.a[1],v.a[2],x.a[0],x.a[1],x.a[2],r.a[0],r.a[1],r.a[2])}else r=this.Nm.Kj(a,b,c,d,e,f,this.v.Lg,this.v.Mg,this.v.Ng,this.v.Og,this.v.Pg,this.v.Qg,this.v.ji,this.v.ki,this.v.li);r&&(g=k,r.N<n&&0<r.N&&(n=r.N,j=r.Nc,m=r.Fd,q=t))}}return g?(a={},a.N=n,a.Nc=
j,a.Fd=m,a.Tn=q,a):l};
function ld(a){for(var b=1E20,c=1E20,d=1E20,e=-1E20,f=-1E20,g=-1E20,j,m,n,q=0;q<a.D.length;q++)j=a.D[q*a.T],m=a.D[q*a.T+1],n=a.D[q*a.T+2],j>e&&(e=j),m>f&&(f=m),n>g&&(g=n),j<b&&(b=j),m<c&&(c=m),n<d&&(d=n);a.na&&(q=new N(b,c,d),n=new N(e,c,d),j=new N(e,f,d),d=new N(b,f,d),m=new N(b,c,g),c=new N(b,f,g),e=new N(e,f,g),g=new N(b,f,g),b=a.na.Qa(q),f=a.na.Qa(n),j=a.na.Qa(j),d=a.na.Qa(d),m=a.na.Qa(m),c=a.na.Qa(c),n=a.na.Qa(e),q=a.na.Qa(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],m.a[0],c.a[0],n.a[0],q.a[0]],g=[b.a[1],
f.a[1],j.a[1],d.a[1],m.a[1],c.a[1],n.a[1],q.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],m.a[2],c.a[2],n.a[2],q.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.offset&&(b+=a.offset[0],c+=a.offset[1],d+=a.offset[2],e+=a.offset[0],f+=a.offset[1],g+=a.offset[2]);a.ba===l&&(a.ba=Array(3));a.Aa===l&&(a.Aa=Array(3));a.ba[0]=b;a.ba[1]=c;a.ba[2]=d;a.Aa[0]=e;a.Aa[1]=f;a.Aa[2]=g}
w.sm=function(a,b,c,d,e,f){return this.Di.bh(a,b,c,d,e,f,this.ba[0],this.ba[1],this.ba[2],this.Aa[0],this.Aa[1],this.Aa[2])};w.kh=function(a,b,c,d,e,f){var g=this.c.$.a,j=new O;this.ge[0]=a;this.ge[1]=b;this.ge[2]=c;this.fe[0]=d||0;this.fe[1]=e||0;this.fe[2]=f||0;j.Je([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.ge[0],this.ge[1],this.ge[2],1]);a=new O;a.md(this.fe[0],this.fe[1],this.fe[2]);b=new O;b.W(j,a);this.na=b};
function md(a){a.kh(a.ge[0],a.ge[1],a.ge[2],a.fe[0],a.fe[1],a.fe[2])}
w.lh=function(a,b,c,d,e,f){this.fc=a;this.ec=b;this.cc=c;var g=new T(a,b,c);c=Array(3);g.V(c);(new O).md(c[0],c[1],c[2]);g=new O;g.Rd(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new O;b.Je(a);a=new O;a.Yd(M,M,M);c=new O;c.W(b,a);b=new O;g=new O;a=new O;d?b.Vj(e*Math.PI/180):b.Vj(-1.57079633);e&&g.dm(d*Math.PI/180+1.57079633);f&&a.em(f*Math.PI/180);d=new O;
d.W(b,g);e=new O;e.W(d,a);d=new O;d.W(c,e);this.na=d;ld(this)};w.tf=function(a,b,c){var d=new O;d.Yd(a,b,c);a=new O;b=this.na.mf();a.W(b,d);this.na=a};
w.Db=function(a,b,c){var d=0.017453292519943295*a,e=0.017453292519943295*b,f=0.017453292519943295*c;c=new O;b=Math.cos(d);a=Math.cos(e);var g=Math.cos(f),d=Math.sin(d),e=Math.sin(e),f=Math.sin(f);c.a[0]=a*g;c.a[1]=d*e*g+b*f;c.a[2]=-b*e*g+d*f;c.a[3]=0;c.a[4]=-a*f;c.a[5]=-d*e*f+b*g;c.a[6]=b*e*f+d*g;c.a[7]=0;c.a[8]=e;c.a[9]=-d*a;c.a[10]=b*a;c.a[11]=0;c.a[12]=0;c.a[13]=0;c.a[14]=0;c.a[15]=1;b=this.na.mf();a=new O;a.W(b,c);this.na=a};
w.da=function(a){this.Uc(a.l);this.D=a.D;this.mode=a.mode;this.T=a.T;this.S=a.S;this.re=a.re;this.jb=a.jb;this.Ha=a.Ha;this.Th=a.Th;this.ha=a.ha;this.Rb=a.Rb;this.na=a.na;this.re=a.re};
function nd(a,b,c,d){var e=b[0],f=b[1];b=b[2];var g=c[0],j=c[1];c=c[2];var m={VertexSemantic:"",Vertices:l,IndexSemantic:"",Indices:l,VertexSemantic:"p"};m.Vertices=[-0.5*g+e,-0.5*j+f,-0.5*c+b,-0.5*g+e,-0.5*j+f,0.5*c+b,0.5*g+e,-0.5*j+f,-0.5*c+b,0.5*g+e,-0.5*j+f,0.5*c+b,0.5*g+e,0.5*j+f,-0.5*c+b,0.5*g+e,0.5*j+f,0.5*c+b,-0.5*g+e,0.5*j+f,-0.5*c+b,-0.5*g+e,0.5*j+f,0.5*c+b];m.IndexSemantic="TRIANGLES";m.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];A(d)&&(4==d.length?
a.mc.m(d[0],d[1],d[2],d[3]):3==d.length&&a.mc.m(d[0],d[1],d[2],1));a.oc(m,l,l);ld(a)}function od(a){var b=[],c=a[0],d=a[1];a=a[2];var e;e=(c*c+d*d)/0.578106683090441;e+=a*a/0.5742366172789609;e=Math.sqrt(e);e=1/e;b.push(e*c);b.push(e*d);b.push(e*a);return b}
function pd(a,b,c){var d=Math.sqrt(0.578106683090441),e={VertexSemantic:"",Vertices:l,IndexSemantic:"",Indices:l,VertexSemantic:"p"};e.Vertices=[-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0];e.IndexSemantic="TRIANGLES";e.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];A(b)&&(4==b.length?a.mc.m(b[0],b[1],b[2],
b[3]):3==b.length&&a.mc.m(b[0],b[1],b[2],1));b=e.Vertices;for(d=0;d<c;d++){for(var f=[],g=e.Indices,j=0;j<g.length;j+=3){for(var m=g[j],n=g[j+1],q=g[j+2],t=[(b[3*m+0]+b[3*n+0])/2,(b[3*m+1]+b[3*n+1])/2,(b[3*m+2]+b[3*n+2])/2],t=od(t),r=[(b[3*n+0]+b[3*q+0])/2,(b[3*n+1]+b[3*q+1])/2,(b[3*n+2]+b[3*q+2])/2],r=od(r),v=[(b[3*q+0]+b[3*m+0])/2,(b[3*q+1]+b[3*m+1])/2,(b[3*q+2]+b[3*m+2])/2],v=od(v),x=-1,y=-1,D=-1,C=0;C<b.length/3;C+=3){for(var E=k,U=k,la=k,X=0;3>X;X++)1E-7<Math.abs(b[C+X]-t[X])&&(E&=0),1E-7<Math.abs(b[C+
X]-r[X])&&(U&=0),1E-7<Math.abs(b[C+X]-v[X])&&(la&=0);E&&(x=C/3);U&&(y=C/3);la&&(D=C/3)}-1==x&&(x=b.length/3,b.push(t[0]),b.push(t[1]),b.push(t[2]));-1==y&&(y=b.length/3,b.push(r[0]),b.push(r[1]),b.push(r[2]));-1==D&&(D=b.length/3,b.push(v[0]),b.push(v[1]),b.push(v[2]));f.push(m);f.push(x);f.push(D);f.push(n);f.push(y);f.push(x);f.push(q);f.push(D);f.push(y);f.push(x);f.push(y);f.push(D)}e.Indices=f}a.oc(e,l,l);ld(a)}B("Surface",Q);Q.prototype.Draw=Q.prototype.va;Q.prototype.CopyFrom=Q.prototype.da;
Q.prototype.SetAsBillboard=Q.prototype.kh;Q.prototype.SetTexture=Q.prototype.Uc;Q.prototype.TestBoundingBoxIntersection=Q.prototype.sm;Q.prototype.TestRayIntersection=Q.prototype.Le;var qd="art/";function R(a,b,c,d,e){this.c=a;this.b=a.b;this.l=l;this.Ti=this.$b=p;this.Xa=l;this.height=this.width=0;this.zq=l;this.Jm=this.Vn=p;b&&rd(this,c||0,d||0,e||p);this.repeat=p}
function rd(a,b,c,d){sd(a);a.Lc=a.b.createFramebuffer();a.b.bindFramebuffer(a.b.FRAMEBUFFER,a.Lc);a.Lc.width=b;a.Lc.height=c;a.l=a.b.createTexture();a.b.bindTexture(a.b.TEXTURE_2D,a.l);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MAG_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MIN_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_S,a.b.CLAMP_TO_EDGE);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_T,a.b.CLAMP_TO_EDGE);a.b.texImage2D(a.b.TEXTURE_2D,0,a.b.RGBA,
a.Lc.width,a.Lc.height,0,a.b.RGBA,a.b.UNSIGNED_BYTE,l);a.ej=a.b.createRenderbuffer();a.b.bindRenderbuffer(a.b.RENDERBUFFER,a.ej);d&&a.b.renderbufferStorage(a.b.RENDERBUFFER,a.b.DEPTH_STENCIL,a.Lc.width,a.Lc.height);a.b.framebufferTexture2D(a.b.FRAMEBUFFER,a.b.COLOR_ATTACHMENT0,a.b.TEXTURE_2D,a.l,0);d&&a.b.framebufferRenderbuffer(a.b.FRAMEBUFFER,a.b.DEPTH_STENCIL_ATTACHMENT,a.b.RENDERBUFFER,a.ej);a.b.bindTexture(a.b.TEXTURE_2D,l);a.b.bindRenderbuffer(a.b.RENDERBUFFER,l);a.b.bindFramebuffer(a.b.FRAMEBUFFER,
l);a.$b=k;a.Vn=k;a.width=b;a.height=c}function sd(a){a.Lc!=l&&(a.b.deleteRenderbuffer(a.ej),a.ej=l,a.b.deleteFramebuffer(a.Lc),a.Lc=l,a.b.deleteTexture(a.l),a.l=l,a.Xa&&(a.Xa.t(),a.Xa=l))}
function S(a,b,c,d,e){a.Jm=A(e)?e:p;a.l=a.b.createTexture();var f=a.l,g=a.b;a.l.Nf=new Image;a.l.Nf.crossOrigin="anonymous";a.l.Nf.onload=function(){g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,a.Jm);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.Nf);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.CLAMP_TO_EDGE);g.bindTexture(g.TEXTURE_2D,l);a.width=f.Nf.width;a.height=f.Nf.height;c!=l&&c(a);a.$b=k};a.l.Nf.onerror=function(){Ec(K("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.Ti=k;d&&d(a)};a.l.Nf.src=b}w=R.prototype;
w.U=function(a,b,c,d,e,f,g,j,m,n){c=c||0;d=d||0;e=e||1;f=f||1;g=g||p;j=j||p;m=m||1;if(this.$b){var q=this.width,t=this.height,r=this.width/2,v=this.height/2;this.c.Sc();this.c.Xj();d*=0.017453292519943295;var x=new O;0<d?x.Je([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*r+Math.sin(d)*e*v+e*r+a,-Math.cos(d)*f*v-Math.sin(d)*f*r+f*v+b,c,1]):(x.md(a,b,c),a=new O,a.Yd(e,f,1),x.W(x,a));this.c.Tc(x);this.Xa===l&&(this.Xa=new Q(this.c),j?fd(this.Xa,[0,0,0,0,0,q,
0,0,1,0,q,t,0,1,1,0,t,0,0,1]):fd(this.Xa,[0,0,0,0,1,q,0,0,1,1,q,t,0,1,0,0,t,0,0,0]),gd(this.Xa,[0,1,2,0,2,3],"TRIANGLES"),this.Xa.Uc(this));g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);1>m&&(this.c.b.blendColor(0,0,0,m),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Xa.va(l,l,l,l,n);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.Kd()}};w.t=function(){this.c.b.deleteTexture(this.l);this.l=l;this.Ti=this.$b=p;this.Xa&&(this.Xa.t(),this.Xa=l);sd(this)};w.sh=function(){this.Vn&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Lc),this.b.viewport(0,0,this.Lc.width,this.Lc.height))};w.tm=function(){this.b.bindTexture(this.b.TEXTURE_2D,l);this.b.bindFramebuffer(this.b.FRAMEBUFFER,l);this.b.viewport(0,0,this.c.width,this.c.height)};
w.da=function(a){this.l=a.l;this.$b=a.$b;this.Ti=a.Ti;this.height=this.width=this.Xa=a.Xa};B("Texture",R);R.prototype.CopyFrom=R.prototype.da;R.prototype.Blit=R.prototype.U;R.prototype._EnableRenderToTexture=R.prototype.sh;R.prototype._DisableRenderToTexture=R.prototype.tm;function T(a,b,c){this.H=new Float32Array([a,b,c])}T.prototype.m=function(a,b,c){this.H[0]=a;this.H[1]=b;this.H[2]=c};T.prototype.V=function(a){var b=Math.sin(0.017453292519943295*this.H[1]),c=Math.cos(0.017453292519943295*this.H[1]),d=Math.sin(0.017453292519943295*this.H[0]),e=Jc/Math.sqrt(1-Kc*b*b);a[0]=(e+this.H[2])*c*Math.cos(0.017453292519943295*this.H[0]);a[1]=(e+this.H[2])*c*d;a[2]=(0.993305620011365*e+this.H[2])*b;a[0]*=M;a[1]*=M;a[2]*=M};
T.prototype.pc=function(a,b,c){var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0;a*=Mc;b*=Mc;c*=Mc;for(var m=0;10>m;m++)g=Math.sin(e),g*=g,j=Math.cos(e),g=Jc/Math.sqrt(1-Kc*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*Kc/(g+f));this.H[0]=57.29577951308232*d;this.H[1]=57.29577951308232*e;this.H[2]=f};T.prototype.og=function(){return" Longitude: "+this.H[0].toPrecision(17)+" Latitude: "+this.H[1].toPrecision(17)+" Elevation: "+this.H[2].toPrecision(17)};
B("GeoCoord",T);T.prototype.FromCartesian=T.prototype.pc;T.prototype.ToCartesian=T.prototype.V;T.prototype.ToString=T.prototype.og;function td(a){this.c=a;this.b=a.b;this.na=this.ha=this.Ae=l;this.ye=new O;this.fl=[];this.vj=this.Uh=this.offset=0}w=td.prototype;w.wi=function(a){this.Uh+=a.length/7;0==this.vj&&(this.vj=70*this.Uh);this.Ae=l;this.Ae=new Float32Array(a);this.Ne()};w.t=function(){this.ha&&(this.b.deleteBuffer(this.ha),this.ha=l);this.ha=this.Ae=l};
w.lh=function(a,b,c){var d=new T(a,b,c);c=Array(3);d.V(c);(new O).md(c[0],c[1],c[2]);d=new O;d.Ll(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new O;b.Je(a);a=new O;a.Yd(M,M,M);c=new O;c.W(b,a);a=new O;b=new O;b.W(c,a);this.na=b};
w.va=function(){if(this.Ae!=l){this.ha||this.Ne();this.na&&(this.c.Sc(),this.ye.W(this.na,this.c.Tb),this.c.Tc(this.ye));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ha);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,p,28,12);var a=new O;a.kg(this.c.ya);var b=this.c.Za,c=this.c.ya;b.ed&&(b.b.useProgram(b.ed),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.ed,"matMVP"),p,c.sa()),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.ed,
"matInvMVP"),p,a.sa()));this.b.drawArrays(this.b.POINTS,0,this.Uh);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.na&&this.c.Kd()}};
w.Ne=function(){this.ha===l?(this.ha=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ha),this.b.bufferData(this.b.ARRAY_BUFFER,this.vj,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.Ae)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ha),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.offset,this.Ae));this.offset+=4*this.Ae.length};function ud(){0!=vd&&(this.lq=Error().stack,wd[ra(this)]=this)}var vd=0,wd={};ud.prototype.Hm=p;ud.prototype.wk=function(){if(!this.Hm&&(this.Hm=k,this.pe(),0!=vd)){var a=ra(this);delete wd[a]}};ud.prototype.pe=function(){if(this.sn)for(;this.sn.length;)this.sn.shift()()};function xd(a,b){this.type=a;this.currentTarget=this.target=b}w=xd.prototype;w.pe=s();w.wk=s();w.$f=p;w.defaultPrevented=p;w.fj=k;w.stopPropagation=function(){this.$f=k};w.preventDefault=function(){this.defaultPrevented=k;this.fj=p};var yd=0;function zd(){}w=zd.prototype;w.key=0;w.bg=p;w.Ii=p;w.Od=function(a,b,c,d,e,f){pa(a)?this.Pm=k:a&&a.handleEvent&&pa(a.handleEvent)?this.Pm=p:fa(Error("Invalid listener argument"));this.Ze=a;this.xn=b;this.src=c;this.type=d;this.capture=!!e;this.Ok=f;this.Ii=p;this.key=++yd;this.bg=p};w.handleEvent=function(a){return this.Pm?this.Ze.call(this.Ok||this.src,a):this.Ze.handleEvent.call(this.Ze,a)};var Ad=!Fb||Fb&&9<=Vb,Bd=!Fb||Fb&&9<=Vb,Cd=Fb&&!Tb("9");!Hb||Tb("528");Gb&&Tb("1.9b")||Fb&&Tb("8")||Eb&&Tb("9.5")||Hb&&Tb("528");Gb&&!Tb("8")||Fb&&Tb("9");var Dd="dblclick",Ed="mousedown",Fd="mouseup",Gd="mousemove",Hd="keydown",Id="keyup";function Jd(a){Jd[" "](a);return a}Jd[" "]=s();function Kd(a,b){a&&this.Od(a,b)}Da(Kd,xd);var Ld=0,Md=1,Nd=2,Od=[1,4,2];w=Kd.prototype;w.target=l;w.relatedTarget=l;w.offsetX=0;w.offsetY=0;w.clientX=0;w.clientY=0;w.screenX=0;w.screenY=0;w.button=0;w.keyCode=0;w.charCode=0;w.ctrlKey=p;w.altKey=p;w.shiftKey=p;w.metaKey=p;w.vp=p;w.Se=l;
w.Od=function(a,b){var c=this.type=a.type;xd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Gb){var e;a:{try{Jd(d.nodeName);e=k;break a}catch(f){}e=p}e||(d=l)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Hb||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=Hb||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.vp=zb?a.metaKey:a.ctrlKey;this.state=a.state;this.Se=a;a.defaultPrevented&&this.preventDefault();delete this.$f};function Pd(a,b){return Ad?a.Se.button==b:"click"==a.type?b==Ld:!!(a.Se.button&Od[b])}
w.stopPropagation=function(){Kd.Gg.stopPropagation.call(this);this.Se.stopPropagation?this.Se.stopPropagation():this.Se.cancelBubble=k};w.preventDefault=function(){Kd.Gg.preventDefault.call(this);var a=this.Se;if(a.preventDefault)a.preventDefault();else if(a.returnValue=p,Cd)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};w.pe=s();var Qd={},Rd={},Sd={},Td={};
function V(a,b,c,d,e){if(ma(b)){for(var f=0;f<b.length;f++)V(a,b[f],c,d,e);return l}a:{b||fa(Error("Invalid event type"));d=!!d;var g=Rd;b in g||(g[b]={Na:0,jc:0});g=g[b];d in g||(g[d]={Na:0,jc:0},g.Na++);var g=g[d],f=ra(a),j;g.jc++;if(g[f]){j=g[f];for(var m=0;m<j.length;m++)if(g=j[m],g.Ze==c&&g.Ok==e){if(g.bg)break;j[m].Ii=p;a=j[m];break a}}else j=g[f]=[],g.Na++;var n=Ud,q=Bd?function(a){return n.call(q.src,q.Ze,a)}:function(a){a=n.call(q.src,q.Ze,a);if(!a)return a},m=q,g=new zd;g.Od(c,m,a,b,d,e);
g.Ii=p;m.src=a;m.Ze=g;j.push(g);Sd[f]||(Sd[f]=[]);Sd[f].push(g);a.addEventListener?(a==z||!a.Dm)&&a.addEventListener(b,m,d):a.attachEvent(b in Td?Td[b]:Td[b]="on"+b,m);a=g}b=a.key;Qd[b]=a;return b}function Vd(a,b,c,d,e){if(ma(b))for(var f=0;f<b.length;f++)Vd(a,b[f],c,d,e);else{d=!!d;a:{f=Rd;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ra(a),f[a]))){a=f[a];break a}a=l}if(a)for(f=0;f<a.length;f++)if(a[f].Ze==c&&a[f].capture==d&&a[f].Ok==e){W(a[f].key);break}}}
function W(a){var b=Qd[a];if(b&&!b.bg){var c=b.src,d=b.type,e=b.xn,f=b.capture;c.removeEventListener?(c==z||!c.Dm)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Td?Td[d]:Td[d]="on"+d,e);c=ra(c);if(Sd[c]){var e=Sd[c],g=dc(e,b);0<=g&&cc.splice.call(e,g,1);0==e.length&&delete Sd[c]}b.bg=k;if(b=Rd[d][f][c])b.on=k,Wd(d,f,c,b);delete Qd[a]}}
function Wd(a,b,c,d){if(!d.aj&&d.on){for(var e=0,f=0;e<d.length;e++)d[e].bg?d[e].xn.src=l:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.on=p;0==f&&(delete Rd[a][b][c],Rd[a][b].Na--,0==Rd[a][b].Na&&(delete Rd[a][b],Rd[a].Na--),0==Rd[a].Na&&delete Rd[a])}}function Xd(a,b,c,d,e){var f=1;b=ra(b);if(a[b]){var g=--a.jc,j=a[b];j.aj?j.aj++:j.aj=1;try{for(var m=j.length,n=0;n<m;n++){var q=j[n];q&&!q.bg&&(f&=Yd(q,e)!==p)}}finally{a.jc=Math.max(g,a.jc),j.aj--,Wd(c,d,b,j)}}return Boolean(f)}
function Yd(a,b){a.Ii&&W(a.key);return a.handleEvent(b)}
function Ud(a,b){if(a.bg)return k;var c=a.type,d=Rd;if(!(c in d))return k;var d=d[c],e,f;if(!Bd){e=b||ja("window.event");var g=k in d,j=p in d;if(g){if(0>e.keyCode||e.returnValue!=h)return k;a:{var m=p;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(n){m=k}if(m||e.returnValue==h)e.returnValue=k}}m=new Kd;m.Od(e,this);e=k;try{if(g){for(var q=[],t=m.currentTarget;t;t=t.parentNode)q.push(t);f=d[k];f.jc=f.Na;for(var r=q.length-1;!m.$f&&0<=r&&f.jc;r--)m.currentTarget=q[r],e&=Xd(f,q[r],c,k,m);if(j){f=d[p];
f.jc=f.Na;for(r=0;!m.$f&&r<q.length&&f.jc;r++)m.currentTarget=q[r],e&=Xd(f,q[r],c,p,m)}}else e=Yd(a,m)}finally{q&&(q.length=0)}return e}c=new Kd(b,this);return e=Yd(a,c)};function Zd(a,b){ud.call(this);this.Vm=b;this.Mh=[];a>this.Vm&&fa(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Mh.push(this.Pi())}Da(Zd,ud);w=Zd.prototype;w.zm=l;w.Gm=l;function $d(a,b){a.Mh.length<a.Vm?a.Mh.push(b):a.xk(b)}w.Pi=function(){return this.zm?this.zm():{}};w.xk=function(a){if(this.Gm)this.Gm(a);else if(qa(a))if(pa(a.wk))a.wk();else for(var b in a)delete a[b]};
w.pe=function(){Zd.Gg.pe.call(this);for(var a=this.Mh;a.length;)this.xk(a.pop());delete this.Mh};function ae(){this.Lh=[];this.$k=new kc;this.Pn=this.Qn=this.Rn=this.Hn=0;this.Pd=new kc;this.ym=this.On=0;this.pp=1;this.yk=new Zd(0,4E3);this.yk.Pi=function(){return new be};this.In=new Zd(0,50);this.In.Pi=function(){return new ce};var a=this;this.Qk=new Zd(0,2E3);this.Qk.Pi=function(){return String(a.pp++)};this.Qk.xk=s();this.$o=3}function ce(){this.rl=this.time=this.count=0}
ce.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.rl&&a.push(" [VarAlloc = ",this.rl,"]");return a.join("")};function be(){}function de(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(ee(a.Im-c));e.push(" ",fe(a.Im-b));0==a.zk?e.push(" Start        "):1==a.zk?(e.push(" Done "),e.push(ee(a.Cq-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.Np&&e.push("[VarAlloc ",a.Np,"] ");return e.join("")}
be.prototype.toString=function(){return this.type==l?this.Vo:"["+this.type+"] "+this.Vo};ae.prototype.reset=function(a){this.$o=a;for(a=0;a<this.Lh.length;a++){var b=this.yk.id;b&&$d(this.Qk,b);$d(this.yk,this.Lh[a])}this.Lh.length=0;this.$k.clear();this.Hn=Ca();this.ym=this.On=this.Pn=this.Qn=this.Rn=0;b=this.Pd.Wi();for(a=0;a<b.length;a++){var c=this.Pd.get(b[a]);c.count=0;c.time=0;c.rl=0;$d(this.In,c)}this.Pd.clear()};
ae.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Lh.length;d++){var e=this.Lh[d];1==e.zk&&c.pop();a.push(" ",de(e,this.Hn,b,c.join("")));b=e.Im;a.push("\n");0==e.zk&&c.push("|  ")}if(0!=this.$k.Kf()){var f=Ca();a.push(" Unstopped timers:\n");d=this.$k;b=function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",fe(b.startTime),")\n")};if(na(d))try{ec(d,b,h)}catch(g){g!==hc&&fa(g)}else{d=jc(d);try{for(;;)b.call(h,d.next())}catch(j){j!==hc&&fa(j)}}}b=this.Pd.Wi();for(d=0;d<b.length;d++)c=
this.Pd.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.On,"\n","Total comments created ",this.ym,"\n","Overhead start: ",this.Rn," ms\n","Overhead end: ",this.Qn," ms\n","Overhead comment: ",this.Pn," ms\n");return a.join("")};function ee(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function fe(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new ae;var ge=0;function he(){this.Wp=ge;ge++;this.kd=s();this.ld=s();this.jd=s();this.Ee=s();this.De=s();this.He=s();this.mg=s();this.Ie=s();this.Xp=this.c=l;this.Eq=[]}function ie(a){a.He(a.c.I);a.Ee()}he.prototype.Rc=function(){this.mg();this.De()};function je(){ud.call(this)}Da(je,ud);w=je.prototype;w.Dm=k;w.al=l;w.addEventListener=function(a,b,c,d){V(this,a,b,c,d)};w.removeEventListener=function(a,b,c,d){Vd(this,a,b,c,d)};
w.dispatchEvent=function(a){var b=a.type||a,c=Rd;if(b in c){if(oa(a))a=new xd(a,this);else if(a instanceof xd)a.target=a.target||this;else{var d=a;a=new xd(b,this);Zb(a,d)}var d=1,e,c=c[b],b=k in c,f;if(b){e=[];for(f=this;f;f=f.al)e.push(f);f=c[k];f.jc=f.Na;for(var g=e.length-1;!a.$f&&0<=g&&f.jc;g--)a.currentTarget=e[g],d&=Xd(f,e[g],a.type,k,a)&&a.fj!=p}if(p in c)if(f=c[p],f.jc=f.Na,b)for(g=0;!a.$f&&g<e.length&&f.jc;g++)a.currentTarget=e[g],d&=Xd(f,e[g],a.type,p,a)&&a.fj!=p;else for(e=this;!a.$f&&
e&&f.jc;e=e.al)a.currentTarget=e,d&=Xd(f,e,a.type,p,a)&&a.fj!=p;a=Boolean(d)}else a=k;return a};w.pe=function(){je.Gg.pe.call(this);var a=0;if(this!=l){var b=ra(this);if(Sd[b])for(var b=Sd[b],c=b.length-1;0<=c;c--)W(b[c].key),a++}else Wb(Qd,function(b,c){W(c);a++});this.al=l};function ke(){this.Vh=this.ij=this.sj=this.qj=this.rj=this.pj=this.nj=this.oj=this.mj=this.kj=this.lj=this.jj=this.Jg=this.Kg=this.gg=this.Ig=this.Oi=this.Mi=this.sq=l;this.Xk=this.Wk=0;this.yc=p;this.elevation=this.latitude=this.longitude=this.Ua=0;this.ad=-1;this.hb=this.ob=0;this.ca=le;this.Lf=0;this.Xc=48;this.Mc=this.hj=this.Gd=this.Lb=this.Sg=this.Cb=this.Ub=this.ib=0;this.um=p;this.Bm=this.Am=0;this.Dc=new bd(0.7,0.9,1,1);this.Gn=k;this.jd=s();this.rc=function(a){for(;360<a;)a-=360;for(;0>
a;)a+=360;return a};this.kd=function(){if(0==this.ad)this.yc&&(this.Oi.U(this.Wk-64,this.Xk-64,0,this.Ua,1,1,k,p),this.Mi.U(this.Wk-64,this.Xk-64,0,0,1,1,k,p)),this.c.Be("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(1==this.ad){this.um&&this.ij.U(this.Am-16,this.Bm-16,0,0,1,1,k,p,0.75);var a=this.c.width-1-64-this.Lf,b=this.c.height-1-this.Xc,c=this.rc(this.Sg+this.hj);this.ca==me?this.Jg.U(a-64,b-64,0,c,1,1,k,p,1,
this.Dc):this.ca==ne?this.Jg.U(a-64,b-64,0,c,1,1,k,p,1,this.Dc):this.Jg.U(a-64,b-64,0,c,1,1,k,p);this.ca==oe?(this.Kg.U(a-32,b-32,0,0,1,1,k,p),this.gg.U(a-32,b-32,0,this.Cb,1,1,k,p,0.5)):this.ca==pe?(this.Kg.U(a-32,b-32,0,0,1,1,k,p),this.gg.U(a-32,b-32,0,this.Cb,1,1,k,p,0.5)):this.Kg.U(a-32,b-32,0,0,1,1,k,p);b=this.c.height-1-82-this.Xc;this.ca==qe?(this.Ig.U(a-32,b-32,0,0,1,1,k),this.gg.U(a-32,b-32,0,this.ib,1,1,k,p,0.5)):this.ca==re?(this.Ig.U(a-32,b-32,0,0,1,1,k),this.gg.U(a-32,b-32,0,this.ib,
1,1,k,p,0.5)):this.Ig.U(a-32,b-32,0,0,1,1,k,p);b=this.c.height-1-82-128-this.Xc;this.sj.U(a-8,b-64,0,0,1,1,k,p);b=this.c.height-1-82-64-this.Xc;this.ca==se?this.oj.U(a-16,b-16,0,0,1,1,k,p):this.ca==te?this.nj.U(a-16,b-16,0,0,1,1,k,p):this.mj.U(a-16,b-16,0,0,1,1,k,p);b=this.c.height-1-82-128-64-this.Xc;this.ca==ue?this.lj.U(a-16,b-16,0,0,1,1,k,p):this.ca==ve?this.kj.U(a-16,b-16,0,0,1,1,k,p):this.jj.U(a-16,b-16,0,0,1,1,k,p);b=this.c.height-1-82-128-this.Mc-this.Xc;this.ca==we?this.rj.U(a-16,b-16,0,
0,1,1,k,p):this.ca==xe?this.qj.U(a-16,b-16,0,0,1,1,k,p):this.pj.U(a-16,b-16,0,0,1,1,k,p);this.Vh&&this.Gn&&(a=this.c.width-1-170-this.Lf,b=this.Xc-25,this.Vh.U(a-16,b-16,0,0,1,1,k,p))}};this.ld=function(a){this.ad=a.ad;this.Ua=57.29577951308232*a.Ni;this.longitude=a.Nd.longitude;this.latitude=a.Nd.latitude;this.elevation=a.Nd.elevation;this.um=a.sd;this.Am=a.Ya[0];this.Bm=this.c.height-a.Ya[1]-1;this.ca!=me&&(this.hj=this.Ua,this.Sg=0);this.ca==te?(a.Ba=Uc,a.ua=1):this.ca==ve?(a.Ba=Vc,a.ua=1):this.ca==
xe?0<this.Mc?(a.Ba=Vc,a.ua=Math.sqrt(this.Mc)/4):0>this.Mc&&(a.ua=Math.sqrt(-this.Mc)/4,a.Ba=Uc):this.ca==re?(a.Ba=Wc,a.ua=this.Ub):this.ca==me?(a.Ba=Xc,a.ua=this.hj+this.Sg,a.ua=this.rc(a.ua),a.ua*=Math.PI/180):this.ca==oe?(a.Ba=Yc,a.ua=Math.PI*this.Cb/180):a.Ba=Tc;a.Yk=this.ca==le?0:1};this.Ee=function(){this.Mi=new R(this.c);S(this.Mi,qd+"flightnavigation/cmpbg.png");this.Oi=new R(this.c);S(this.Oi,qd+"flightnavigation/cmpr.png");this.Ig=new R(this.c);S(this.Ig,qd+"globenavigation/MoveWheel.png");
this.Kg=new R(this.c);S(this.Kg,qd+"globenavigation/YawPitchWheel.png");this.Jg=new R(this.c);S(this.Jg,qd+"globenavigation/yaw_pitch_adjust.png");this.gg=new R(this.c);S(this.gg,qd+"globenavigation/movewheel_marker.png",l,l,k);this.jj=new R(this.c);S(this.jj,qd+"globenavigation/minus.png");this.lj=new R(this.c);S(this.lj,qd+"globenavigation/minus_over.png");this.kj=new R(this.c);S(this.kj,qd+"globenavigation/minus_clicked.png");this.mj=new R(this.c);S(this.mj,qd+"globenavigation/plus.png");this.oj=
new R(this.c);S(this.oj,qd+"globenavigation/plus_over.png");this.nj=new R(this.c);S(this.nj,qd+"globenavigation/plus_clicked.png");this.pj=new R(this.c);S(this.pj,qd+"globenavigation/slider.png");this.rj=new R(this.c);S(this.rj,qd+"globenavigation/slider_over.png");this.qj=new R(this.c);S(this.qj,qd+"globenavigation/slider_clicked.png");this.sj=new R(this.c);S(this.sj,qd+"globenavigation/slider_rail.png");this.ij=new R(this.c);S(this.ij,qd+"globenavigation/crosshair.png");this.Vh=new R(this.c);S(this.Vh,
qd+"owg.png")};this.De=function(){this.Mi.t();this.Oi.t();this.Ig.t();this.Kg.t();this.Jg.t();this.gg.t();this.jj.t();this.lj.t();this.kj.t();this.mj.t();this.oj.t();this.nj.t();this.pj.t();this.rj.t();this.qj.t();this.sj.t();this.ij.t();this.Vh.t()};this.mg=function(){W(this.Ac);W(this.Cc);W(this.Bc);W(this.vd)};this.He=function(a){this.Ac=V(a,Ed,this.Td,p,this);this.Cc=V(a,Fd,this.Vd,p,this);this.Bc=V(a,Gd,this.Ud,p,this);this.vd=V(a,Dd,this.fh,p,this)};this.Td=function(a){if(Pd(a,Ld)){var b=a.offsetX-
this.c.I.offsetLeft;a=a.offsetY-this.c.I.offsetTop;this.Wk=b;this.Xk=this.c.height-a-1;this.ob=b;this.hb=this.c.height-a-1;this.yc=k;1==this.ad&&this.Hj(0)}};this.Vd=function(a){if(Pd(a,Ld)){var b=a.offsetY-this.c.I.offsetTop;this.ob=a.offsetX-this.c.I.offsetLeft;this.hb=this.c.height-b-1;this.yc=p;1==this.ad&&this.Hj(0);this.Mc=0}};this.Ud=function(a){if(this.c&&this.c.I){var b=a.offsetY-this.c.I.offsetTop,c=this.c.height-b-1-this.hb;this.ob=a.offsetX-this.c.I.offsetLeft;this.hb=this.c.height-b-
1;1==this.ad&&this.Hj(c)}};this.fh=function(){this.ca==ne&&ye(this.c.wa,this.longitude,this.latitude,this.elevation,0,-90,0)};this.Hj=function(a){var b=this.c.width-1-64-this.Lf-8,c=this.c.height-1-82-64-this.Xc+8,d=this.c.width-1-64-this.Lf-8,e=this.c.height-1-82-128-64-this.Xc+8,f=this.c.width-1-64-this.Lf-8,g=this.c.height-1-82-128-this.Mc-this.Xc+8,j=this.c.width-1-64-this.Lf,m=this.c.height-1-82-this.Xc,n=Math.abs(this.ob-j),q=Math.abs(this.hb-m),t=this.c.width-1-64-this.Lf,r=this.c.height-1-
this.Xc,v=Math.abs(this.ob-t),v=v*v,x=Math.abs(this.hb-r),x=x*x;this.yc&&this.ca==xe?(this.Mc-=a,-40>this.Mc?this.Mc=-40:40<this.Mc&&(this.Mc=40)):this.yc&&this.ca==re?(a=this.ob-j,m=this.hb-m,this.Ub=this.ib=180*Math.atan2(Math.abs(m),a)/Math.PI,0>m?this.ib=360-this.ib:this.Ub=360-this.Ub,this.ib+=90,this.Ub+=90,this.ib=this.rc(this.ib),this.Ub=this.rc(this.Ub)):this.yc&&this.ca==me?(a=this.ob-t,m=this.hb-r,this.Lb=180*Math.atan2(Math.abs(m),a)/Math.PI,0>m&&(this.Lb=360-this.Lb),this.Lb-=90,this.Lb=
this.rc(this.Lb),this.Sg=this.rc(this.Lb-this.Gd)):this.yc&&this.ca==oe?(a=this.ob-t,m=this.hb-r,this.Cb=180*Math.atan2(Math.abs(m),a)/Math.PI,0>m&&(this.Cb=360-this.Cb),this.Cb+=90,this.Cb=this.rc(this.Cb)):(this.ca=0,this.ob>b&&(this.hb>c-16&&this.ob<b+16&&this.hb<c)&&(this.ca=this.yc?te:se),this.ob>d&&(this.hb>e-16&&this.ob<d+16&&this.hb<e)&&(this.ca=this.yc?ve:ue),this.ob>f&&(this.hb>g-16&&this.ob<f+16&&this.hb<g)&&(this.ca=this.yc?xe:we),729>=n*n+q*q?this.yc?this.ca=re:(this.ca=qe,a=this.ob-
j,m=this.hb-m,this.Ub=this.ib=180*Math.atan2(Math.abs(m),a)/Math.PI,0>m?this.ib=360-this.ib:this.Ub=360-this.Ub,this.ib+=90,this.Ub+=90,this.ib=this.rc(this.ib),this.Ub=this.rc(this.Ub)):this.ib=0,625>=v+x?(this.ca=this.yc?oe:pe,a=this.ob-t,m=this.hb-r,this.Cb=180*Math.atan2(Math.abs(m),a)/Math.PI,0>m&&(this.Cb=360-this.Cb),this.Cb+=90,this.Cb=this.rc(this.Cb)):1600>=v+x&&(this.yc?(this.ca=me,a=this.ob-t,m=this.hb-r,this.Lb=180*Math.atan2(Math.abs(m),a)/Math.PI,0>m&&(this.Lb=360-this.Lb),this.Lb-=
90,this.Lb=this.rc(this.Lb),this.Sg=this.rc(this.Lb-this.Gd),this.hj=this.Ua):(this.ca=ne,a=this.ob-t,m=this.hb-r,this.Gd=180*Math.atan2(Math.abs(m),a)/Math.PI,0>m&&(this.Gd=360-this.Gd),this.Gd-=90,this.Gd-=this.Sg,this.Gd=this.rc(this.Gd))))};this.Ij=function(a){this.Gn=!a}}var le=0,se=1,te=2,ue=3,ve=4,we=5,xe=6,qe=7,re=8,ne=9,me=10,pe=11,oe=12;ke.prototype=new he;function ze(){this.name="ogAoeImage";this.type=bb;this.Ga=-1;this.Q=p;this.options=l;this.Qf=-1;this.$e=-180;this.Ye=-90;this.Sf=180;this.Pf=90;this.qq="";this.$b=p;this.l=this.kp=l;this.zg=[];this.vg=[]}ze.prototype=new I;w=ze.prototype;w.Ra=function(a){this.options=a;this.$e=a.longitude0;this.Ye=a.latitude0;this.Sf=a.longitude1;this.Pf=a.latitude1;this.hp=a.url;a=this.parent.parent.c;this.kp=new R(a,k,256,256);this.l=new R(a);this.l.parent=this;S(this.l,this.hp,Ae,Be,k);this.Ga=Ce(this).xj(this)};
w.nb=function(){Ce(this).Qj(this.Ga)};function Ce(a){var b=l;a=a.parent.parent.c;a.e&&a.e.q&&(b=a.e.q.kk);return b}w.qa=s();w.ra=s();
w.sb=function(){var a=this.parent.parent.c;if(this.$b!=p){var b=a.e.q.ta.K.length,c,d,e,f,g=l;this.vg=l;this.vg=[];for(var j=0;j<b;j++)if(g=a.e.q.ta.K[j],!(1>g.i.length)&&!g.pq&&(c=g.$e,d=g.Ye,e=g.Sf,f=g.Pf,!(this.$e>e|this.Sf<c|this.Ye>f|this.Pf<d)&&(this.vg[g.i]=this.zg[g.i],!this.zg[g.i]))){var m=new Q(g.c);m.da(g.B);var n=g.l,q=new R(g.c,k,256,256),t=q;a.rf.push(t);t.sh();n.U(0,0,0,0,1,1,k,k,1);this.l.U(256*(this.$e-c)/(e-c),256*(this.Ye-d)/(f-d),0,0,(this.Sf-this.$e)/this.l.width/((e-c)/256),
(this.Pf-this.Ye)/this.l.height/((f-d)/256),k,k,1);De(a);m.Uc(q);m.Qp=g.F[0];m.Rp=g.F[1];m.Sp=g.F[2];this.zg[g.i]=m;this.vg[g.i]=m}}for(var r in this.vg)a=this.vg[r],b=new O,b.da(a.c.Tb),b.a[12]+=a.Qp,b.a[13]+=a.Rp,b.a[14]+=a.Sp,a.c.Sc(),a.c.Tc(b),a.va(),a.c.Kd()};function Ae(a){a.parent.$b=k;a.M&&a.M(a.i,a,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}function Be(a){a.L&&a.L(a.i,a.caller,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l};function Ee(a){this.c=a;this.Bh=[]}Ee.prototype.sb=function(){for(var a=0;a<this.Bh.length;a++)this.Bh[a].sb()};Ee.prototype.xj=function(a){this.Bh.push(a);return this.Bh.length-1};Ee.prototype.Qj=function(a){this.Bh.splice(a,1)};function Fe(a){this.c=a;this.Ta=[];this.Te=new Ge}Fe.prototype.sb=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.Te.Bi(b);for(var m=0;m<this.Ta.length;m++){var n=this.Ta[m];n.Q||(this.Te.Ai(n.af,n.bf,n.cf,n.af+0.001,n.bf+0.001,n.cf+0.001),f=n.af-c,g=n.bf-d,j=n.cf-e,f=f*f+g*g+j*j,g=n.vl*n.vl,n.ul*n.ul>f&&g<f&&n.va())}};Fe.prototype.ih=function(a,b){for(var c=0;c<this.Ta.length;c++)if(this.Ta[c].gh(a,b))return this.Ta[c];return l};function He(a){this.c=a;this.Wa=[]}He.prototype.sb=function(){for(var a=0;a<this.Wa.length;a++){var b=this.Wa[a];b.Q||b.va()}};He.prototype.yj=function(a){this.Wa.push(a)};He.prototype.Rj=function(a){for(var b=0;b<this.Wa.length;b++)if(this.Wa[b]==a){this.Wa.splice(b,1);break}};He.prototype.hh=function(a,b){for(var c=0;c<this.Wa.length;c++){var d=this.Wa[c].gh(a,b);if(d)return d}return l};function Ie(){}w=Ie.prototype;w.jh=function(a,b){this.Pj(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};w.Pj=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
w.qc=function(a,b){b.x=0;b.y=0;b.yb=a.length;for(var c,d=b.yb;0<d;d--)switch(c=1<<d-1,a[b.yb-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};w.bm=function(a,b){var c={x:l,y:l,yb:l};this.qc(a,c);var d=4.007501668E7/Math.pow(2,c.yb);b[0]=-2.003750834E7+d*c.x;b[1]=2.003750834E7-d*(c.y+1);b[2]=-2.003750834E7+d*(c.x+1);b[3]=2.003750834E7-d*c.y};
w.cm=function(a,b){var c=a.length,d=[],e=256*Math.pow(2,c);this.Pj(a,d);var f=256*d[0]*Math.pow(2,c),g=256*(1-d[1])*Math.pow(2,c),c=Math.min(Math.max(f,0),e-1)/e-0.5,j=0.5-Math.min(Math.max(g,0),e-1)/e,d=90-360*Math.atan(Math.exp(2*-j*Math.PI))/Math.PI,m=360*c,c=Math.min(Math.max(f,0),e-1)/e-0.5,j=0.5-Math.min(Math.max(g,0),e-1)/e,e=90-360*Math.atan(Math.exp(2*-j*Math.PI))/Math.PI;b[0]=d;b[1]=m;b[2]=e;b[3]=360*c};B("MercatorQuadtree",Ie);Ie.prototype.QuadKeyToMercatorCoord=Ie.prototype.jh;
Ie.prototype.QuadKeyToNormalizedCoord=Ie.prototype.Pj;Ie.prototype.QuadKeyToTileCoord=Ie.prototype.qc;Ie.prototype.QuadKeyToMercator=Ie.prototype.bm;Ie.prototype.QuadKeyToWGS84=Ie.prototype.cm;var Je={Oj:function(a){for(var b="",c=0;c<a.length;c++)0==c%2&&(0<c&&c<a.length-4)&&(b=b.concat("/")),b=b.concat(a[c]);return b}};B("GlobeUtils",Je);B("GlobeUtils.MakeHierarchicalFilename",Je.Oj);function Ke(){this.Ha=u(p);this.Pc=u(p);this.Mb=s();this.Id=u(0);this.bc=u(0);this.hf=this.jf=-1;this.Oc=u(p)};function Le(){this.k=this.pb=l;this.la=new Ie;this.Fa=0;this.Ha=u(k);this.Pc=u(p);this.Mb=function(a,b,c,d,e,f){var g={};this.la.qc(b,g);g=this.pb[this.Fa]+"/"+g.yb+"/"+g.x+"/"+g.y+".png";a=new R(a);a.i=b;a.k=c;a.M=d;a.L=e;a.caller=f;S(a,g,Me,Ne,k);this.Fa++;this.Fa>=this.pb.length&&(this.Fa=0)};this.Id=u(0);this.bc=u(18);this.Oc=function(a){return 19>a.length?k:p};this.Va=ga("pb")}Le.prototype=new Ke;function Me(a){a.M(a.i,a,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}
function Ne(a){a.L(a.i,a.caller,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l};function Oe(){this.version=this.style=this.xd=this.k=this.Jb=l;this.bb=1;this.ea=l;this.la=new Ie;this.Ha=u(k);this.Pc=u(p);this.Mb=function(a,b,c,d,e,f){var g={};this.la.qc(b,g);g=this.Jb+"?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER="+this.k+"&STYLE=default&TILEMATRIXSET=EPSG:900913&TILEMATRIX=EPSG%3A900913:"+g.yb+"&TILEROW="+g.y+"&TILECOL="+g.x+"&FORMAT=image%2Fpng";a=new R(a);a.i=b;a.k=c;a.M=d;a.L=e;a.caller=f;a.bb=this.bb;S(a,g,Pe,Qe,k)};this.Id=u(0);this.bc=u(19);this.Oc=u(k);this.Va=function(a,
b,c,d,e,f,g){this.Jb=a;this.k=b;this.xd=d;this.style=e;this.version=f;this.bb=g;this.ea=c;this.xd==l&&(this.xd="image/png");this.style==l&&(this.style="");this.version==l&&(this.version="1.0.0");this.ea==l&&(this.ea="EPSG%3A900913");"EPSG:900913"==this.ea&&(this.ea="EPSG%3A900913");"ESRI:102100"==this.ea&&(this.ea="ESRI%3A102100");"ESRI:102113"==this.ea&&(this.ea="ESRI%3A102113");"EPSG:3785"==this.ea&&(this.ea="EPSG%3A3785");"EPSG:3857"==this.ea&&(this.ea="EPSG%3A3857");"EPSG:4326"==this.ea&&(this.ea=
"EPSG%3A4326")}}Oe.prototype=new Ke;function Pe(a){a.M(a.i,a,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}function Qe(a){a.L(a.i,a.caller,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l};function Re(){this.p=this.y=this.x=0}function Ge(){this.P=Array(6);this.P[0]=new Se;this.P[1]=new Se;this.P[2]=new Se;this.P[3]=new Se;this.P[4]=new Se;this.P[5]=new Se;this.Z=Array(8);this.Z[0]=new Re;this.Z[1]=new Re;this.Z[2]=new Re;this.Z[3]=new Re;this.Z[4]=new Re;this.Z[5]=new Re;this.Z[6]=new Re;this.Z[7]=new Re}function Se(){this.Bd=this.Ad=this.zd=this.Sd=0}
Se.prototype.Qc=function(){var a=Math.sqrt(this.zd*this.zd+this.Ad*this.Ad+this.Bd*this.Bd);this.zd/=a;this.Ad/=a;this.Bd/=a;this.Sd/=a};
Ge.prototype.Ai=function(a,b,c,d,e,f){this.Z[0].x=a;this.Z[0].y=b;this.Z[0].p=c;this.Z[1].x=d;this.Z[1].y=b;this.Z[1].p=c;this.Z[2].x=d;this.Z[2].y=e;this.Z[2].p=c;this.Z[3].x=a;this.Z[3].y=e;this.Z[3].p=c;this.Z[4].x=a;this.Z[4].y=b;this.Z[4].p=f;this.Z[5].x=a;this.Z[5].y=e;this.Z[5].p=f;this.Z[6].x=d;this.Z[6].y=e;this.Z[6].p=f;this.Z[7].x=d;this.Z[7].y=b;this.Z[7].p=f;for(a=0;6>a;a++){b=8;for(c=0;8>c;c++)0>this.P[a].zd*this.Z[c].x+this.P[a].Ad*this.Z[c].y+this.P[a].Bd*this.Z[c].p+this.P[a].Sd&&
--b;if(0==b)return p}return k};
Ge.prototype.Bi=function(a){this.wq=a;this.Gb=a.a;this.an=this.Gb[0];this.en=this.Gb[1];this.jn=this.Gb[2];this.Ag=this.Gb[3];this.bn=this.Gb[4];this.fn=this.Gb[5];this.kn=this.Gb[6];this.Bg=this.Gb[7];this.cn=this.Gb[8];this.gn=this.Gb[9];this.ln=this.Gb[10];this.Cg=this.Gb[11];this.dn=this.Gb[12];this.hn=this.Gb[13];this.mn=this.Gb[14];this.Dg=this.Gb[15];this.P[0].zd=this.Ag+this.an;this.P[0].Ad=this.Bg+this.bn;this.P[0].Bd=this.Cg+this.cn;this.P[0].Sd=this.Dg+this.dn;this.P[0].Qc();this.P[1].zd=
this.Ag-this.an;this.P[1].Ad=this.Bg-this.bn;this.P[1].Bd=this.Cg-this.cn;this.P[1].Sd=this.Dg-this.dn;this.P[1].Qc();this.P[2].zd=this.Ag-this.en;this.P[2].Ad=this.Bg-this.fn;this.P[2].Bd=this.Cg-this.gn;this.P[2].Sd=this.Dg-this.hn;this.P[2].Qc();this.P[3].zd=this.Ag+this.en;this.P[3].Ad=this.Bg+this.fn;this.P[3].Bd=this.Cg+this.gn;this.P[3].Sd=this.Dg+this.hn;this.P[3].Qc();this.P[4].zd=this.Ag+this.jn;this.P[4].Ad=this.Bg+this.kn;this.P[4].Bd=this.Cg+this.ln;this.P[4].Sd=this.Dg+this.mn;this.P[4].Qc();
this.P[5].zd=this.Ag-this.jn;this.P[5].Ad=this.Bg-this.kn;this.P[5].Bd=this.Cg-this.ln;this.P[5].Sd=this.Dg-this.mn;this.P[5].Qc()};B("ViewFrustum",Ge);Ge.prototype.TestBox=Ge.prototype.Ai;Ge.prototype.Update=Ge.prototype.Bi;function Te(){this.Ch=this.Dh=p;this.version=this.df=this.Pp=this.Wn=this.cg=this.Tp=this.nn=this.lp=this.mp=this.Ab=this.rb=this.np=this.Ap=this.Bp=l}
Te.prototype.Yg=function(a){this.X=new XMLHttpRequest;this.X.open("GET",a,k);var b=this;this.X.onreadystatechange=function(){a:if(4==b.X.readyState)if(200==b.X.status){var a=b.X.responseText,d;try{d=cd(a)}catch(e){alert(e);break a}d.extent?(b.version=1,b.Aq=d.name,b.Ab=d.maxlod,b.nn=256,a=d.extent,b.rb=a,b.Wn=[b.Ab,a[0],a[1],a[2],a[3]],"image"==d.type?"png"==d.format?(b.cg="image/png",b.df=".png"):"jpg"==d.format?(b.cg="image/jpg",b.df=".jpg"):b.cg="image/png":"elevation"==d.type&&(b.df=".json")):
(b.version=0,b.Bp=d.layer,b.Ap=d.copyright,b.np=d.srs,b.rb=d.boundingbox,b.Ab=d.levelofdetail,b.mp=d.imagewidth,b.lp=d.imageheight,b.nn=d.tilesize,b.Tp=d.tilelayout,b.cg=d.tileformat,b.Wn=d.bounds,b.Pp=d.center,"image/png"==b.cg?b.df=".png":"image/jpg"==b.cg?b.df=".jpg":"elevation/json"==b.cg&&(b.df=".json"));b.Dh=k}else Ec(K("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.Ch=k};this.X.send()};B("DatasetInfo",Te);Te.prototype.Download=Te.prototype.Yg;function Ue(){this.J=new Te;this.k=this.Jb=l;this.la=new Ie;this.coords=Array(4);this.bb=1;this.Ha=function(){return this.J.Dh};this.Pc=function(){return this.J.Ch};this.Mb=function(a,b,c,d,e,f){if(this.Ha()){var g=this.Jb+"/"+this.k+"/"+Je.Oj(b+this.J.df);a=new R(a);a.i=b;a.k=c;a.M=d;a.L=e;a.caller=f;a.bb=this.bb;S(a,g,Ve,We,k)}};this.Id=u(0);this.bc=function(){return this.J.Ab?this.J.Ab:0};this.Oc=function(a){if(a.length>this.J.Ab)return p;this.la.jh(a,this.coords);a=this.coords[0];var b=this.coords[1],
c=this.coords[2],d=this.coords[3],e=this.J.rb[0],f=this.J.rb[1],g=this.J.rb[2],j=this.J.rb[3];return d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e?p:k};this.Va=function(a,b,c){this.bb=c==l?1:c;this.Jb=a;this.k=b;this.J.Yg(a+"/"+b+".json")}}Ue.prototype=new Ke;function Ve(a){a.M(a.i,a,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}function We(a){a.L(a.i,a.caller,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}B("i3dImageLayer",Ue);Ue.prototype.Failed=Ue.prototype.Pc;Ue.prototype.Ready=Ue.prototype.Ha;
Ue.prototype.RequestTile=Ue.prototype.Mb;Ue.prototype.Setup=Ue.prototype.Va;function Xe(){this.Ha=u(p);this.Pc=u(p);this.Mb=s();this.Id=u(0);this.bc=u(0);this.Oc=u(p)};function Ye(){this.J=new Te;this.k=this.Jb=l;this.la=new Ie;this.coords=Array(4);this.Ha=function(){return this.J.Dh};this.Pc=function(){return this.J.Ch};this.Mb=function(a,b,c,d,e,f){if(this.Ha()){var g=this.Jb+"/"+this.k+"_JSON/"+(Je.Oj(b+".jso")+"n");a=new Q(a);a.i=b;a.k=c;a.M=d;a.L=e;a.caller=f;kd(a,g,Ze,$e)}};this.Id=u(0);this.bc=function(){return this.J.Ab?this.J.Ab:0};this.Oc=function(a){if(a.length>this.J.Ab)return p;this.la.jh(a,this.coords);a=this.coords[0];var b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.J.rb[0],f=this.J.rb[1],g=this.J.rb[2],j=this.J.rb[3];return d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e?p:k};this.Va=function(a,b){this.Jb=a;this.k=b;this.J.Yg(a+"/"+b+".json")}}Ye.prototype=new Xe;function Ze(a){a.M(a.i,a,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}function $e(a){a.L(a.i,a.caller,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l};function af(){this.version=this.style=this.xd=this.k=this.Jb=l;this.bb=1;this.ea=l;this.la=new Ie;this.Ha=u(k);this.Pc=u(p);this.Mb=function(a,b,c,d,e,f){-1==this.Jb.indexOf("?",this.Jb.length-1)&&(this.Jb+="?");var g=Array(4);"EPSG%3A4326"==this.ea?this.la.cm(b,g):this.la.bm(b,g);g=g[0]+","+g[1]+","+g[2]+","+g[3];g=this.Jb+"service=WMS&request=GetMap&WIDTH=256&HEIGHT=256&TILED=TRUE&SRS="+this.ea+"&LAYERS="+this.k+"&STYLES="+this.style+"&FORMAT="+this.xd+"&VERSION="+this.version+"&BBOX="+g;a=new R(a);
a.i=b;a.k=c;a.M=d;a.L=e;a.caller=f;"image/png"==this.xd&&(a.bb=this.bb);S(a,g,bf,cf,k)};this.Id=u(0);this.bc=u(30);this.Oc=function(a){return 31>a.length?k:p};this.Va=function(a,b,c,d,e,f,g){this.Jb=a;this.k=b;this.xd=d;this.style=e;this.version=f;this.bb=g;this.ea=c;this.xd==l&&(this.xd="image/png");this.style==l&&(this.style="");this.version==l&&(this.version="1.1.1");this.ea==l&&(this.ea="EPSG%3A900913");"EPSG:900913"==this.ea&&(this.ea="EPSG%3A900913");"ESRI:102100"==this.ea&&(this.ea="ESRI%3A102100");
"ESRI:102113"==this.ea&&(this.ea="ESRI%3A102113");"EPSG:3785"==this.ea&&(this.ea="EPSG%3A3785");"EPSG:3857"==this.ea&&(this.ea="EPSG%3A3857");"EPSG:4326"==this.ea&&(this.ea="EPSG%3A4326")}}af.prototype=new Ke;function bf(a){a.M(a.i,a,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}function cf(a){a.L(a.i,a.caller,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l};function df(){this.k=this.pb=l;this.la=new Ie;this.Fa=0;this.Ha=u(k);this.Pc=u(p);this.Mb=function(a,b,c,d,e,f){var g={};this.la.qc(b,g);var j=Math.pow(2,g.yb),g=this.pb[this.Fa]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.yb)+"&key=[KEY]";a=new R(a);a.i=b;a.k=c;a.M=d;a.L=e;a.caller=f;S(a,g,ef,ff,k);this.Fa++;this.Fa>=this.pb.length&&(this.Fa=0)};this.Id=u(0);this.bc=u(16);this.Oc=function(a){return 17>a.length?k:p};this.Va=ga("pb")}Le.prototype=new Ke;
function ef(a){a.M(a.i,a,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}function ff(a){a.L(a.i,a.caller,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l};function gf(){this.J=new Te;this.k=this.Jb=l;this.la=new Ie;this.coords=Array(4);this.Fa=0;this.Ha=function(){return this.J.Dh};this.Pc=function(){return this.J.Ch};this.Mb=function(a,b,c,d,e,f){if(this.Ha()){var g={};this.la.qc(b,g);g=this.pb[this.Fa]+"/"+this.k+"/tiles/"+g.yb+"/"+g.x+"/"+g.y+".json";a=new Q(a);a.i=b;a.k=c;a.M=d;a.L=e;a.caller=f;kd(a,g,hf,jf);this.Fa++;this.Fa>=this.pb.length&&(this.Fa=0)}};this.Id=u(0);this.bc=function(){return this.J.Ab?this.J.Ab:0};this.Oc=function(a){if(a.length>
this.J.Ab)return p;for(var b=a,c=a,d=0;d<this.J.Ab-a.length;d++)b+="0",c+="3";d={};this.la.qc(b,d);b=d.x;a=d.y;this.la.qc(c,d);var c=d.x,d=d.y,e=this.J.rb[0],f=this.J.rb[1],g=this.J.rb[3];return!(b>this.J.rb[2]||c<e||a>g||d<f)};this.Va=function(a,b){this.pb=a;this.k=b;this.J.Yg(a[0]+"/"+b+"/layersettings.json")}}gf.prototype=new Xe;function hf(a){a.M(a.i,a,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}function jf(a){a.L(a.i,a.caller,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l};function kf(){this.k=this.pb=l;this.la=new Ie;this.sub=this.Fa=0;this.Mp="Galile Galil Gali Gal Ga G".split(" ");this.Ha=u(k);this.Pc=u(p);this.Mb=function(a,b,c,d,e,f){var g={};this.la.qc(b,g);g=this.pb[this.Fa]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.yb+"&s="+this.Mp[this.sub];this.sub++;5==this.sub&&(this.sub=0);a=new R(a);a.i=b;a.k=c;a.M=d;a.L=e;a.caller=f;S(a,g,Me,Ne,k);this.Fa++;this.Fa>=this.pb.length&&(this.Fa=0)};this.Id=u(0);this.bc=u(19);this.Oc=function(a){return 20>a.length?k:p};this.Va=
ga("pb")}kf.prototype=new Le;function lf(a,b){this.Uf=a||-1;this.Xo=b||p;this.Xe={};this.Na=0;this.yn=Math.round(0.75*this.Uf);this.Pd={};this.Pd.hits=0;this.Pd.misses=0;mf(this,"Initialized cache with size "+a)}lf.prototype.getItem=function(a){var b=this.Xe[a];b!=l&&(nf(b)?(of(this,a),b=l):b.$i=(new Date).getTime());(b=b?b.value:l)?(this.Pd.hits++,mf(this,"Cache HIT for key "+a)):(this.Pd.misses++,mf(this,"Cache MISS for key "+a));return b};
lf.prototype.setItem=function(a,b,c){this.Xe[a]!=l&&of(this,a);b=new function(a,b,c){(a==l||""==a)&&fa(Error("key cannot be null or empty"));this.key=a;this.value=b;c==l&&(c={});c.Si!=l&&(c.Si=c.Si.getTime());c.bi==l&&(c.bi=2);this.options=c;this.$i=(new Date).getTime()}(a,b,c);this.Xe[b.key]=b;this.Na++;mf(this,"Setting key "+a);if(0<this.Uf&&this.Na>this.Uf){var d=this;setTimeout(function(){d.zp.call(d)},0)}};lf.prototype.clear=function(){for(var a in this.Xe)of(this,a);mf(this,"Cache cleared")};
lf.prototype.zp=function(){var a=[],b;for(b in this.Xe){var c=this.Xe[b];nf(c)?of(this,b):a.push(c)}if(a.length>this.yn)for(a=a.sort(function(a,b){return a.options.bi!=b.options.bi?b.options.bi-a.options.bi:b.$i-a.$i});a.length>this.yn;)b=a.pop(),of(this,b.key);mf(this,"Purged cached")};function of(a,b){var c=a.Xe[b];delete a.Xe[b];a.Na--;mf(a,"removed key "+b);c.options.Ro!=l&&setTimeout(function(){c.options.Ro.call(l,c.key,c.value)},0);c.value.t!=l&&setTimeout(function(){c.value.t()},0)}
function nf(a){var b=(new Date).getTime(),c=p;a.options.Si&&a.options.Si<b&&(c=k);!c&&a.options.cp&&a.$i+1E3*a.options.cp<b&&(c=k);return c}function mf(a,b){a.Xo&&K("owg.Cache").info(b)};function pf(a,b,c){a=0.017453292519943295*a-0;b=Math.log(Math.tan(Math.PI/4+0.017453292519943295*b/2));a/=Math.PI;b/=Math.PI;c[0]=a;c[1]=b}function qf(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b*=57.29577951308232;for(a=57.29577951308232*(a/1+0);180<a;)a-=180;for(;-180>a;)a+=180;for(;90<b;)b-=180;for(;-90>b;)b+=180;c[0]=a;c[1]=b};function rf(a,b,c){this.c=a;this.i=b;this.la=c;this.l=l;this.xc=p;this.B=l;this.Lm=k;this.F=[];this.lb=Array(5);this.lb[0]=new N;this.lb[1]=new N;this.lb[2]=new N;this.lb[3]=new N;this.lb[4]=new N;this.We=0;this.images=l;this.nk=p;this.xg=0;this.Ci=new N;this.Kb=new O;this.$e=-180;this.Ye=-90;this.Sf=180;this.Pf=90;var d=Array(4),e=Array(2);this.la.jh(this.i,d);a=Array(3);b=Array(3);c=Array(3);var f,g,j=new T;f=d[0];g=d[1];qf(f,g,e);f=e[0];g=e[1];this.$e=f;this.Pf=g;j.m(f,g,0);j.V(a);f=d[2];g=d[1];
qf(f,g,e);f=e[0];g=e[1];j.m(f,g,0);j.V(b);f=d[2];g=d[3];qf(f,g,e);f=e[0];g=e[1];this.Sf=f;this.Ye=g;j.m(f,g,0);j.V(c);d=new N;e=new N;d.m(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.m(c[0]-a[0],c[1]-a[1],c[2]-a[2]);Rc(this.Ci,d,e);this.Ci.Qc()}var sf=0;
function tf(a){if(0==a.We&&0==a.xg){var b=0,c=0;if(a.images!==l)for(var d=0;d<a.images.length;d++)a.images[d]!=l&&(b++,c=d);0==b?(a.l=a.c.Zk,a.B===l&&uf(a),a.B.Uc(a.l),a.xc=k,a.images=l):1==b?(a.l=a.images[c],a.B===l&&uf(a),a.B.Uc(a.l),a.xc=k,a.images=l):(a.nk=k,a.B===l&&uf(a),a.xc=k)}}function vf(a,b,c){a=b.caller;a.images[c]=b;a.We-=1;tf(a);sf--}function wf(a,b,c){0<=c?(b.images[c]=l,b.We-=1):(b.images=l,b.We=0);tf(b);sf--}
function xf(a,b){var c=b.caller;c.B=b;c.B.yb=c.i.length;c.F=b.offset;c.lb[0].m(b.ba[0],b.ba[1],b.ba[2]);c.lb[1].m(b.Aa[0],b.ba[1],b.ba[2]);c.lb[2].m(b.Aa[0],b.Aa[1],b.ba[2]);c.lb[3].m(b.ba[0],b.Aa[1],b.ba[2]);c.lb[4].m(0.5*(b.Aa[0]-b.ba[0]),0.5*(b.Aa[1]-b.ba[1]),0.5*(b.Aa[2]-b.ba[2]));c.xg-=1;tf(c);sf--}function yf(a,b){b.B=l;b.xg-=1;tf(b);sf--}rf.prototype.t=function(){this.l&&this.l.t();this.B&&this.B.t()};
function uf(a){var b=Array(4),c=Array(2),d=Array(3);a.la.jh(a.i,b);var e=b[0],f=b[1],g=b[2],j=b[3],m;a.Lm=p;a.B=new Q(a.c);a.B.yb=a.i.length;3>a.i.length?(b=2,m=1E5):6>a.i.length?(b=9,m=1E5):(b=5,m=1E3);for(var n=[],q=[],j=(j-f)/(b-1),t=(g-e)/(b-1),r=1/(b-1),v,x,y,D=new T,C=0;C<b;C++)for(var E=0;E<b;E++)v=e+E*t,x=f+C*j,qf(v,x,c),D.m(c[0],c[1],0),D.V(d),v=d[0],x=d[1],y=d[2],0==E&&0==C&&(a.F=[v,x,y]),0==E&&0==C?a.lb[0].m(v,x,y):E==b-1&&0==C?a.lb[1].m(v,x,y):E==b-1&&C==b-1?a.lb[2].m(v,x,y):0==E&&C==
b-1?a.lb[3].m(v,x,y):E==(b-1)/2&&C==(b-1)/2&&a.lb[4].m(v,x,y),n.push(v-a.F[0]),n.push(x-a.F[1]),n.push(y-a.F[2]),n.push(E*r),n.push(1-C*r);E=0;C=b-1;y=-m;qf(e+E*t,f+C*j,c);D.m(c[0],c[1],y);D.V(d);v=d[0];x=d[1];y=d[2];n.push(v-a.F[0]);n.push(x-a.F[1]);n.push(y-a.F[2]);n.push(E*r);n.push(1-C*r);C=E=0;y=-m;qf(e+E*t,f+C*j,c);D.m(c[0],c[1],y);D.V(d);v=d[0];x=d[1];y=d[2];n.push(v-a.F[0]);n.push(x-a.F[1]);n.push(y-a.F[2]);n.push(E*r);n.push(1-C*r);E=b-1;C=0;y=-m;qf(e+E*t,f+C*j,c);D.m(c[0],c[1],y);D.V(d);
v=d[0];x=d[1];y=d[2];n.push(v-a.F[0]);n.push(x-a.F[1]);n.push(y-a.F[2]);n.push(E*r);n.push(1-C*r);E=b-1;C=b-1;y=-m;qf(e+E*t,f+C*j,c);D.m(c[0],c[1],y);D.V(d);v=d[0];x=d[1];y=d[2];n.push(v-a.F[0]);n.push(x-a.F[1]);n.push(y-a.F[2]);n.push(E*r);n.push(1-C*r);for(g=1;g<b-1;g++)E=0,C=b-1-g,v=e+E*t,x=f+C*j,y=-m,qf(v,x,c),D.m(c[0],c[1],y),D.V(d),v=d[0],x=d[1],y=d[2],n.push(v-a.F[0]),n.push(x-a.F[1]),n.push(y-a.F[2]),n.push(E*r),n.push(1-C*r);for(g=1;g<b-1;g++)E=g,C=0,v=e+E*t,x=f+C*j,y=-m,qf(v,x,c),D.m(c[0],
c[1],y),D.V(d),v=d[0],x=d[1],y=d[2],n.push(v-a.F[0]),n.push(x-a.F[1]),n.push(y-a.F[2]),n.push(E*r),n.push(1-C*r);for(g=1;g<b-1;g++)E=b-1,C=g,v=e+E*t,x=f+C*j,y=-m,qf(v,x,c),D.m(c[0],c[1],y),D.V(d),v=d[0],x=d[1],y=d[2],n.push(v-a.F[0]),n.push(x-a.F[1]),n.push(y-a.F[2]),n.push(E*r),n.push(1-C*r);for(g=1;g<b-1;g++)E=b-1-g,C=b-1,v=e+E*t,x=f+C*j,y=-m,qf(v,x,c),D.m(c[0],c[1],y),D.V(d),v=d[0],x=d[1],y=d[2],n.push(v-a.F[0]),n.push(x-a.F[1]),n.push(y-a.F[2]),n.push(E*r),n.push(1-C*r);for(c=0;c<b-1;c++)for(g=
0;g<b-1;g++)d=g+c*b,e=d+1,m=d+b,f=m+1,q.push(d),q.push(f),q.push(m),q.push(d),q.push(e),q.push(f);c=b*b;d=c+1;e=c+2;f=c+3;for(g=0;g<b-1;g++)m=(b-g-1)*b,j=(b-g-2)*b,r=0==g?c:b*b+3+g,t=g==b-2?d:b*b+4+g,q.push(m),q.push(j),q.push(t),q.push(m),q.push(t),q.push(r);for(g=0;g<b-1;g++)m=g,j=g+1,t=0==g?d:b*b+b+1+g,r=g==b-2?e:b*b+b+2+g,q.push(j),q.push(m),q.push(t),q.push(j),q.push(t),q.push(r);for(g=0;g<b-1;g++)m=(g+1)*b-1,j=(g+2)*b-1,r=0==g?e:b*b+2*b-1+g,t=g==b-2?f:b*b+2*b+g,q.push(j),q.push(m),q.push(r),
q.push(j),q.push(r),q.push(t);for(g=0;g<b-1;g++)m=b*b-1-g,j=m-1,r=0==g?f:b*b+3*b-3+g,t=g==b-2?c:b*b+3*b-2+g,q.push(j),q.push(m),q.push(r),q.push(j),q.push(r),q.push(t);ed(a.B,n);gd(a.B,q,"TRIANGLES");a.B.Uc(a.l);a.B.offset=a.F;ld(a.B)}
rf.prototype.sb=function(a){if(!(3>this.i.length)){if(a){if(this.Kb.da(this.c.Tb),this.Kb.a[12]+=this.F[0],this.Kb.a[13]+=this.F[1],this.Kb.a[14]+=this.F[2],this.c.Sc(),this.c.Tc(this.Kb),a=this.B,a.Ha){a.ha==l&&a.Ne();a.b.bindBuffer(a.b.ARRAY_BUFFER,a.ha);a.b.bindBuffer(a.b.ELEMENT_ARRAY_BUFFER,a.Rb);a.na&&(a.c.Sc(),a.ye.W(a.na,a.c.Tb),a.c.Tc(a.ye));switch(a.mode){case "p":a.b.enableVertexAttribArray(0);a.b.vertexAttribPointer(0,3,a.b.FLOAT,p,12,0);hd(a.c.Za,a.c.ya,a.mc);break;case "pnt":a.b.enableVertexAttribArray(0);
a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);a.b.vertexAttribPointer(0,3,a.b.FLOAT,p,32,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,p,32,12);a.b.vertexAttribPointer(2,2,a.b.FLOAT,p,32,24);hd(a.c.Za,a.c.ya,a.mc);break;case "pc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,p,28,0);a.b.vertexAttribPointer(1,4,a.b.FLOAT,p,28,12);hd(a.c.Za,a.c.ya,a.mc);break;case "pnc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);
a.b.vertexAttribPointer(0,3,a.b.FLOAT,p,40,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,p,40,12);a.b.vertexAttribPointer(2,4,a.b.FLOAT,p,40,24);jd(a.c.Za,a.c.Rh,a.c.Tf,a.c.ya,a.mc);break;case "pt":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,p,20,0);a.b.vertexAttribPointer(1,2,a.b.FLOAT,p,20,12);hd(a.c.Za,a.c.ya,a.mc);break;case "pnct":a.b.enableVertexAttribArray(0),a.b.enableVertexAttribArray(1),a.b.enableVertexAttribArray(2),a.b.enableVertexAttribArray(3),
a.b.vertexAttribPointer(0,3,a.b.FLOAT,p,48,0),a.b.vertexAttribPointer(1,3,a.b.FLOAT,p,48,12),a.b.vertexAttribPointer(2,4,a.b.FLOAT,p,48,24),a.b.vertexAttribPointer(3,2,a.b.FLOAT,p,48,40),hd(a.c.Za,a.c.ya,a.mc)}switch(a.re){case "TRIANGLES":a.b.drawElements(a.b.TRIANGLES,a.jb,a.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a.b.drawElements(a.b.TRIANGLE_STRIP,a.jb,a.b.UNSIGNED_SHORT,0)}a.b.disableVertexAttribArray(0);a.b.disableVertexAttribArray(1);a.b.disableVertexAttribArray(2);a.b.disableVertexAttribArray(3)}}else{if(this.nk){this.nk=
p;a=this.l=new R(this.c,k,256,256);this.c.rf.push(a);a.sh();for(a=0;a<this.images.length;a++)this.images[a]!=l&&(1>this.images[a].bb?this.images[a].U(0,0,0,0,1,1,k,k,this.images[a].bb):this.images[a].U(0,0,0,0,1,1,k,k,1));De(this.c);for(a=0;a<this.images.length;a++)this.images[a]!=l&&this.images[a].t();this.images=l;this.B.Uc(this.l)}this.Kb.da(this.c.Tb);this.Kb.a[12]+=this.F[0];this.Kb.a[13]+=this.F[1];this.Kb.a[14]+=this.F[2];this.c.Sc();this.c.Tc(this.Kb);this.c.e.q.ta.jl==zf?this.B.mode="pt":
this.c.e.q.ta.jl==Af&&(this.B.mode="pt_chroma");this.B.va()}this.c.Kd()}};function Bf(a,b,c,d,e){this.c=a;this.xa=b;this.vb=c;this.la=d;this.Hi=new lf(e,p);this.ol={};this.ol.pn=0}Bf.prototype.t=function(){this.la=this.vb=this.xa=this.c=l;this.Hi.clear();this.Hi=l};Bf.prototype.Vl=function(){if(!this.xa||0==this.xa.length)return p;for(var a=0;a<this.xa.length;a++)if(!this.xa[a].Ha())return p;if(this.vb)for(a=0;a<this.vb.length;a++)if(!this.vb[a].Ha())return p;return k};
Bf.prototype.Xd=function(a){var b=this.Hi.getItem(a);if(b==l){this.ol.pn++;var c=b=new rf(this.c,a,this.la),d=this.xa,e=this.vb;if(3>c.i.length)wf(0,c,-1);else{if(0<d.length){c.We=d.length;c.images=Array(c.We);for(var f=0;f<d.length;f++){c.images[f]=l;var g=c.i.length,g=(g<=d[f].hf||-1==d[f].hf)&&(g>=d[f].jf||-1==d[f].jf);d[f].Oc(c.i)&&g?(d[f].Mb(c.c,c.i,f,vf,wf,c),sf++):wf(0,c,f)}}e&&0<e.length&&(8<c.i.length&&e[0].Oc(c.i))&&(c.xg=1,e[0].Mb(c.c,c.i,0,xf,yf,c),sf++)}this.Hi.setItem(a,b)}return b};
Bf.prototype.bc=function(){var a=0,b=0;if(0<this.vb.length)for(var c=0;c<this.vb.length;c++)b=Math.max(b,this.vb[c].bc());for(c=0;c<this.xa.length;c++)a=Math.max(a,this.xa[c].bc());return 0<b?Math.min(b,a):a};B("GlobeCache",Bf);Bf.prototype.IsReady=Bf.prototype.Vl;Bf.prototype.RequestBlock=Bf.prototype.Xd;function Cf(){this.J=new Te;this.k=l;this.la=new Ie;this.coords=Array(4);this.bb=1;this.Fa=0;this.Ha=function(){return this.J.Dh};this.Pc=function(){return this.J.Ch};this.Mb=function(a,b,c,d,e,f){if(this.Ha()){var g={};this.la.qc(b,g);g=this.pb[this.Fa]+"/"+this.k+"/tiles/"+g.yb+"/"+g.x+"/"+g.y+this.J.df;a=new R(a);a.i=b;a.k=c;a.M=d;a.L=e;a.caller=f;a.bb=this.bb;S(a,g,Df,Ef,k);this.Fa++;this.Fa>=this.pb.length&&(this.Fa=0)}};this.Id=u(0);this.bc=function(){return this.J.Ab?this.J.Ab:0};this.Oc=function(a){if(a.length>
this.J.Ab)return p;for(var b=a,c=a,d=0;d<this.J.Ab-a.length;d++)b+="0",c+="3";d={};this.la.qc(b,d);b=d.x;a=d.y;this.la.qc(c,d);var c=d.x,d=d.y,e=this.J.rb[0],f=this.J.rb[1],g=this.J.rb[3];return!(b>this.J.rb[2]||c<e||a>g||d<f)};this.Va=function(a,b,c){this.bb=c==l?1:c;this.pb=a;this.k=b;this.J.Yg(a[0]+"/"+b+"/layersettings.json")}}Cf.prototype=new Ke;function Df(a){a.M(a.i,a,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}function Ef(a){a.L(a.i,a.caller,a.k);a.M=l;a.L=l;a.i=l;a.caller=l;a.k=l}
B("owgImageLayer",Cf);Cf.prototype.Failed=Cf.prototype.Pc;Cf.prototype.Ready=Cf.prototype.Ha;Cf.prototype.RequestTile=Cf.prototype.Mb;Cf.prototype.Setup=Cf.prototype.Va;function Ff(){this.bb=1;this.Mb=function(a,b,c,d,e,f){var g={};this.la.qc(b,g);g.y=Math.pow(2,g.yb)-1-g.y;g=this.pb[this.Fa]+"/"+g.yb+"/"+g.x+"/"+g.y+".png";a=new R(a);a.i=b;a.k=c;a.M=d;a.L=e;a.caller=f;a.bb=this.bb;S(a,g,Me,Ne,k)}}Ff.prototype=new Le;function Gf(a){this.c=a;this.xa=[];this.vb=[];this.la=new Ie;this.Qo=1E3;this.fb=l;this.K=[];this.Rm=0;this.Qh={};this.Qh.Li=0;this.Fh=l;this.Uk=0;this.zn=1;this.Te=new Ge;this.pa=Array(3);this.Tk=new O;this.Wf=new Q(this.c);this.dg=new Q(this.c);this.Xf=[8/255,24/255,58/255];this.eg=[1,1,1];this.il=1;this.jl=zf;this.Bn={}}w=Gf.prototype;w.t=function(){this.fb&&(this.fb.t(),this.fb=l);this.Wf&&(this.Wf.t(),this.Wf=l);this.dg&&(this.dg.t(),this.dg=l)};
w.Aj=function(a){var b=-1;if(A(a.service))if("i3d"==a.service){if(A(a.url)&&A(a.layer)&&0<a.url.length){var b=a.url[0],c=a.layer,d=new Ue;A(a.minlod)&&(d.jf=a.minlod);A(a.maxlod)&&(d.hf=a.maxlod);d.Va(b,c,a.transparency);b=this.xa.length;this.xa.push(d);Hf(this)}}else"osm"==a.service?A(a.url)&&0<a.url.length&&(d=new Le,A(a.minlod)&&(d.jf=a.minlod),A(a.maxlod)&&(d.hf=a.maxlod),d.Va(a.url),b=this.xa.length,this.xa.push(d),Hf(this)):"tms"==a.service?A(a.url)&&0<a.url.length&&(d=new Ff,A(a.minlod)&&(d.jf=
a.minlod),A(a.maxlod)&&(d.hf=a.maxlod),d.Va(a.url),b=this.xa.length,this.xa.push(d),Hf(this)):"wmts"==a.service?A(a.url)&&(0<a.url.length&&A(a.layer)&&0<a.layer.length)&&(d=new Oe,A(a.format)&&(d.xd=a.format),A(a.style)&&(d.style=a.style),A(a.version)&&(d.version=a.version),d.Va(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency),b=this.xa.length,this.xa.push(d),Hf(this)):"wms"==a.service?A(a.url)&&(0<a.url.length&&A(a.layer)&&0<a.layer.length)&&(d=new af,A(a.format)&&(d.xd=a.format),A(a.style)&&
(d.style=a.style),A(a.version)&&(d.version=a.version),d.Va(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency),b=this.xa.length,this.xa.push(d),Hf(this)):"owg"==a.service?A(a.url)&&0<a.url.length&&(c=a.layer,d=new Cf,A(a.minlod)&&(d.jf=a.minlod),A(a.maxlod)&&(d.hf=a.maxlod),d.Va(a.url,c,a.transparency),b=this.xa.length,this.xa.push(d),Hf(this)):"goo"==a.service?A(a.url)&&0<a.url.length&&(d=new kf,A(a.minlod)&&(d.jf=a.minlod),A(a.maxlod)&&(d.hf=a.maxlod),d.Va(a.url),b=this.xa.length,this.xa.push(d),
Hf(this)):"oym"==a.service&&(A(a.url)&&0<a.url.length)&&(d=new df,A(a.minlod)&&(d.jf=a.minlod),A(a.maxlod)&&(d.hf=a.maxlod),d.Va(a.url),b=this.xa.length,this.xa.push(d),Hf(this));return b};w.zj=function(a){var b=-1;if("i3d"==a.service){if(a.url&&a.layer&&0<a.url.length){var b=a.layer,c=new Ye;c.Va(a.url[0],b);b=this.vb.length;this.vb.push(c);Hf(this)}}else if("owg"==a.service&&a.url&&a.layer&&0<a.url.length){var d=a.url,b=a.layer,c=new gf;c.Va(d,b);b=this.vb.length;this.vb.push(c);Hf(this)}return b};
w.Uj=function(a){0>a||a>=this.xa.length||(this.xa.splice(a,1),Hf(this))};w.Sj=function(a){0>a||a>=this.vb.length||(this.vb.splice(a,1),Hf(this))};function Hf(a){a.fb&&(a.fb.t(),a.fb=l);a.fb=new Bf(a.c,a.xa,a.vb,a.la,a.Qo)}
w.sb=function(a,b){this.fb.ol.pn=0;this.Tk.da(b);this.Te.Bi(b);this.Fh=a;if(this.fb&&this.fb.Vl()){this.Uk=this.fb.bc();var c=this.fb.Xd("0"),d=this.fb.Xd("1"),e=this.fb.Xd("2"),f=this.fb.Xd("3");if(c.xc&&d.xc&&e.xc&&f.xc){this.K=[];this.K.push(c);this.K.push(d);this.K.push(e);this.K.push(f);for(this.Qh.Li=0;this.Qh.Li!=this.K.length;)a:{c=this.Qh.Li;if(this.K[c].i.length!=this.Uk&&this.K[c].xc&&If(this,c)){var g=this.K[c].i,d=this.fb.Xd(g+"0"),e=this.fb.Xd(g+"1"),f=this.fb.Xd(g+"2"),g=this.fb.Xd(g+
"3");if(d.xc&&e.xc&&f.xc&&g.xc){this.K.splice(c,1);this.K.push(d);this.K.push(e);this.K.push(f);this.K.push(g);break a}}this.Qh.Li++}for(c=0;c<this.K.length;)e=this.K[c],d=e.lb[4].a,e=e.Ci.a,f=this.Fh.a,this.pa[0]=f[0]-d[0],this.pa[1]=f[1]-d[1],this.pa[2]=f[2]-d[2],0.4<=(this.pa[0]*e[0]+this.pa[1]*e[1]+this.pa[2]*e[2])/Math.sqrt(this.pa[0]*this.pa[0]+this.pa[1]*this.pa[1]+this.pa[2]*this.pa[2])?this.K.splice(c,1):c++;for(e=0;e<this.K.length;e++)this.K[e].sb(p);d=[];c=[];for(e=0;e<this.K.length;e++){var f=
this.K[e].i,g=0,j=f.charAt(0);if("0"==j||"1"==j)g=1;if("2"==j||"3"==j)g=2;for(var m=1;m<f.length;m++){j=f.charAt(m);if(("0"==j||"1"==j)&&"2"==g){g=0;break}if(("2"==j||"3"==j)&&"1"==g){g=0;break}}1==g&&d.push(this.K[e]);2==g&&c.push(this.K[e])}if(3<d.length){for(e=f=0;e<d.length;e++)d[e].i.length>f&&(f=d[e].i.length);for(e=0;e<d.length;e++)for(d[e].Vb=d[e].i;d[e].Vb.length<f;)d[e].Vb+="0";d.sort(function(a,b){return parseInt(a.Vb,2)-parseInt(b.Vb,2)});e=[0,0,0.7577840175609609];f=[e[0],e[1],e[2],this.Xf[0],
this.Xf[1],this.Xf[2],1];g=[];for(e=0;e<d.length;e++)for(j=2;0==d[e].B.D[j];)f.push(d[e].F[0]+d[e].B.D[j-2]),f.push(d[e].F[1]+d[e].B.D[j-1]),f.push(d[e].F[2]+d[e].B.D[j]),f.push(this.Xf[0]),f.push(this.Xf[1]),f.push(this.Xf[2]),f.push(1),j+=5;for(d=0;d<f.length/7-2;d++)g.push(d);g.push(1);g.push(2);g.push(3);this.Wf.t();this.Wf=new Q(this.c);this.Wf.oc({VertexSemantic:"pc",Vertices:f,IndexSemantic:"TRIANGLEFAN",Indices:g},l,l);this.Wf.va()}if(3<c.length){for(d=e=0;d<c.length;d++)c[d].i.length>e&&
(e=c[d].i.length);for(d=0;d<c.length;d++){c[d].Vb=c[d].i;c[d].Vb=c[d].Vb.replace(/2/g,"0");for(c[d].Vb=c[d].Vb.replace(/3/g,"1");c[d].Vb.length<e;)c[d].Vb+="0"}c.sort(function(a,b){return parseInt(b.Vb,2)-parseInt(a.Vb,2)});d=[0,0,-0.7577840175609609];e=[d[0],d[1],d[2],this.eg[0],this.eg[1],this.eg[2],1];f=[];for(d=0;d<c.length;d++){g=c[d].B.D.length;for(g-=1;0==c[d].B.D[g];)e.push(c[d].F[0]+c[d].B.D[g-4]),e.push(c[d].F[1]+c[d].B.D[g-3]),e.push(c[d].F[2]+c[d].B.D[g-2]),e.push(this.eg[0]),e.push(this.eg[1]),
e.push(this.eg[2]),e.push(1),g-=5}for(c=0;c<e.length/7-2;c++)f.push(c);f.push(1);this.dg.t();this.dg=new Q(this.c);this.dg.oc({VertexSemantic:"pc",Vertices:e,IndexSemantic:"TRIANGLEFAN",Indices:f},l,l);this.dg.va()}}}};
function If(a,b){var c=k,d=a.K[b],e=d.i.length;if(e>a.Uk)return p;if(3>e)return k;c=a.Te.Ai(d.B.ba[0],d.B.ba[1],d.B.ba[2],d.B.Aa[0],d.B.Aa[1],d.B.Aa[2]);if(!c)return p;var f=d.lb[4].a,g=d.Ci.a,e=a.Fh.a;a.pa[0]=e[0]-f[0];a.pa[1]=e[1]-f[1];a.pa[2]=e[2]-f[2];f=Math.sqrt(a.pa[0]*a.pa[0]+a.pa[1]*a.pa[1]+a.pa[2]*a.pa[2]);0<f&&(a.pa[0]/=f,a.pa[1]/=f,a.pa[2]/=f);0.4<a.pa[0]*g[0]+a.pa[1]*g[1]+a.pa[2]*g[2]&&(c=p);if(!c)return p;for(var c=[0,0,0],g=0,f=1E20,j=d.B.D.length/d.B.T,m=0;m<j;m++)c[0]=e[0]-(d.B.D[5*
m]+d.F[0]),c[1]=e[1]-(d.B.D[5*m+1]+d.F[1]),c[2]=e[2]-(d.B.D[5*m+2]+d.F[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=d.lb[0].mf();c.Yj(d.lb[1]);return 1<a.zn*c.Mj()/e}
w.Wd=function(a,b,c){b=this.c.nf(a,b,this.Tk,k);for(var d=[],e=a=0;e<this.K.length;e++){var f=this.K[e].B.ba,g=this.K[e].B.Aa;this.K[e].B.Di.bh(b.x,b.y,b.p,b.le,b.me,b.oe,f[0],f[1],f[2],g[0],g[1],g[2])&&d.push(this.K[e])}f=1E20;c.hit=p;c.numhits=d.length;for(e=0;e<d.length;e++)if((g=d[e].B.Le(b.x,b.y,b.p,b.le,b.me,b.oe))&&g.N<f)c.hit=k,f=g.N,a=d[e].Lm?0:1;c.tmin=f;c.hit&&(c.x=b.x+f*b.le,c.y=b.y+f*b.me,c.z=b.p+f*b.oe,b=new T(0,0,0),b.pc(c.x,c.y,c.z),c.lng=b.H[0],c.lat=b.H[1],c.elv=b.H[2],1==a&&(c.elv=
0))};w.ng=function(a,b,c,d){if(d)if(d={},this.Wd(a,b,d),d.hit)this.il=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.nf(a,b,this.Tk,k);c.hit=p;var f=e.x;b=e.y;a=e.p;var g=e.le;d=e.me;var e=e.oe,j=g*g+d*d+e*e,m=f*g+b*d+a*e,n=m*m-j*(f*f+b*b+a*a-this.il*this.il);0>=n||(j=(0-m-Math.sqrt(n))/j,f+=g*j,b+=d*j,a+=e*j,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=k,c.x=f*d,c.y=b*d,c.z=a*d,a=new T(0,0,0),a.pc(c.x,c.y,c.z),c.lng=a.H[0],c.lat=a.H[1],c.elv=a.H[2])};
w.jg=function(a,b){var c={hasvalue:p,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new T(a,b,0);f.V(e);f.m(a,b,-1);f.V(d);var g,j,f=d[0];g=d[1];j=d[2];for(var m=e[0]-d[0],n=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(m*m+n*n+d*d),m=m/e,n=n/e,d=d/e,e=[],q=0;q<this.K.length;q++){var t=this.K[q].B.ba,r=this.K[q].B.Aa;this.K[q].B.Di.bh(f,g,j,m,n,d,t[0],t[1],t[2],r[0],r[1],r[2])&&e.push(this.K[q])}t=1E20;for(q=0;q<e.length;q++)if((r=e[q].B.Le(f,g,j,m,n,d))&&r.N<t)c.hasvalue=k,c.lod=e[q].B.yb,t=r.N;c.hasvalue&&(c.x=
f+t*m,c.y=g+t*n,c.z=j+t*d,f=new T(0,0,0),f.pc(c.x,c.y,c.z),c.lng=f.H[0],c.lat=f.H[1],c.elevation=f.H[2]);return c};
w.Tg=function(){if(!this.Fh)return NaN;var a=[],b=this.Fh.a,c=new N;if(0==this.vb.length)return c=new T,c.pc(b[0],b[1],b[2]),c.H[2];c.m(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.K.length;d++){var e=this.K[d].B.ba,f=this.K[d].B.Aa;this.K[d].B.Di.bh(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.K[d])}e=1E20;f=p;for(d=0;d<a.length;d++){var g=a[d].B.Le(b[0],b[1],b[2],c[0],c[1],c[2]);g&&g.N<e&&(f=k,e=g.N)}return f?(b=e*c[0],a=e*c[1],c=e*c[2],b=Math.sqrt(b*b+a*a+c*c)*Mc,0>
e&&(b=-b),this.Rm=b):this.Rm};w.xi=ga("jl");var zf=0,Af=1;function Jf(a){this.c=a;this.ia=[]}
Jf.prototype.sb=function(){for(var a=0;a<this.ia.length;a++){var b=new O;b.da(this.c.Tb);b.a[12]+=this.ia[a].F[0];b.a[13]+=this.ia[a].F[1];b.a[14]+=this.ia[a].F[2];this.c.Sc();this.c.Tc(b);var b=this.ia[a],c=this.ia[a],d=this.c.b;d.colorMask(p,p,p,p);d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(p);d.depthFunc(d.GEQUAL);d.enable(d.STENCIL_TEST);d.stencilFunc(d.ALWAYS,0,0);d.stencilOp(d.KEEP,d.KEEP,d.INCR);d.cullFace(d.FRONT);for(var e=0;e<b.length;e++)b[e].va();d.stencilOp(d.KEEP,d.KEEP,
d.DECR);d.cullFace(d.BACK);for(e=0;e<b.length;e++)b[e].va();d.depthMask(k);d.colorMask(k,k,k,k);d.cullFace(d.FRONT);d.stencilFunc(d.NOTEQUAL,0,1);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);d.enable(d.BLEND);d.depthMask(k);for(e=0;e<c.length;e++)c[e].va();d.stencilFunc(d.NOTEQUAL,0,2);for(e=0;e<c.length;e++)c[e].va();d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.enable(d.CULL_FACE);d.cullFace(d.BACK);d.depthFunc(d.LESS);d.disable(d.STENCIL_TEST);this.c.Kd()}};
Jf.prototype.Kl=function(a){this.ia.push(a);return this.ia.length-1};Jf.prototype.vi=function(a){this.ia.splice(a,1)};function Kf(){this.name="ogGeometry";this.type=Pa;this.gb=[];this.zg=[];this.Ga=-1;this.Q=p;this.se="";this.options=this.qd=this.ke=l;this.Qf=-1;this.rn=this.ze=l}Kf.prototype=new I;w=Kf.prototype;
w.Ra=function(a){this.options=a;if(a.url){var b=a.url;if(b==l)alert("invalid json-url");else{this.se=b;this.X=new window.XMLHttpRequest;this.X.open("GET",this.se,k);var c=this;this.X.onreadystatechange=function(){c.ak()};this.X.send()}}a.jsonobject&&this.oc(a.jsonobject);if("EarthPolyline"==a.type)this.rn=Z(db,this,this.options),this.Ga=Lf(this).Hd(this.rn.Re);else if("solidcube"==a.type){A(a.srs)||(a.srs="EPSG:4326");A(a.position)||(a.position=[0,0,0]);A(a.color)||(a.color=[1,1,1]);var d=this.parent.parent.c,
b=l;d.e&&d.e.q&&(b=d.e.q.Jf);if(b){var d=new Q(d),e=a.position,f=a.length,g=a.color;"EPSG:4326"==a.srs?(nd(d,[0,0,0],[f,f,f],g),d.lh(e[0],e[1],e[2],0,0,0),this.Ga=b.Hd([[d]])):"cartesian"==a.srs&&(nd(d,e,[f,f,f],g),this.Ga=b.Hd([[d]]))}}else"solidgeosphere"==a.type&&(A(a.color)||(a.color=[1,1,1]),A(a.subdivisions)||(a.subdivisions=1),d=this.parent.parent.c,b=l,d.e&&d.e.q&&(b=d.e.q.Jf),b&&(d=new Q(d),pd(d,a.color,a.subdivisions),this.Ga=b.Hd([[d]])))};
w.nb=function(){Lf(this).Tj(this.Ga);if(this.ze!=l)J(this.ze);else{for(var a=0;a<this.gb.length;a++)J(this.gb[a]);this.ma=l}};function Lf(a){var b=l;a=a.parent.parent.c;a.e&&a.e.q&&(b=a.e.q.Jf);return b}w.Ke=function(a,b,c,d,e,f){for(var g=0;g<this.gb.length;g++)this.gb[g].Ke(a,b,c,d,e,f)};w.oh=function(a,b,c,d){for(var e=0;e<this.gb.length;e++)this.gb[e].oh(a,b,c,d)};w.Db=function(a,b,c){for(var d=0;d<this.gb.length;d++)this.gb[d].Db(a,b,c)};
w.tf=function(a,b,c){for(var d=0;d<this.gb.length;d++)this.gb[d].tf(a,b,c)};w.qa=function(){if(this.ze!=l)this.ze.qa();else for(var a=0;a<this.gb.length;a++)this.gb[a].qa()};w.ra=function(){if(this.ze!=l)this.ze.ra();else for(var a=0;a<this.gb.length;a++)this.gb[a].ra()};w.sf=function(a,b,c,d){if(this.ze==l)for(var e=0;e<this.gb.length;e++)this.gb[e].sf(a,b,c,d)};w.ak=function(){if(4==this.X.readyState)if(404==this.X.status)this.qd&&this.qd(this.id);else{var a=cd(this.X.responseText);this.oc(a)}};
w.oc=function(a){if("pointcloud"==a.Type)this.options=a,this.ze=Z(cb,this,this.options),a=Lf(this),this.Ga=a.Hd(this.ze.Cd);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=Z(Qa,this,this.options);this.gb.push(c);this.zg.push(c.Ed)}this.ke&&this.ke(this.id);a=Lf(this);this.Ga=a.Hd(this.zg)}};function Mf(a){this.c=a;this.ma=[];this.Te=new Ge;this.Gq=1E5*M*1E5*M}
Mf.prototype.sb=function(a,b){this.Te.Bi(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.ma.length;f++)if(this.ma[f]instanceof td){var g=this.ma[f];g.Q||g.va()}else if(this.ma[f]instanceof Nf)g=this.ma[f],g.Q||g.va();else for(var g=this.ma[f],j=0;j<g.length;j++)for(var m=g[j],n=0;n<m.length;n++){var q=m[n];if(!q.Q){var t=q.ba[0]-c,r=q.ba[1]-d,v=q.ba[2]-e,t=t*t+r*r+v*v,r=q.Zn*q.Zn;this.Te.Ai(q.ba[0],q.ba[1],q.ba[2],q.Aa[0],q.Aa[1],q.Aa[2])&&!(t>r)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),
this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),q.va(),this.c.b.disable(this.c.b.BLEND))}}};Mf.prototype.Hd=function(a){this.ma.push(a);return this.ma.length-1};Mf.prototype.Tj=function(a){this.ma.splice(a,1)};
Mf.prototype.qf=function(a,b){for(var c=this.c.nf(a,b,this.c.ya,k),d=1E4,e=l,f=0;f<this.ma.length;f++)for(var g=this.ma[f],j=0;j<g.length;j++)for(var m=g[j],n=0;n<m.length;n++){var q=m[n];if(!q.Q){q.sm(c.x,c.y,c.p,c.le,c.me,c.oe);var t=q.Le(c.x,c.y,c.p,c.le,c.me,c.oe);t&&t.N<d&&(d=t.N,e=q)}}return e?e.sp:-1};function Of(a){this.ta=l;this.Eb=new N;this.sl=this.kk=this.Eh=this.Jf=this.ai=l;this.Gi=a.rendertotexture;this.l=l;this.elevation=this.Kp=0;this.Cm=p;this.Ue=l;"custom"==a.type&&(this.Cm=k);this.jd=s();this.kd=function(){if(this.Gi){var a=this.l;this.c.rf.push(a);a.sh();a=this.c.b;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.enable(a.DEPTH_TEST);a.disable(a.CULL_FACE)}this.ta&&(this.Ue&&(a=this.c,a.b.disable(a.b.DEPTH_TEST),this.Ue.va(),a=this.c,a.b.enable(a.b.DEPTH_TEST)),
this.ta.sb(this.Eb,this.c.ya));this.sl.sb(this.Eb,this.c.ya);this.ai.sb(this.Eb,this.c.ya);this.Jf.sb(this.Eb,this.c.ya);this.Eh.sb(this.Eb,this.c.ya);this.kk.sb(this.Eb,this.c.ya);this.Gi&&(De(this.c),0==this.Kp&&(A(this.l.Xa)&&this.l.Xa!==l&&(this.l.Xa.mode="pt"),this.l.U(0,0,0,0,1,1,k,k,1)))};this.ld=function(a){var c=a.of();this.Eb.m(c.x,c.y,c.p);this.elevation=a.Nd.elevation};this.Ee=function(){this.Cm||(this.Ue=new Q(this.c),this.Gi?pd(this.Ue,[1,0,1,0],3):pd(this.Ue,[0,0,0,1],2),this.ta=new Gf(this.c));
this.sl=new Jf(this.c);this.ai=new Fe(this.c);this.Jf=new Mf(this.c);this.Eh=new He(this.c);this.kk=new Ee(this.c)};this.De=function(){this.Ue&&(this.Ue.t(),this.Ue=l);this.ta&&(this.ta.t(),this.ta=l)};this.Ej=function(a,c){this.Gi&&(this.l==l?this.l=new R(this.c,k,a,c,k):rd(this.l,a,c,k))};this.He=s()}Of.prototype=new he;function Pf(a,b){var c;c=a.className;c=oa(c)&&c.match(/\S+/g)||[];for(var d=gc(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=dc(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var Qf=!Fb||Fb&&9<=Vb,Rf=!Gb&&!Fb||Fb&&Fb&&9<=Vb||Gb&&Tb("1.9.1");Fb&&Tb("9");var Sf={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Tf(a){this.Ih=a||z.document||document}function Uf(a,b){return oa(b)?a.Ih.getElementById(b):b}w=Tf.prototype;
w.rg=function(a,b,c){var d=this.Ih,e=arguments,f=e[0],g=e[1];if(!Qf&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ob(g.name),'"');if(g.type){f.push(' type="',ob(g.type),'"');var j={};Zb(j,g);delete j.type;g=j}f.push(">");f=f.join("")}f=d.createElement(f);if(g)if(oa(g))f.className=g;else if(ma(g))Pf.apply(l,[f].concat(g));else{var m=f;Wb(g,function(a,b){"style"==b?m.style.cssText=a:"class"==b?m.className=a:"for"==b?m.htmlFor=a:b in Sf?m.setAttribute(Sf[b],a):0==b.lastIndexOf("aria-",0)||
0==b.lastIndexOf("data-",0)?m.setAttribute(b,a):m[b]=a})}if(2<e.length)for(var n=d,q=f,d=e,e=function(a){a&&q.appendChild(oa(a)?n.createTextNode(a):a)},g=2;g<d.length;g++){var t=d[g];if(na(t)&&!(qa(t)&&0<t.nodeType)){var j=ec,r;a:{if((r=t)&&"number"==typeof r.length){if(qa(r)){r="function"==typeof r.item||"string"==typeof r.item;break a}if(pa(r)){r="function"==typeof r.item;break a}}r=p}if(r)if(r=t.length,0<r){for(var v=Array(r),x=0;x<r;x++)v[x]=t[x];t=v}else t=[];j(t,e)}else e(t)}return f};
w.createElement=function(a){return this.Ih.createElement(a)};w.createTextNode=function(a){return this.Ih.createTextNode(String(a))};w.appendChild=function(a,b){a.appendChild(b)};w.Km=function(a){return Rf&&a.children!=h?a.children:fc(a.childNodes,function(a){return 1==a.nodeType})};function Vf(a,b){ud.call(this);this.wg=a;var c=qa(this.wg)&&1==this.wg.nodeType?this.wg:this.wg?this.wg.body:l,d;if(d=!!c){a:{d=9==c.nodeType?c:c.ownerDocument||c.document;if(d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(c,l))){d=d.direction||d.getPropertyValue("direction")||"";break a}d=""}d="rtl"==(d||(c.currentStyle?c.currentStyle.direction:l)||c.style&&c.style.direction)}this.ip=d;this.Tm=V(this.wg,Gb?"DOMMouseScroll":"mousewheel",this,b)}Da(Vf,je);var Wf="mousewheel";
Vf.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Se;if("mousewheel"==a.type){c=1;if(Fb||Hb&&(Ab||Tb("532.0")))c=40;d=Xf(-a.wheelDelta,c);A(a.wheelDeltaX)?(b=Xf(-a.wheelDeltaX,c),c=Xf(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),A(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;"number"==typeof this.Wm&&(b=Math.min(Math.max(b,-this.Wm),this.Wm));"number"==typeof this.Xm&&(c=Math.min(Math.max(c,-this.Xm),this.Xm));this.ip&&(b=-b);b=new Yf(d,a,b,c);this.dispatchEvent(b)};
function Xf(a,b){return Hb&&(zb||Kb)&&0!=a%b?a:a/b}Vf.prototype.pe=function(){Vf.Gg.pe.call(this);W(this.Tm);this.Tm=l};function Yf(a,b,c,d){b&&this.Od(b,h);this.type=Wf;this.detail=a;this.mq=c;this.Pe=d}Da(Yf,Kd);function Zf(){this.vk=this.Of=0;this.$=new O;this.Vc=new N;this.Vc.m(1,0,0);this.u=0;this.r=-0.03;this.La=0;this.o=7.616;this.n=45.9088;this.f=17E3;this.uc=this.tc=this.gk=this.ce=this.de=0;this.Fo=p;this.fk=this.hk=0;this.wf=this.ck=this.od=this.wh=this.vh=this.cb=1;this.ik=this.jk=this.Da=this.Ea=0;this.$j=p;this.Bo=0.001;this.Ho=-0.4;this.Ob=p;this.ga=this.fa=this.bk=0;this.uh=p;this.wc=new N;this.Df=this.Cf=0;this.$d=this.Nb=p;this.s=Array(3);this.Wb=new T(0,0,0);this.Ec=new O;this.we=new O;this.yd=
new O;this.Sb=new O;this.$=new O;this.zb=new O;this.ve=new O;this.Sb.lf();this.Ka=100;this.oa=l;this.wd=this.vd=this.Cc=this.Bc=this.Ac=this.ud=this.td=0;this.dh=ga("$d");this.jd=function(){this.c.ph(this.$)};this.kd=s();this.ld=function(a){a.ad=0;this.Wb.m(this.o,this.n,this.f);this.Wb.V(this.s);this.Vc.m(this.s[0],this.s[1],this.s[2]);this.we.md(this.s[0],this.s[1],this.s[2]);this.yd.Rd(this.o,this.n);this.Ec.Ug(this.u,this.r,this.La);this.zb.W(this.we,this.yd);this.ve.W(this.zb,this.Ec);this.zb.W(this.ve,
this.Sb);this.$.kg(this.zb);a.Ni=this.u;a.Ca(this.s[0],this.s[1],this.s[2]);Zc(a,this.o,this.n,this.f);this.oa&&(this.oa.fc=this.o,this.oa.ec=this.n,this.oa.cc=this.f,this.oa.pitch=57.29577951308232*this.r,this.oa.Ua=57.29577951308232*this.u,this.oa.kc=57.29577951308232*this.La)};this.Ee=s();this.De=s();this.mg=function(){W(this.td);W(this.ud);W(this.Ac);W(this.Bc);W(this.Cc);W(this.vd);W(this.wd)};this.He=function(a){this.td=V(window,Hd,this.Fe,p,this);this.ud=V(window,Id,this.Ge,p,this);this.Ac=
V(a,Ed,this.Td,p,this);this.Cc=V(a,Fd,this.Vd,p,this);this.Bc=V(a,Gd,this.Ud,p,this);a=new Vf(a);this.wd=V(a,Wf,this.pf,p,this)};this.pf=function(a){0<a.Pe?0<this.Da?this.Ea=this.Da=0:this.Ea+=0.05:0<this.Ea?this.Da=this.Ea=0:this.Da+=0.05};this.Fe=function(a){81==a.keyCode?this.uc=this.cb*this.wf:65==a.keyCode?this.uc=-this.cb*this.wf:83==a.keyCode?this.tc=0.5*this.od:88==a.keyCode&&(this.tc=-0.5*this.od);this.Of=a.keyCode};this.Ge=function(a){81==a.keyCode?this.uc=0:65==a.keyCode?this.uc=0:83==
a.keyCode?this.tc=0:88==a.keyCode&&(this.tc=0);this.Of=0};this.Td=function(a){Pd(a,Ld)&&(this.xf=0,this.wc.m(0,0,0),this.Cf=a.offsetX,this.Df=a.offsetY,this.uh=this.Nb=k);this.fa=a.offsetX;this.ga=a.offsetY;if(Pd(a,Md))return p};this.Vd=function(a){Pd(a,Ld)&&(this.Nb=this.uh=p);this.fa=a.offsetX;this.ga=a.offsetY;this.de=this.ce=this.xf=0;if(Pd(a,Md))return p};this.Ud=function(a){this.fa=a.offsetX;this.ga=a.offsetY;if(this.Nb){var b=(this.Cf-a.offsetX)/this.c.width,c=(this.Df-a.offsetY)/this.c.height,
b=b*b,c=c*c;this.xf=Math.sqrt(b+c);this.wc.m(a.offsetX-this.Cf,this.c.height-1-a.offsetY-(this.c.height-1-this.Df),0);this.wc.Qc();a=this.wc.a[0];var d=this.wc.a[1],e=0,f=0;0<a?e=1:0>a&&(e=-1);0<d?f=1:0>d&&(f=-1);this.ce=this.cb*this.vh*c*f;this.de=this.wh*b*e}};this.Ie=function(a){var b=this.tc*a/500,c=this.de*a/500,d=this.uc*a,e=0,e=0,f=this.f/5E5*(this.f/5E5);10<f?f=10:0.001>f&&(f=0.001);var g=f*this.ce*a/250;if(0<this.Ea){var j=0.5*this.od*a/1E3;this.r+=j;this.Ea-=j;0>this.Ea&&(this.r+=this.Ea,
this.Ea=0);this.Ob=k}0<this.Da&&(j=0.5*this.od*a/1E3,this.r-=j,this.Da-=j,0>this.Da&&(this.r-=this.Da,this.Da=0),this.Ob=k);b&&(this.r+=b,this.Ob=k);c&&(this.u+=c,this.u>2*Math.PI&&(this.u-=2*Math.PI),0>this.u&&(this.u=2*Math.PI-this.u),this.Ob=k);this.Ob&&(e=this.c.Tg(),isNaN(e)&&(e=this.Ka));d&&(a=1E3*d*f,this.f+=a,e+=a,7E6<this.f&&(this.f=7E6));if(g){a=0.017453292519943295*this.n;d=Math.sin(a);f=Math.cos(a);c=this.u;b=0.017453292519943295*this.o;d=Jc/Math.sqrt(1-Kc*d*d);f=Jc/(d/(1+Lc*f*f))*g*Math.cos(c);
j=Jc/d*g*Math.sin(c)/Math.cos(a);g=Jc/d*g*Math.sin(c)*Math.tan(a)+c;this.o=57.29577951308232*(j+b);this.n=57.29577951308232*(f+a);for(this.u=g;180<this.o;)this.o-=360;for(;-180>this.o;)this.o+=360;for(;90<this.n;)this.n=180-this.n;for(;-90>this.n;)this.n=-180-this.n;this.Ob=k}e<this.Ka&&this.Ob&&(this.f+=this.Ka-e);this.oa&&(this.oa.fc=this.o,this.oa.ec=this.n,this.oa.cc=this.f,this.oa.pitch=57.29577951308232*this.r,this.oa.Ua=57.29577951308232*this.u,this.oa.kc=57.29577951308232*this.La)}}
Zf.prototype=new he;w=Zf.prototype;w.Ca=function(a,b,c){this.o=a;this.n=b;this.f=c};w.of=function(){return{longitude:this.o,latitude:this.n,elevation:this.f}};w.Db=function(a,b,c){this.u=a;this.r=b;this.La=c};w.nh=s();w.ah=function(){return{Ua:this.u,pitch:this.r,kc:this.La}};function $f(){this.vk=this.Of=0;this.$=new O;this.$d=this.tb=p;this.Vc=new N;this.Vc.m(1,0,0);this.u=0;this.r=-1.5707963267948966;this.La=0;this.o=7.77442050946391;this.n=47.472720418012834;this.f=75E5;this.ub=ag;this.zf=this.yf=this.g=0;this.Go=k;this.fk=this.hk=this.uc=this.tc=this.gk=this.ce=this.de=this.Af=this.Bf=0;this.wf=this.ck=this.od=this.wh=this.vh=this.cb=1;this.ik=this.jk=this.Da=this.Ea=0;this.$j=p;this.bk=0;this.Ko=new O;this.ek=this.dk=this.ga=this.fa=0;this.wc=new N;this.vf=this.ae=
this.Nb=p;this.Io=this.Jo=this.xf=0;this.s=Array(3);this.Wb=new T(0,0,0);this.Ec=new O;this.we=new O;this.yd=new O;this.Sb=new O;this.$=new O;this.zb=new O;this.ve=new O;this.Sb.lf();this.be=p;this.Ah=this.zh=this.yh=0;this.xh=1;this.sc=p;this.Co=this.Do=this.Eo=0;this.ka={};this.ja={};this.uf=new O;this.th=new O;this.Zd=new O;this.Lo=new O;this.Mo=new O;this.Ka=50;this.xe=1E7;this.Ba=Tc;this.ua=0;this.sd=p;this.Ya=[0,0];this.eb=0;this.ee=this.Ma=p;this.wd=this.vd=this.Cc=this.Bc=this.Ac=this.ud=
this.td=this.Po=0;this.dh=function(a){a||(this.tb=p);this.$d=a};this.jd=function(){this.c.ph(this.$)};this.kd=s();this.ld=function(a){1==Mc?(this.Hb=1,this.Fb=1E4):(this.Hb=1E-5,this.Fb=10);this.Ba=a.Ba;this.ua=a.ua;a.sd=this.sd;a.Ya[0]=this.Ya[0];a.Ya[1]=this.Ya[1];a.ad=1;this.tb=this.$d?k:0!=a.Yk?k:p;this.ub==bg&&(!this.tb&&!this.c.wa.dc)&&(this.ae&&(this.ae=p,this.mk(this.fa,this.ga)),this.Nb&&this.vf&&(this.vf=p,this.lk(this.fa,this.ga)));this.Wb.m(this.o,this.n,this.f);this.Wb.V(this.s);this.Vc.m(this.s[0],
this.s[1],this.s[2]);this.we.md(this.s[0],this.s[1],this.s[2]);this.yd.Rd(this.o,this.n);this.be?(this.Ec.ig(this.yh,this.zh,this.Ah,this.xh),this.Sb.Bj()):this.Ec.Ug(this.u,this.r,this.La);this.zb.W(this.yd,this.Ec);this.$.W(this.zb,this.Sb);this.$.Me();this.ql=new N(this.s[0],this.s[1],this.s[2]);var b=this.$.Qa(this.ql);this.$.a[12]=-b.a[0];this.$.a[13]=-b.a[1];this.$.a[14]=-b.a[2];a.Ni=this.u;a.Ca(this.s[0],this.s[1],this.s[2]);Zc(a,this.o,this.n,this.f)};this.Ee=s();this.De=s();this.mg=function(){W(this.td);
W(this.ud);W(this.Ac);W(this.Bc);W(this.Cc);W(this.vd);W(this.wd)};this.He=function(a){this.td=V(window,Hd,this.Fe,p,this);this.ud=V(window,Id,this.Ge,p,this);this.Ac=V(a,Ed,this.Td,p,this);this.Bc=V(a,Gd,this.Ud,p,this);this.Cc=V(a,Fd,this.Vd,p,this);this.vd=V(a,Dd,this.fh,p,this);a=new Vf(a);this.wd=V(a,Wf,this.pf,p,this)};this.nd=function(){var a=ag;(this.g&cg)==dg&&(0==(this.g&eg)?a=bg:(this.g&eg)==fg?a=gg:(this.g&eg)==hg&&(a=ig));(this.g&cg)==jg&&(a=ig);a!=this.ub&&(this.ub==ig&&(this.u=this.Bf+
45*Math.PI*this.cb*(this.fa-this.yf)/(180*this.c.height),this.r=this.Af+45*Math.PI*this.cb*(this.zf-this.ga)/(180*this.c.height)),this.ub=a,this.ub==ig&&(this.yf=this.fa,this.zf=this.ga,this.Bf=this.u,this.Af=this.r));this.ub==ig&&(this.u=this.Bf+45*Math.PI*this.cb*(this.fa-this.yf)/(180*this.c.height),this.r=this.Af+45*Math.PI*this.cb*(this.zf-this.ga)/(180*this.c.height))};this.pf=function(a){if(this.tb||this.c.wa.dc)this.eb=0;else{if(this.ub==ag)if(0==(this.g&eg))if(4E5<this.f)this.f=0<a.Pe?this.f+
0.2*this.f:this.f-0.2*this.f,5E5<this.f&&(this.r=-Math.PI/2),this.Ma=k;else{var b={},c,d;0<this.eb?(c=this.Ya[0],d=this.Ya[1]):(c=this.fa,d=this.ga);this.c.Wd(c,d,b);if(b.hit){this.Ya=[c,d];this.eb=500;this.Wb.m(this.o,this.n,this.f);this.Wb.V(this.s);c=this.s[0]-b.x;d=this.s[1]-b.y;b=this.s[2]-b.z;0<a.Pe?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,b*=-0.2);var e=new T(0,0,0);e.pc(this.s[0]+c,this.s[1]+d,this.s[2]+b);this.o=e.H[0];this.n=e.H[1];this.ee?e.H[2]>this.f&&(this.f=e.H[2]):this.f=e.H[2];this.Ma=
k;this.f<this.Ka?(this.f=this.Ka,this.Ma=k):this.f>this.xe&&(this.f=this.xe,this.Ma=k)}}else(this.g&eg)==fg&&(this.r+=5*a.Pe*Math.PI*this.cb/180);return this.Y(a)}};this.Fe=function(a){if(!this.tb&&!this.c.wa.dc){66==a.keyCode&&(this.be=p);if(16==a.keyCode)return this.g|=fg,this.Y(a);if(17==a.keyCode)return this.g|=hg,this.Y(a);if(37==a.keyCode||65==a.keyCode)return this.g|=kg,this.Y(a);if(38==a.keyCode||87==a.keyCode)return this.g|=lg,this.Y(a);if(39==a.keyCode||68==a.keyCode)return this.g|=mg,this.Y(a);
if(40==a.keyCode||83==a.keyCode)return this.g|=ng,this.Y(a);this.nd();return k}};this.Ge=function(a){if(16==a.keyCode)return this.g&=~fg,this.Y(a);if(17==a.keyCode)return this.g&=~hg,this.Y(a);if(37==a.keyCode||65==a.keyCode)return this.g&=~kg,this.Y(a);if(38==a.keyCode||87==a.keyCode)return this.g&=~lg,this.Y(a);if(39==a.keyCode||68==a.keyCode)return this.g&=~mg,this.Y(a);if(40==a.keyCode||83==a.keyCode)return this.g&=~ng,this.Y(a);this.nd();return k};this.fh=function(a){if(!this.tb&&!this.c.wa.dc){var b=
{};this.c.Wd(this.fa,this.ga,b);if(b.hit){this.c.mh(2E3);var c=this.f;1E6<c?ye(this.c.wa,b.lng,b.lat,1E6,h,h,h):25E4<c?ye(this.c.wa,b.lng,b.lat,25E4,h,h,h):5E4<c?ye(this.c.wa,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,ye(this.c.wa,b.lng,b.lat,c,0,-90,0));this.Ya=[this.fa,this.ga];this.eb=2500}return this.Y(a)}};this.Td=function(a){if(this.c&&this.c.I&&!this.tb&&!this.c.wa.dc){this.fa=a.offsetX-this.c.I.offsetLeft;this.ga=a.offsetY-this.c.I.offsetTop;if(Pd(a,Ld))this.g|=dg,document.body.style.cursor="move",
this.ae=k;else{if(Pd(a,Md))return p;Pd(a,Nd)&&(this.g|=jg)}this.nd();return this.Y(a)}};this.Vd=function(a){if(this.c&&this.c.I){this.Nb=k;this.fa=a.offsetX-this.c.I.offsetLeft;this.ga=a.offsetY-this.c.I.offsetTop;if(Pd(a,Ld))this.g&=~dg,this.sc=p,document.body.style.cursor="default",this.ae=p;else{if(Pd(a,Md))return p;Pd(a,Nd)&&(this.g&=~jg)}this.nd();return this.Y(a)}};this.Ud=function(a){if(this.c&&this.c.I&&!this.tb&&!this.c.wa.dc)return this.Nb=this.ub==bg,this.vf=k,this.dk=a.offsetX-this.c.I.offsetLeft-
this.fa,this.ek=a.offsetY-this.c.I.offsetTop-this.ga,this.fa=a.offsetX-this.c.I.offsetLeft,this.ga=a.offsetY-this.c.I.offsetTop,this.nd(),this.Y(a)};this.Ie=function(a){if(this.Ba==Uc){var b=this.ua*this.f/5E3;this.ee||(this.f-=a*b);this.f<this.Ka&&(this.f=this.Ka);this.Ma=k}else this.Ba==Vc?(b=this.ua*this.f/5E3,this.f+=a*b,this.f>this.xe&&(this.f=this.xe),this.Ma=k):this.Ba==Xc?this.u=this.ua:this.Ba==Yc&&(b=Math.sin(this.ua),this.r+=a/5E3*-Math.cos(this.ua),this.u+=a/5E3*b,this.r<-Math.PI/2?this.r=
-Math.PI/2:0<this.r&&(this.r=0));0<this.eb&&(this.sd=k,this.eb-=a,0>=this.eb&&(this.eb=0,this.sd=p));if((this.g&og||this.Ba==Wc)&&0==(this.g&eg)){b=0;this.g&lg&&(b+=1);this.g&ng&&(b-=1);var c=0;this.g&kg&&(c-=1);this.g&mg&&(c+=1);var d;d=this.Ba==Wc?Math.PI*this.ua/180:Math.atan2(c,b);b=this.f/5E5;10<b?b=10:0.001>b&&(b=0.001);a=b*a/5E4;var b=Math.PI*this.n/180,e=Math.sin(b),c=Math.cos(b),f=this.u+d;d=Math.PI*this.o/180;var g=Jc/Math.sqrt(1-Kc*e*e),e=Jc/g*a*Math.sin(f)/Math.cos(b);a=Jc/(g/(1+Lc*c*
c))*a*Math.cos(f)+b;this.o=180*(e+d)/Math.PI;this.n=180*a/Math.PI}for(;180<this.o;)this.o-=180;for(;-180>this.o;)this.o+=180;for(;90<this.n;)this.n-=180;for(;-90>this.n;)this.n+=180;this.Ma&&(this.Ma=p,a=this.c.jg(this.o,this.n),a.hasvalue?(this.f-this.Ka<a.elevation&&(this.f=a.elevation+this.Ka,this.Ma=k),this.ee=p):5E3>this.f&&(this.Ma=this.ee=k))};this.Db=function(a,b,c){this.be=p;this.Sb.lf();this.u=a;this.r=b;this.La=c};this.nh=function(a,b,c,d){this.be=k;this.yh=a;this.zh=b;this.Ah=c;this.xh=
d;var e=a;a=b;b=e;e=a*b+c*d;if(0.499<e)this.u=2*Math.atan2(a,d),this.r=Math.PI/2,this.La=0;else if(-0.499>e)this.u=-2*Math.atan2(a,d),this.r=-Math.PI/2,this.La=0;else{var f=c*c;this.u=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.r=Math.asin(2*e);this.La=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.No=function(a,b,c){a.a[0]=b.a[0]*c.a[0]+b.a[1]*c.a[4]+b.a[2]*c.a[8];a.a[1]=b.a[0]*c.a[1]+b.a[1]*c.a[5]+b.a[2]*c.a[9];a.a[2]=b.a[0]*c.a[2]+b.a[1]*c.a[6]+b.a[2]*c.a[10];a.a[4]=b.a[4]*c.a[0]+b.a[5]*c.a[4]+b.a[6]*
c.a[8];a.a[5]=b.a[4]*c.a[1]+b.a[5]*c.a[5]+b.a[6]*c.a[9];a.a[6]=b.a[4]*c.a[2]+b.a[5]*c.a[6]+b.a[6]*c.a[10];a.a[8]=b.a[8]*c.a[0]+b.a[9]*c.a[4]+b.a[10]*c.a[8];a.a[9]=b.a[8]*c.a[1]+b.a[9]*c.a[5]+b.a[10]*c.a[9];a.a[10]=b.a[8]*c.a[2]+b.a[9]*c.a[6]+b.a[10]*c.a[10]};this.mk=function(a,b){this.uf.da(this.Zd);var c={};this.c.ng(a,b,c,k);c.hit?(this.ka.x=c.x,this.ka.y=c.y,this.ka.p=c.z,this.sc=k):this.sc=p};this.lk=function(a,b){if(this.sc){var c={};this.c.ng(a,b,c,p);if(c.hit)if(this.ja.x=c.x,this.ja.y=c.y,
this.ja.p=c.z,this.sc=k,this.ja.x==this.ka.x&&this.ja.y==this.ka.y&&this.ja.p==this.ka.p)this.Zd.da(this.uf);else{var d=this.ka.x*this.ja.x+this.ka.y*this.ja.y+this.ka.p*this.ja.p,c=Math.sqrt(0.5*(1-d)),d=Math.sqrt(0.5*(1+d)),e,f,g;e=this.ka.y*this.ja.p-this.ka.p*this.ja.y;f=this.ja.x*this.ka.p-this.ka.x*this.ja.p;g=this.ka.x*this.ja.y-this.ka.y*this.ja.x;c/=Math.sqrt(e*e+f*f+g*g);this.th.ig(e*c,f*c,g*c,d);this.Zd.W(this.uf,this.th);c=[];(new T(this.o,this.n,this.f)).V(c);c=new N(c[0],c[1],c[2]);
c=this.Zd.Qa(c);d=new T(0,0,0);d.pc(c.a[0],c.a[1],c.a[2]);this.o=d.H[0];this.n=d.H[1];this.Ma=k}else this.sc=p}};this.Y=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=k;a.cancel=k;return a.returnValue=p};this.jm=ga("Ka")}Da($f,Zf);var dg=1,jg=4,cg=7,kg=16,lg=32,mg=64,ng=128,og=240,fg=256,hg=512,eg=768,ag=0,bg=1,ig=2,gg=3;function pg(){this.$c=new O;this.Hb=1E-5;this.Fb=10;this.qe=45;this.Vp=ha("qe");this.jd=function(){this.c.om(this.$c)};this.kd=s();this.ld=function(a){this.$c.am(this.qe,this.c.width/this.c.height,this.Hb,this.Fb);a.lg[a.lg.length-1].da(this.$c)};this.Ee=s();this.De=s();this.He=s()}pg.prototype=new he;function qg(a){this.vk=this.Of=0;this.$=new O;this.$d=this.tb=p;this.Vc=new N;this.Vc.m(1,0,0);this.u=0;this.r=-1.5707963267948966;this.La=0;this.o=7.77442050946391;this.n=47.472720418012834;this.f=75E5;this.ub=rg;this.zf=this.yf=this.g=0;this.Go=k;this.fk=this.hk=this.uc=this.tc=this.gk=this.ce=this.de=this.Af=this.Bf=0;this.wf=this.ck=this.od=this.wh=this.vh=this.cb=1;this.ik=this.jk=this.Da=this.Ea=0;this.$j=p;this.bk=0;this.Ko=new O;this.ek=this.dk=this.ga=this.fa=0;this.wc=new N;this.vf=this.ae=
this.Nb=p;this.Io=this.Jo=this.xf=0;this.s=Array(3);this.Wb=new T(0,0,0);this.Ec=new O;this.we=new O;this.yd=new O;this.Sb=new O;this.$=new O;this.zb=new O;this.ve=new O;this.Sb.lf();this.be=p;this.Ah=this.zh=this.yh=0;this.xh=1;this.sc=p;this.Co=this.Do=this.Eo=0;this.ka={};this.ja={};this.uf=new O;this.th=new O;this.Zd=new O;this.Lo=new O;this.Mo=new O;this.Ka=50;this.xe=1E7;this.Ba=Tc;this.ua=0;this.sd=p;this.Ya=[0,0];this.eb=0;this.ee=this.Ma=p;this.Po=0;this.qe=this.Fb=this.Hb=-1;A(a)&&(A(a.Near)&&
(this.Hb=a.Near),A(a.Far)&&(this.Fb=a.Far),A(a.Fov)&&(this.qe=a.Fov));this.wd=this.vd=this.Cc=this.Bc=this.Ac=this.ud=this.td=0;this.Hb=1E-7;this.Fb=1.2;this.dh=function(a){a||(this.tb=p);this.$d=a};this.jd=function(){this.c.ph(this.$)};this.kd=s();this.ld=function(a){1==Mc?(this.Hb=1,this.Fb=1E4):3E3>this.f?(this.Hb=1E-7,this.Fb=1):(this.Hb=1E-5,this.Fb=10);0<=this.qe&&(this.c.e.gc.qe=this.qe);0<=this.Hb&&(this.c.e.gc.Hb=this.Hb);0<=this.Fb&&(this.c.e.gc.Fb=this.Fb);this.Ba=a.Ba;this.ua=a.ua;a.sd=
this.sd;a.Ya[0]=this.Ya[0];a.Ya[1]=this.Ya[1];a.ad=1;this.tb=this.$d?k:0!=a.Yk?k:p;this.ub==sg&&(!this.tb&&!this.c.wa.dc)&&(this.ae&&(this.ae=p,this.mk(this.fa,this.ga)),this.Nb&&this.vf&&(this.vf=p,this.lk(this.fa,this.ga)));this.Wb.m(this.o,this.n,this.f);this.Wb.V(this.s);this.Vc.m(this.s[0],this.s[1],this.s[2]);this.we.md(this.s[0],this.s[1],this.s[2]);this.yd.Rd(this.o,this.n);this.be?(this.Ec.ig(this.yh,this.zh,this.Ah,this.xh),this.Sb.Bj()):this.Ec.Ug(this.u,this.r,this.La);this.zb.da(this.yd);
this.ve.W(this.zb,this.Ec);this.zb.W(this.ve,this.Sb);this.$.da(this.zb);this.$.Me();this.ql=new N(this.s[0],this.s[1],this.s[2]);var c=this.$.Qa(this.ql);this.$.a[12]=-c.a[0];this.$.a[13]=-c.a[1];this.$.a[14]=-c.a[2];a.Ni=this.u;a.Ca(this.s[0],this.s[1],this.s[2]);Zc(a,this.o,this.n,this.f)};this.Ee=s();this.De=s();this.mg=function(){W(this.td);W(this.ud);W(this.Ac);W(this.Bc);W(this.Cc);W(this.vd);W(this.wd)};this.He=function(a){this.td=V(window,Hd,this.Fe,p,this);this.ud=V(window,Id,this.Ge,p,
this);this.Ac=V(a,Ed,this.Td,p,this);this.Bc=V(a,Gd,this.Ud,p,this);this.Cc=V(a,Fd,this.Vd,p,this);this.vd=V(a,Dd,this.fh,p,this);a=new Vf(a);this.wd=V(a,Wf,this.pf,p,this)};this.nd=function(){var a=rg;(this.g&tg)==ug&&(0==(this.g&vg)?a=sg:(this.g&vg)==wg?a=xg:(this.g&vg)==yg&&(a=zg));(this.g&tg)==Ag&&(a=zg);a!=this.ub&&(this.ub==zg&&(this.u=this.Bf+45*Math.PI*this.cb*(this.fa-this.yf)/(180*this.c.height),this.r=this.Af+45*Math.PI*this.cb*(this.zf-this.ga)/(180*this.c.height)),this.ub=a,this.ub==
zg&&(this.yf=this.fa,this.zf=this.ga,this.Bf=this.u,this.Af=this.r));this.ub==zg&&(this.u=this.Bf+45*Math.PI*this.cb*(this.fa-this.yf)/(180*this.c.height),this.r=this.Af+45*Math.PI*this.cb*(this.zf-this.ga)/(180*this.c.height))};this.pf=function(a){if(this.tb||this.c.wa.dc)this.eb=0;else{if(this.ub==rg)if(0==(this.g&vg)){var c={},d,e;0<this.eb?(d=this.Ya[0],e=this.Ya[1]):(d=this.fa,e=this.ga);this.c.Wd(d,e,c);if(c.hit){this.Ya=[d,e];this.eb=500;this.Wb.m(this.o,this.n,this.f);this.Wb.V(this.s);d=
this.s[0]-c.x;e=this.s[1]-c.y;c=this.s[2]-c.z;0<a.Pe?(d*=0.2,e*=0.2,c*=0.2):(d*=-0.2,e*=-0.2,c*=-0.2);var f=new T(0,0,0);f.pc(this.s[0]+d,this.s[1]+e,this.s[2]+c);this.o=f.H[0];this.n=f.H[1];this.ee?f.H[2]>this.f&&(this.f=f.H[2]):this.f=f.H[2];this.Ma=k;this.f<this.Ka?(this.f=this.Ka,this.Ma=k):this.f>this.xe&&(this.f=this.xe,this.Ma=k)}}else(this.g&vg)==wg&&(this.r+=5*a.Pe*Math.PI*this.cb/180);return this.Y(a)}};this.Fe=function(a){if(!this.tb&&!this.c.wa.dc){66==a.keyCode&&(this.be=p);if(16==a.keyCode)return this.g|=
wg,this.Y(a);if(17==a.keyCode)return this.g|=yg,this.Y(a);if(37==a.keyCode||65==a.keyCode)return this.g|=Bg,this.Y(a);if(38==a.keyCode||87==a.keyCode)return this.g|=Cg,this.Y(a);if(39==a.keyCode||68==a.keyCode)return this.g|=Dg,this.Y(a);if(40==a.keyCode||83==a.keyCode)return this.g|=Eg,this.Y(a);this.nd();return k}};this.Ge=function(a){if(16==a.keyCode)return this.g&=~wg,this.Y(a);if(17==a.keyCode)return this.g&=~yg,this.Y(a);if(37==a.keyCode||65==a.keyCode)return this.g&=~Bg,this.Y(a);if(38==a.keyCode||
87==a.keyCode)return this.g&=~Cg,this.Y(a);if(39==a.keyCode||68==a.keyCode)return this.g&=~Dg,this.Y(a);if(40==a.keyCode||83==a.keyCode)return this.g&=~Eg,this.Y(a);this.nd();return k};this.fh=function(a){if(!this.tb&&!this.c.wa.dc){var c={};this.c.Wd(this.fa,this.ga,c);if(c.hit){this.c.mh(2E3);var d=this.f;1E6<d?ye(this.c.wa,c.lng,c.lat,1E6,h,h,h):25E4<d?ye(this.c.wa,c.lng,c.lat,25E4,h,h,h):5E4<d?ye(this.c.wa,c.lng,c.lat,5E4,h,h,h):(d=c.elv+5E3,ye(this.c.wa,c.lng,c.lat,d,0,-90,0));this.Ya=[this.fa,
this.ga];this.eb=2500}return this.Y(a)}};this.Td=function(a){if(this.c&&this.c.I&&!this.tb&&!this.c.wa.dc){this.fa=a.offsetX-this.c.I.offsetLeft;this.ga=a.offsetY-this.c.I.offsetTop;if(Pd(a,Ld))this.g|=ug,document.body.style.cursor="move",this.ae=k;else{if(Pd(a,Md))return p;Pd(a,Nd)&&(this.g|=Ag)}this.nd();return this.Y(a)}};this.Vd=function(a){if(this.c&&this.c.I){this.Nb=k;this.fa=a.offsetX-this.c.I.offsetLeft;this.ga=a.offsetY-this.c.I.offsetTop;if(Pd(a,Ld))this.g&=~ug,this.sc=p,document.body.style.cursor=
"default",this.ae=p;else{if(Pd(a,Md))return p;Pd(a,Nd)&&(this.g&=~Ag)}this.nd();return this.Y(a)}};this.Ud=function(a){if(this.c&&this.c.I&&!this.tb&&!this.c.wa.dc)return this.Nb=this.ub==sg,this.vf=k,this.dk=a.offsetX-this.c.I.offsetLeft-this.fa,this.ek=a.offsetY-this.c.I.offsetTop-this.ga,this.fa=a.offsetX-this.c.I.offsetLeft,this.ga=a.offsetY-this.c.I.offsetTop,this.nd(),this.Y(a)};this.Ie=function(a){if(this.Ba==Uc){var c=this.ua*this.f/5E3;this.ee||(this.f-=a*c);this.f<this.Ka&&(this.f=this.Ka);
this.Ma=k}else this.Ba==Vc?(c=this.ua*this.f/5E3,this.f+=a*c,this.f>this.xe&&(this.f=this.xe),this.Ma=k):this.Ba==Xc?this.u=this.ua:this.Ba==Yc&&(c=Math.sin(this.ua),this.r+=a/5E3*-Math.cos(this.ua),this.u+=a/5E3*c,this.r<-Math.PI/2?this.r=-Math.PI/2:0<this.r&&(this.r=0));0<this.eb&&(this.sd=k,this.eb-=a,0>=this.eb&&(this.eb=0,this.sd=p));if((this.g&Fg||this.Ba==Wc)&&0==(this.g&vg)){c=0;this.g&Cg&&(c+=1);this.g&Eg&&(c-=1);var d=0;this.g&Bg&&(d-=1);this.g&Dg&&(d+=1);var e;e=this.Ba==Wc?Math.PI*this.ua/
180:Math.atan2(d,c);c=this.f/5E5;10<c?c=10:0.001>c&&(c=0.001);a=c*a/5E4;var c=Math.PI*this.n/180,f=Math.sin(c),d=Math.cos(c),g=this.u+e;e=Math.PI*this.o/180;var j=Jc/Math.sqrt(1-Kc*f*f),f=Jc/j*a*Math.sin(g)/Math.cos(c);a=0.05*Jc/(j/(1+Lc*d*d))*a*Math.cos(g)+c;this.o=180*(0.05*f+e)/Math.PI;this.n=180*a/Math.PI}for(;180<this.o;)this.o-=180;for(;-180>this.o;)this.o+=180;for(;90<this.n;)this.n-=180;for(;-90>this.n;)this.n+=180;this.Ma&&(this.Ma=p,a=this.c.jg(this.o,this.n),a.hasvalue?(this.f-this.Ka<
a.elevation&&(this.f=a.elevation+this.Ka,this.Ma=k),this.ee=p):5E3>this.f&&(this.Ma=this.ee=k))};this.Db=function(a,c,d){this.be=p;this.Sb.lf();this.u=a;this.r=c;this.La=d};this.nh=function(a,c,d,e){this.be=k;this.yh=a;this.zh=c;this.Ah=d;this.xh=e;var f=a;a=c;c=f;f=a*c+d*e;if(0.499<f)this.u=2*Math.atan2(a,e),this.r=Math.PI/2,this.La=0;else if(-0.499>f)this.u=-2*Math.atan2(a,e),this.r=-Math.PI/2,this.La=0;else{var g=d*d;this.u=Math.atan2(2*c*e-2*a*d,1-2*c*c-2*g);this.r=Math.asin(2*f);this.La=Math.atan2(2*
a*e-2*c*d,1-2*a*a-2*g)}};this.No=function(a,c,d){a.a[0]=c.a[0]*d.a[0]+c.a[1]*d.a[4]+c.a[2]*d.a[8];a.a[1]=c.a[0]*d.a[1]+c.a[1]*d.a[5]+c.a[2]*d.a[9];a.a[2]=c.a[0]*d.a[2]+c.a[1]*d.a[6]+c.a[2]*d.a[10];a.a[4]=c.a[4]*d.a[0]+c.a[5]*d.a[4]+c.a[6]*d.a[8];a.a[5]=c.a[4]*d.a[1]+c.a[5]*d.a[5]+c.a[6]*d.a[9];a.a[6]=c.a[4]*d.a[2]+c.a[5]*d.a[6]+c.a[6]*d.a[10];a.a[8]=c.a[8]*d.a[0]+c.a[9]*d.a[4]+c.a[10]*d.a[8];a.a[9]=c.a[8]*d.a[1]+c.a[9]*d.a[5]+c.a[10]*d.a[9];a.a[10]=c.a[8]*d.a[2]+c.a[9]*d.a[6]+c.a[10]*d.a[10]};this.mk=
function(a,c){this.uf.da(this.Zd);var d={};this.c.ng(a,c,d,k);d.hit?(this.ka.x=d.x,this.ka.y=d.y,this.ka.p=d.z,this.sc=k):this.sc=p};this.lk=function(a,c){if(this.sc){var d={};this.c.ng(a,c,d,p);if(d.hit)if(this.ja.x=d.x,this.ja.y=d.y,this.ja.p=d.z,this.sc=k,this.ja.x==this.ka.x&&this.ja.y==this.ka.y&&this.ja.p==this.ka.p)this.Zd.da(this.uf);else{var e=this.ka.x*this.ja.x+this.ka.y*this.ja.y+this.ka.p*this.ja.p,d=Math.sqrt(0.5*(1-e)),e=Math.sqrt(0.5*(1+e)),f,g,j;f=this.ka.y*this.ja.p-this.ka.p*this.ja.y;
g=this.ja.x*this.ka.p-this.ka.x*this.ja.p;j=this.ka.x*this.ja.y-this.ka.y*this.ja.x;d/=Math.sqrt(f*f+g*g+j*j);this.th.ig(f*d,g*d,j*d,e);this.Zd.W(this.uf,this.th);d=[];(new T(this.o,this.n,this.f)).V(d);d=new N(d[0],d[1],d[2]);d=this.Zd.Qa(d);e=new T(0,0,0);e.pc(d.a[0],d.a[1],d.a[2]);this.o=e.H[0];this.n=e.H[1];this.Ma=k}else this.sc=p}};this.Y=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=k;a.cancel=k;return a.returnValue=
p};this.jm=ga("Ka")}Da(qg,Zf);var ug=1,Ag=4,tg=7,Bg=16,Cg=32,Dg=64,Eg=128,Fg=240,wg=256,yg=512,vg=768,rg=0,sg=1,zg=2,xg=3;function Gg(a){this.vk=this.Of=0;this.$=new O;this.Vc=new N;this.Vc.m(1,0,0);this.u=0;this.r=-0.03;this.La=0;this.o=7.616;this.n=45.9088;this.f=17E3;this.uc=this.tc=this.gk=this.ce=this.de=0;this.Fo=p;this.fk=this.hk=0;this.wf=this.ck=this.od=this.wh=this.vh=this.cb=1;this.ik=this.jk=this.Da=this.Ea=0;this.$j=p;this.Bo=0.001;this.Ho=-0.4;this.Ob=p;this.ga=this.fa=this.bk=0;this.uh=p;this.wc=new N;this.Df=this.Cf=0;this.$d=this.Nb=p;this.s=Array(3);this.Wb=new T(0,0,0);this.Ec=new O;this.we=new O;
this.yd=new O;this.Sb=new O;this.$=new O;this.zb=new O;this.ve=new O;this.Sb.lf();this.Ka=100;this.oa=l;this.Hb=1E-6;this.Fb=15;this.qe=45;this.wd=this.vd=this.Cc=this.Bc=this.Ac=this.ud=this.td=0;this.Ei=this.Fi=p;this.Ce=[];A(a.ElevationSteps)&&(this.Ce=a.ElevationSteps);A(a.Near)&&(this.Hb=a.Near);A(a.Far)&&(this.Fb=a.Far);A(a.Fov)&&(this.qe=a.Fov);this.Xl=0;this.Wl=7E6;this.nc=[];A(a.BoundingRect)&&(this.nc=a.BoundingRect);this.io=[];A(a.BoundingPolygon)&&(this.nc=[],this.io=a.BoundingPolygon);
this.dh=ga("$d");this.jd=function(){this.c.ph(this.$)};this.kd=s();this.ld=function(a){a.ad=0;this.Wb.m(this.o,this.n,this.f);this.Wb.V(this.s);this.Vc.m(this.s[0],this.s[1],this.s[2]);this.we.md(this.s[0],this.s[1],this.s[2]);this.yd.Rd(this.o,this.n);this.Ec.Ug(this.u,this.r,this.La);this.zb.W(this.we,this.yd);this.ve.W(this.zb,this.Ec);this.zb.W(this.ve,this.Sb);this.$.kg(this.zb);a.Ni=this.u;a.Ca(this.s[0],this.s[1],this.s[2]);Zc(a,this.o,this.n,this.f);this.oa&&(this.oa.fc=this.o,this.oa.ec=
this.n,this.oa.cc=this.f,this.oa.pitch=57.29577951308232*this.r,this.oa.Ua=57.29577951308232*this.u,this.oa.kc=57.29577951308232*this.La);this.c.e.gc.Hb=this.Hb;this.c.e.gc.Fb=this.Fb};this.Ee=s();this.De=s();this.mg=function(){W(this.td);W(this.ud);W(this.Ac);W(this.Bc);W(this.Cc);W(this.vd);W(this.wd)};this.He=function(a){this.td=V(window,Hd,this.Fe,p,this);this.ud=V(window,Id,this.Ge,p,this);this.Ac=V(a,Ed,this.Td,p,this);this.Cc=V(a,Fd,this.Vd,p,this);this.Bc=V(a,Gd,this.Ud,p,this);a=new Vf(a);
this.wd=V(a,Wf,this.pf,p,this)};this.pf=function(a){0<a.Pe?0<this.Da?this.Ea=this.Da=0:this.Ea+=0.05:0<this.Ea?this.Da=this.Ea=0:this.Da+=0.05};this.Fe=function(a){81==a.keyCode?(this.uc=this.cb*this.wf,this.Fi=k):65==a.keyCode?(this.uc=-this.cb*this.wf,this.Ei=k):83==a.keyCode?this.tc=0.5*this.od:88==a.keyCode&&(this.tc=-0.5*this.od);this.Of=a.keyCode};this.Ge=function(a){81==a.keyCode?(this.uc=0,this.Fi=p):65==a.keyCode?(this.uc=0,this.Ei=p):83==a.keyCode?this.tc=0:88==a.keyCode&&(this.tc=0);this.Of=
0};this.Td=function(a){Pd(a,Ld)&&(this.xf=0,this.wc.m(0,0,0),this.Cf=a.offsetX,this.Df=a.offsetY,this.uh=this.Nb=k);this.fa=a.offsetX;this.ga=a.offsetY;if(Pd(a,Md))return p};this.Vd=function(a){Pd(a,Ld)&&(this.Nb=this.uh=p);this.fa=a.offsetX;this.ga=a.offsetY;this.de=this.ce=this.xf=0;if(Pd(a,Md))return p};this.Ud=function(a){this.fa=a.offsetX;this.ga=a.offsetY;if(this.Nb){var c=(this.Cf-a.offsetX)/this.c.width,d=(this.Df-a.offsetY)/this.c.height,c=c*c,d=d*d;this.xf=Math.sqrt(c+d);this.wc.m(a.offsetX-
this.Cf,this.c.height-1-a.offsetY-(this.c.height-1-this.Df),0);this.wc.Qc();a=this.wc.a[0];var e=this.wc.a[1],f=0,g=0;0<a?f=1:0>a&&(f=-1);0<e?g=1:0>e&&(g=-1);this.ce=this.cb*this.vh*d*g;this.de=this.wh*c*f}};this.Ie=function(a){var c=this.tc*a/500,d=this.de*a/500,e=this.uc*a,f=0,f=0,g=this.f/5E5*(this.f/5E5);10<g?g=10:0.001>g&&(g=0.001);var j=g*this.ce*a/250;if(0<this.Ea){var m=0.5*this.od*a/1E3;this.r+=m;this.Ea-=m;0>this.Ea&&(this.r+=this.Ea,this.Ea=0);this.Ob=k}0<this.Da&&(m=0.5*this.od*a/1E3,
this.r-=m,this.Da-=m,0>this.Da&&(this.r-=this.Da,this.Da=0),this.Ob=k);c&&(this.r+=c,this.Ob=k);d&&(this.u+=d,this.u>2*Math.PI&&(this.u-=2*Math.PI),0>this.u&&(this.u=2*Math.PI-this.u),this.Ob=k);this.Ob&&(f=this.c.Tg(),isNaN(f)&&(f=this.Ka));if(e){if(0==this.Ce.length)a=1E3*e*g,this.f+=a,f+=a;else if(this.Fi){this.Fi=p;for(a=0;a<this.Ce.length;a++)if(this.Ce[a]>this.f){this.f=this.Ce[a];break}}else if(this.Ei){this.Ei=p;for(a=this.Ce.length-1;0<=a;a--)if(this.Ce[a]<this.f){this.f=this.Ce[a];break}}this.f>
this.Wl?this.f=this.Wl:this.f<this.Xl&&(this.f=this.Xl)}if(j){a=0.017453292519943295*this.n;e=Math.sin(a);g=Math.cos(a);d=this.u;c=0.017453292519943295*this.o;e=Jc/Math.sqrt(1-Kc*e*e);g=Jc/(e/(1+Lc*g*g))*j*Math.cos(d);m=Jc/e*j*Math.sin(d)/Math.cos(a);j=Jc/e*j*Math.sin(d)*Math.tan(a)+d;this.o=57.29577951308232*(m+c);this.n=57.29577951308232*(g+a);for(this.u=j;180<this.o;)this.o-=360;for(;-180>this.o;)this.o+=360;for(;90<this.n;)this.n=180-this.n;for(;-90>this.n;)this.n=-180-this.n;this.Ob=k}f<this.Ka&&
this.Ob&&(this.f+=this.Ka-f);2==this.nc.length&&(2==this.nc[0].length&&2==this.nc[1].length)&&(this.nc[0][0]>this.o&&(this.o=this.nc[0][0]),this.nc[1][0]<this.o&&(this.o=this.nc[1][0]),this.nc[0][1]>this.n&&(this.n=this.nc[0][1]),this.nc[1][1]<this.n&&(this.n=this.nc[1][1]));this.oa&&(this.oa.fc=this.o,this.oa.ec=this.n,this.oa.cc=this.f,this.oa.pitch=57.29577951308232*this.r,this.oa.Ua=57.29577951308232*this.u,this.oa.kc=57.29577951308232*this.La)}}Da(Gg,Zf);function Hg(a,b){this.c=a;this.O=new $f;this.O.c=a;ie(this.O);this.gc=new pg;this.q=new Of(b);A(b.shownavigation)||(b.shownavigation=k);b.shownavigation&&(this.hc=new ke);this.gc.c=a;ie(this.gc);this.q.c=a;ie(this.q);this.hc&&(this.hc.c=a,ie(this.hc));this.Qd=new Sc;this.Tb=new O;this.$=new O;this.jp=new O}Hg.prototype.sb=function(){this.O.jd();this.O.kd();this.gc.jd();this.gc.kd();this.q.jd();this.q.kd();this.hc&&(this.hc.jd(),this.hc.kd())};
Hg.prototype.t=function(){this.O&&(this.O.Rc(),this.O=l);this.gc&&(this.gc.Rc(),this.gc=l);this.q&&(this.q.Rc(),this.q=l);this.hc&&(this.hc.Rc(),this.hc=l)};
Hg.prototype.Wj=function(a){var b,c,d,e,f,g;A(a.type)&&("globe"==a.type?(this.O.Rc(),this.O=new $f,this.O.c=this.c):"fly"==a.type?(this.O.Rc(),this.O=new Zf,this.O.c=this.c):"constrained"==a.type?(this.O.Rc(),this.O=new Gg(a),this.O.c=this.c):"dynamic"==a.type&&(this.O.Rc(),this.O=new qg(a),this.O.c=this.c),b=this.O.o,c=this.O.n,d=this.O.f,e=this.O.u,f=this.O.r,g=this.O.La,A(a.Longitude)&&(b=a.Longitude),A(a.Latitude)&&(c=a.Latitude),A(a.Elevation)&&(d=a.Elevation),A(a.Yaw)&&(e=0.017453292519943295*
a.Yaw),A(a.Pitch)&&(f=0.017453292519943295*a.Pitch),A(a.Roll)&&(g=0.017453292519943295*a.Roll),this.O.Ca(b,c,d),this.O.Db(e,f,g),ie(this.O))};function Ig(a){this.b=a;this.Od=p;this.Lk=this.Fl=this.Jc=this.Jk=this.Dl=this.ed=this.Ik=this.Cl=this.dd=this.Ck=this.wl=this.bd=this.Gk=this.Al=this.Hc=this.Kk=this.El=this.Ic=this.Fk=this.zl=this.Ib=this.Ek=this.yl=this.cd=this.Hk=this.Bl=this.Xb=this.Dk=this.xl=this.Dd=l}function hd(a,b,c){a.Dd&&(a.b.useProgram(a.Dd),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Dd,"matMVP"),p,b.sa()),a.b.uniform4fv(a.b.getUniformLocation(a.Dd,"uColor"),c.sa()))}
function id(a,b,c){a.cd&&(a.b.useProgram(a.cd),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.cd,"matMVP"),p,b.sa()),a.b.uniform4fv(a.b.getUniformLocation(a.cd,"uColor"),c.sa()))}
function jd(a,b,c,d,e){if(a.Ib){var f=new bd(0.1,0.1,0.1,0);a.b.useProgram(a.Ib);a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Ib,"matMVP"),p,d.sa());a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Ib,"matNormal"),p,b.sa());a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Ib,"matModelView"),p,c.sa());a.b.uniform4fv(a.b.getUniformLocation(a.Ib,"uAmbientColor"),f.sa());a.b.uniform4fv(a.b.getUniformLocation(a.Ib,"uColor"),e.sa())}}
function Jg(a,b,c){var d=a.b.createShader(b);if(!d)return l;a.b.shaderSource(d,c);a.b.compileShader(d);return!a.b.getShaderParameter(d,a.b.COMPILE_STATUS)&&!a.b.isContextLost()?(b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),l):d};function Kg(a){this.c=a;this.uj=[];this.ac=[]}B("TextureManager",Kg);Kg.prototype.Pl=function(a,b,c,d){var e=this.uj[a];e?(this.ac[a]+=1,b(e)):(e=new R(this.c),S(e,a,b,c,d),this.ac[a]=1,this.uj[a]=e);return e};Kg.prototype.CreateTexture=Kg.prototype.Pl;Kg.prototype.Rl=function(a){this.ac[a]-=1;0==this.ac[a]&&(this.uj[a].t(),delete this.uj[a],delete this.ac[a])};Kg.prototype.DestroyTexture=Kg.prototype.Rl;var Lg=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function Mg(a){this.c=a;this.b=a.b;var b=0,c=0;this.Vi=new Q(this.c);a=[];for(var d=[],e=0;16>e;e++)for(var f=0;16>f;f++){var b=0.0625*e,g=0.0625*f;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=4*c;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.Vi;0==a.length%5&&(c.D=new Float32Array(a),c.mode="font",c.T=5);gd(this.Vi,d,"TRIANGLES");a=new R(this.c);S(a,qd+"font.png");this.Vi.Uc(a);this.vq=new O;this.Lp=0}
Mg.prototype.Be=function(a,b,c,d,e){d==l&&(d=1);this.c.Sc();this.c.Xj();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new O,g=0,j=0,m=0;m<a.length;m++)g=a.charCodeAt(m),j+=Lg[g]/2*d,f.Yd(d,d,1),f.$l(f,b+j,c,0),this.c.Tc(f),this.Vi.va(k,6,12*g,e),j+=Lg[g]/2*d;this.c.Kd();this.c.b.disable(this.c.b.BLEND);this.Lp=b-b};Mg.prototype.Tl=function(a){for(var b=0,c=0;c<a.length;c++)b+=Lg[a.charCodeAt(c)];return b};
Mg.prototype.qo=u(32);B("Font",Mg);Mg.prototype.DrawText=Mg.prototype.Be;Mg.prototype.GetStringHeight=Mg.prototype.qo;Mg.prototype.GetStringWidth=Mg.prototype.Tl;function Ng(a){this.c=a;this.b=a.b;this.Zf=p;this.tl=this.Gc=this.A=l;this.C=this.w=0}
Ng.prototype.Xg=function(a,b){this.fg=document.createElement("canvas");this.R=this.fg.getContext("2d");this.$a=new R(this.c);this.$a.l=this.b.createTexture();this.text=a;this.R.save();this.R.font=b.fontString;this.R.textAlign="left";this.R.textBaseline="top";this.R.lineWidth=b.lineWidth;this.R.strokeStyle=b.strokeStyle;var c=Math.round(this.R.measureText(this.text).width);this.R.restore();this.w=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.C=parseInt(b.fontString,
10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.gd=Nc(this.w);this.fd=Nc(this.C);this.$a.width=this.gd;this.$a.height=this.fd;this.R.canvas.width=this.gd;this.R.canvas.height=this.fd;this.R.fillStyle=b.backgroundColor;this.R.fillRect(0,0,this.w,this.C);this.R.shadowOffsetX=b.shadowOffsetX;this.R.shadowOffsetY=b.shadowOffsetY;this.R.shadowBlur=b.shadowBlur;this.R.shadowColor=b.shadowColor;this.R.fillStyle=b.fontColor;this.R.font=b.fontString;this.R.textAlign="left";this.R.textBaseline=
"middle";this.R.lineWidth=b.lineWidth;this.R.strokeStyle=b.strokeStyle;this.R.strokeText(a,b.lineWidth,this.C/2);this.R.fillText(a,b.lineWidth,this.C/2);this.rh();this.A=new Q(this.c);this.A.Uc(this.$a);c=[];c.push(-this.w/2,this.C/2,0,0,0);c.push(-this.w/2,-this.C/2,0,0,1/this.fd*this.C);c.push(this.w/2,-this.C/2,0,1/this.gd*this.w,1/this.fd*this.C);c.push(this.w/2,this.C/2,0,1/this.gd*this.w,0);fd(this.A,c);gd(this.A,[0,1,2,0,2,3],"TRIANGLES");this.A.w=this.w;this.A.C=this.C;return this.A};
Ng.prototype.Vg=function(a,b){this.fg=document.createElement("canvas");this.R=this.fg.getContext("2d");this.$a=new R(this.c);this.$a.l=this.b.createTexture();this.w=b.iconWidth+2*b.border+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.C=b.iconHeight+2*b.border+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.gd=Nc(this.w);this.fd=Nc(this.C);this.$a.width=this.gd;this.$a.height=this.fd;this.R.canvas.width=this.gd;this.R.canvas.height=this.fd;this.R.fillStyle=
b.backgroundColor;this.R.fillRect(0,0,this.w,this.C);this.R.shadowOffsetX=b.shadowOffsetX;this.R.shadowOffsetY=b.shadowOffsetY;this.R.shadowBlur=b.shadowBlur;this.R.shadowColor=b.shadowColor;var c=new Image;c.crossOrigin="anonymous";var d=this;c.onload=function(){d.R.drawImage(c,b.border,b.border,b.iconWidth,b.iconHeight);d.rh()};c.src=a;this.A=new Q(this.c);this.A.Uc(this.$a);var e=[];e.push(-this.w/2,this.C/2,0,0,0);e.push(-this.w/2,-this.C/2,0,0,1/this.fd*this.C);e.push(this.w/2,-this.C/2,0,1/
this.gd*this.w,1/this.fd*this.C);e.push(this.w/2,this.C/2,0,1/this.gd*this.w,0);fd(this.A,e);gd(this.A,[0,1,2,0,2,3],"TRIANGLES");this.A.ba=[-this.w/2,-this.C/2,0];this.A.Aa=[this.w/2,this.C/2,0];this.A.w=this.w;this.A.C=this.C;return this.A};
Ng.prototype.rh=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.$a.l);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.fg);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.$a.$b=k};Ng.prototype.t=function(){this.A&&(this.A.t(),this.A=l);this.Gc&&(this.Gc.t(),this.Gc=l);this.tl&&(this.tl.t(),this.tl=l);this.$a&&(this.$a.t(),this.$a=l);this.fg&&(document.removeChild(this.fg),this.fg=l)};function Og(a){this.c=a;this.b=a.b;this.cc=this.fc=this.ec=0;this.Bq=l;this.Zf=p;this.ab=this.Oa=this.Gc=l;this.scale=20;this.text=this.yg="";this.Gh=new Ng(a);this.Xh=this.$h=0;this.vn=this.wn=1;this.un=0;this.tn=1;this.vl=0;this.ul=Infinity;this.el=new bd(1,1,1,1);this.Yi={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.ei={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",
fontColor:"rgba(255,255,255,1.0)",lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"};this.Ki=p;this.bl=0;this.cl=1;this.dl=0}w=Og.prototype;w.xo=function(a,b,c,d){this.yg=c?c:"";b&&(this.ei=b);this.text=a;d&&(this.Yi=d);c&&(this.Oa=this.Gh.Vg(this.yg,this.Yi));this.Gh=new Ng(this.c);a&&(this.ab=this.Gh.Xg(a,this.ei))};
w.Ca=function(a,b,c,d){this.Oa&&this.ab?(this.$h=this.Oa.w+this.ab.w,this.Xh=this.Oa.C):this.Oa?(this.$h=this.Oa.w,this.Xh=this.Oa.C):this.ab&&(this.$h=this.ab.w,this.Xh=this.ab.C);var e=this.Oa?this.Oa.w:0,f=this.Ki?-this.bl*e/2:-this.bl*this.$h/2;if(this.Oa){var g=this.$h-e,g=this.Ki?0:-g/2;this.Oa.kh(a,b,c,(g+f)*M*this.scale,this.cl*(this.Xh/2)*M*this.scale,this.dl*M*this.scale)}this.ab&&(g=this.Ki?e/2+this.ab.w/2:e/2,this.ab.kh(a,b,c,(g+f)*M*this.scale,this.cl*(this.Xh/2)*M*this.scale,this.dl*
M*this.scale));this.af=a;this.bf=b;this.cf=c;if(d!=l){this.Zf=k;d=this.Gh;var e=this.wn,f=this.vn,g=this.un,j=this.tn;d.Gc=new Q(d.c);var m=[];m.push(a,b,c,e,f,g,j);m.push(0,0,0,e,f,g,j);dd(d.Gc,m);gd(d.Gc,[0,1],"LINES");this.Gc=d.Gc}};
w.va=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.Zf&&this.Gc.va();this.Oa&&md(this.Oa);this.ab&&md(this.ab);this.c.Sc();var a=new O;a.Yd(M*this.scale,M*this.scale,1);this.c.Tc(a);this.Oa&&this.Oa.va(p,0,0,l,this.el);this.ab&&this.ab.va(p,0,0,l,this.el);this.c.Kd();this.c.b.disable(this.c.b.BLEND)};function Pg(a){a.Zf?a.Ca(a.af,a.bf,a.cf,0):a.Ca(a.af,a.bf,a.cf,l)}
w.yi=function(a){this.scale=a;Pg(this)};w.gh=function(a,b){var c=p,d=p;if(this.Oa)var e=this.c.nf(a,b,this.c.ya,k),c=this.Oa.Le(e.x,e.y,e.p,e.le,e.me,e.oe);this.ab&&(e=this.c.nf(a,b,this.c.ya,k),d=this.ab.Le(e.x,e.y,e.p,e.le,e.me,e.oe));return c||d};w.t=function(){this.Gh=l;this.cc=this.fc=this.ec=0;this.Oa&&this.Oa.t();this.ab&&this.ab.t();this.Gc&&this.Gc.t();this.Zf=p;this.Gc=l;this.scale=0};B("Poi",Og);Og.prototype.Draw=Og.prototype.va;Og.prototype.SetContent=Og.prototype.xo;
Og.prototype.SetPosition=Og.prototype.Ca;Og.prototype.SetSize=Og.prototype.yi;Og.prototype.Destroy=Og.prototype.t;function Qg(a){this.c=a;this.Yh=[];this.ac=[];this.qg=l;this.Zh=[];this.ag=[]}w=Qg.prototype;w.Ol=function(a,b,c,d){var e=new Og(this.c);b&&(e.ei=b);e.text=a;d&&(e.Yi=d);c&&(e.yg=c,e.Oa=this.Vg(c,e.Yi));a&&(e.ab=this.Xg(a,e.ei));return e};w.Ql=function(a){a.Oa&&Rg(this,a.yg);a.ab&&Sg(this,a.text,a.ei)};w.Vg=function(a,b){var c=this.Yh[a];if(c){this.ac[a]+=1;var d=new Q(this.c);d.da(c);d.w=c.w;d.C=c.C;this.Yh[a]=d}else this.qg=new Ng(this.c),d=this.qg.Vg(a,b),this.ac[a]=1,this.Yh[a]=d,this.qg=l;return d};
function Rg(a,b){a.ac[b]-=1;0==a.ac[b]&&(a.Yh[b].l.t(),delete a.Yh[b],delete a.ac[b])}w.Xg=function(a,b){var c=this.Zh[a+b.id];if(c){this.ag[a+b.id]+=1;var d=new Q(this.c);d.da(c);d.w=c.w;d.C=c.C;this.Zh[a+b.id]=d}else this.qg=new Ng(this.c),d=this.qg.Xg(a,b),this.ag[a+b.id]=1,this.Zh[a+b.id]=d,this.qg=l;return d};function Sg(a,b,c){a.ag[b+c.id]-=1;0==a.ag[b+c.id]&&(a.Zh[b+c.id].l.t(),delete a.Zh[b+c.id],delete a.ag[b+c.id])}
w.Ml=function(a,b,c){a.Oa=this.Vg(b,c);a.Ca(a.af,a.bf,a.cf,l);Rg(this,a.yg);a.yg=b};w.Nl=function(a,b,c){a.ab=this.Xg(b,c);a.Ca(a.af,a.bf,a.cf,l);Sg(this,a.text,c);a.text=b};B("PoiManager",Qg);Qg.prototype.CreatePoi=Qg.prototype.Ol;Qg.prototype.DestroyPoi=Qg.prototype.Ql;Qg.prototype.ChangePoiIcon=Qg.prototype.Ml;Qg.prototype.ChangePoiText=Qg.prototype.Nl;var Tg=new Date,Ug=new Date,Vg=[],Wg=0,Xg=l,Yg=l;function Zg(){for(var a=0;a<Vg.length;a++){var b=Vg[a];b.vm&&(0<b.Gl&&0<b.Pk?(b.I.width=window.innerWidth-b.Gl,b.I.height=window.innerHeight-b.Pk):(b.I.width=window.innerWidth,b.I.height=window.innerHeight));b.b.isContextLost()||$g(b,b.I.width,b.I.height)}}
function $(){this.Oe=this.hq=this.gq=this.rd=this.jq=this.kq=this.iq=this.ie=this.je=this.he=l;this.Od=p;this.cq="";this.height=this.width=0;this.vm=p;this.Za=this.I=this.b=l;this.rk=0.670588;this.qk=0.921569;this.ok=this.pk=1;this.$n=this.ao=this.co=this.bo=0;this.ni=this.mi=20;this.Tb=new O;this.$=new O;this.$c=new O;this.Tf=new O;this.ya=new O;this.Rh=new O;this.rf=[];this.pg=new Sc;this.Xn=[];this.Yn=[];Vg[Wg]=this;Wg++;this.Zk=this.e=this.Hg=l;this.kf=1;this.wa=this.tj=this.Fg=l;this.Pk=this.Gl=
0}
function ah(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),l;var c;c=a;for(var d=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=
l,f=0;f<d.length;++f){try{e=c.getContext(d[f],{antialias:p})}catch(g){}if(e)break}c=e;return c===l?(b('It doesn\'t appear your browser supports WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'),l):c}w=$.prototype;
w.Jj=function(a,b){if(this.b=ah(a)){this.I=a;a.addEventListener("webglcontextlost",function(a){a.preventDefault()},p);a.addEventListener("webglcontextrestored",function(){window.location.reload()},p);b&&(this.ni=this.mi=0,a.width=window.innerWidth-this.mi,a.height=window.innerHeight-this.ni,this.vm=k);for(var c=["webgl","experimental-webgl","moz-webgl","webkit-3d"],d=0;c.length>d;d++)try{if(this.b=a.getContext(c[d]))break}catch(e){}this.b?($g(this,this.I.width,this.I.height),this.b.clearColor(0,0,
0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),c=this.Za=new Ig(this.b),c.Od=k,c.xl=Jg(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n"),c.Dk=Jg(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}"),c.xl&&c.Dk&&(c.Dd=c.b.createProgram(),c.b.attachShader(c.Dd,c.xl),c.b.attachShader(c.Dd,
c.Dk),c.b.bindAttribLocation(c.Dd,0,"aPosition"),c.b.linkProgram(c.Dd),!c.b.getProgramParameter(c.Dd,c.b.LINK_STATUS)&&!c.b.isContextLost()&&alert("Shader Link: "+c.b.getProgramInfoLog(c.Dd))),c.Bl=Jg(c,c.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n"),
c.Hk=Jg(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n"),c.Bl&&c.Hk&&(c.Xb=c.b.createProgram(),c.b.attachShader(c.Xb,c.Bl),c.b.attachShader(c.Xb,c.Hk),c.b.bindAttribLocation(c.Xb,0,"aPosition"),
c.b.bindAttribLocation(c.Xb,1,"aNormal"),c.b.bindAttribLocation(c.Xb,2,"aTexCoord"),c.b.linkProgram(c.Xb),!c.b.getProgramParameter(c.Xb,c.b.LINK_STATUS)&&!c.b.isContextLost()&&alert(c.b.getProgramInfoLog(c.Xb))),c.yl=Jg(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n"),c.Ek=Jg(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = vColor * uColor;\n}\n\n"),
c.yl&&c.Ek&&(c.cd=c.b.createProgram(),c.b.attachShader(c.cd,c.yl),c.b.attachShader(c.cd,c.Ek),c.b.bindAttribLocation(c.cd,0,"aPosition"),c.b.bindAttribLocation(c.cd,1,"aColor"),c.b.linkProgram(c.cd),!c.b.getProgramParameter(c.cd,c.b.LINK_STATUS)&&!c.b.isContextLost()&&alert(c.b.getProgramInfoLog(c.cd))),c.El=Jg(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n"),
c.Kk=Jg(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord)*uColor;\n}\n\n"),c.El&&c.Kk&&(c.Ic=c.b.createProgram(),c.b.attachShader(c.Ic,c.El),c.b.attachShader(c.Ic,c.Kk),c.b.bindAttribLocation(c.Ic,0,"aPosition"),c.b.bindAttribLocation(c.Ic,1,"aTexCoord"),c.b.linkProgram(c.Ic),!c.b.getProgramParameter(c.Ic,c.b.LINK_STATUS)&&!c.b.isContextLost()&&
alert(c.b.getProgramInfoLog(c.Ic))),c.Al=Jg(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n"),c.Gk=Jg(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n"),
c.Al&&c.Gk&&(c.Hc=c.b.createProgram(),c.b.attachShader(c.Hc,c.Al),c.b.attachShader(c.Hc,c.Gk),c.b.bindAttribLocation(c.Hc,0,"aPosition"),c.b.bindAttribLocation(c.Hc,1,"aNormal"),c.b.bindAttribLocation(c.Hc,2,"aTexCoord"),c.b.bindAttribLocation(c.Hc,3,"aColor"),c.b.linkProgram(c.Hc),!c.b.getProgramParameter(c.Hc,c.b.LINK_STATUS)&&!c.b.isContextLost()&&alert(c.b.getProgramInfoLog(c.Hc))),c.wl=Jg(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n"),
c.Ck=Jg(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n"),c.wl&&c.Ck&&(c.bd=c.b.createProgram(),c.b.attachShader(c.bd,c.wl),c.b.attachShader(c.bd,c.Ck),c.b.bindAttribLocation(c.bd,0,"aPosition"),c.b.bindAttribLocation(c.bd,1,"aTexCoord"),c.b.linkProgram(c.bd),!c.b.getProgramParameter(c.bd,c.b.LINK_STATUS)&&!c.b.isContextLost()&&
alert("font shader: "+c.b.getProgramInfoLog(c.bd))),c.Cl=Jg(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n"),c.Ik=Jg(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n"),
c.Cl&&c.Ik&&(c.dd=c.b.createProgram(),c.b.attachShader(c.dd,c.Cl),c.b.attachShader(c.dd,c.Ik),c.b.bindAttribLocation(c.dd,0,"aPosition"),c.b.bindAttribLocation(c.dd,1,"aTexCoord"),c.b.linkProgram(c.dd),!c.b.getProgramParameter(c.dd,c.b.LINK_STATUS)&&!c.b.isContextLost()&&alert("poi shader: "+c.b.getProgramInfoLog(c.dd))),c.Dl=Jg(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n"),
c.Jk=Jg(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n"),c.Dl&&c.Jk&&(c.ed=c.b.createProgram(),c.b.attachShader(c.ed,c.Dl),c.b.attachShader(c.ed,c.Jk),c.b.bindAttribLocation(c.ed,0,"aPosition"),c.b.bindAttribLocation(c.ed,1,"aColor"),c.b.linkProgram(c.ed),!c.b.getProgramParameter(c.ed,c.b.LINK_STATUS)&&!c.b.isContextLost()&&alert(c.b.getProgramInfoLog(c.ed))),c.Fl=Jg(c,c.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n"),
c.Lk=Jg(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n"),
c.Fl&&c.Lk&&(c.Jc=c.b.createProgram(),c.b.attachShader(c.Jc,c.Fl),c.b.attachShader(c.Jc,c.Lk),c.b.bindAttribLocation(c.Jc,0,"aPosition"),c.b.bindAttribLocation(c.Jc,1,"aTexCoord"),c.b.linkProgram(c.Jc),!c.b.getProgramParameter(c.Jc,c.b.LINK_STATUS)&&!c.b.isContextLost()&&alert(c.b.getProgramInfoLog(c.Jc))),c.zl=Jg(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;attribute vec4 aColor;\nvarying vec4 vColor;\n\nuniform mat4 matNormal;\nuniform mat4 matModelView;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;varying vec3 vNormal;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vPosition = matModelView * vec4(aPosition, 1.0);\n   vNormal = normalize((matNormal * vec4(aNormal,1.0)).xyz);   vColor = aColor;\n}\n"),
c.Fk=Jg(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uAmbientColor;\nuniform vec4 uColor;\nvarying vec4 vColor;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nvoid main()\n{\n   vec3 L = normalize(-vPosition.xyz);\n   float lamb1 = dot(normalize(vNormal), L);\n   float lamb2 = dot(normalize(vNormal), -L);\n   vec4 diff1 = clamp(vec4(vColor.xyz * lamb1,1.0),0.0,1.0);\n   vec4 diff2 = clamp(vec4(vColor.xyz * lamb2,1.0),0.0,1.0);\n   gl_FragColor = diff1+diff2;\n}\n"),
c.zl&&c.Fk&&(c.Ib=c.b.createProgram(),c.b.attachShader(c.Ib,c.zl),c.b.attachShader(c.Ib,c.Fk),c.b.bindAttribLocation(c.Ib,0,"aPosition"),c.b.bindAttribLocation(c.Ib,1,"aNormal"),c.b.bindAttribLocation(c.Ib,2,"aColor"),c.b.linkProgram(c.Ib),!c.b.getProgramParameter(c.Ib,c.b.LINK_STATUS)&&!c.b.isContextLost()&&alert(c.b.getProgramInfoLog(c.Ib))),this.Hg=new Mg(this),this.Zk=new R(this),S(this.Zk,qd+"nodata.png"),this.Fg=new Qg(this),this.tj=new Kg(this),this.wa=new bh(this),this.he&&this.he(this),Ug=
new Date,"undefined"!=typeof window&&window.Dn(ch,this.I),this.I.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return p},V(window,"resize",Zg,p,this),V(window,"unload",this.Rc,p,this)):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
w.Rc=function(){this.he&&(this.he=l);this.Ld&&(W(this.Ld),this.Ld=l);this.Md&&(W(this.Md),this.Md=l);this.rd&&(W(this.rd),this.rd=l);this.je&&(this.je=l);this.ie&&(this.ie=l);Xg&&(W(Xg),Yg=l);Yg&&(W(Yg),Yg=l);this.e&&(this.e.t(),this.e=l);this.b.clearColor(0,0,0,0);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);this.Za=this.I=this.b=l;this.Xn=[];this.Yn=[];this.tj=this.Fg=this.e=this.Hg=l;Vd(window,"resize",l,p,this);Wg=0;Vg=[]};
w.fm=function(a,b,c,d){0<=a&&(1>=a&&0<=b&&1>=b&&0<=c&&1>=c&&0<=d&&1>=d)&&(this.rk=a,this.qk=b,this.pk=c,this.ok=d)};w.po=function(){return{yq:this.rk,nq:this.qk,bq:this.pk,Yp:this.ok}};w.Cj=function(){var a=this.b;a?(a.clearColor(this.rk,this.qk,this.pk,this.ok),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)):dh("Warning: no gl context!!")};w.rm=function(a,b,c,d){this.b&&(this.bo=a,this.co=b,this.ao=c,this.$n=d,this.b.viewport(a,b,c,d))};w.ro=function(){return{x:this.bo,y:this.co,Hq:this.ao,oq:this.$n}};
w.om=function(a){this.$c.da(a);eh(this)};w.ph=function(a){this.$.da(a);eh(this)};w.Tc=function(a){this.Tb.da(a);eh(this)};function eh(a){a.Tf.W(a.$,a.Tb);a.ya.W(a.$c,a.Tf);a.Rh.kg(a.Tf);a.Rh.Me()}w.to=function(a){var b=new R(this);S(b,a);this.Yn.push(b);return b};w.so=function(a){var b=new Q(this);kd(b,a);this.Xn.push(b);return b};w.Sc=function(){var a=this.pg,b=this.$,c=new O;c.da(b);a.qi.push(c);a=this.pg;b=this.Tb;c=new O;c.da(b);a.pi.push(c);a=this.pg;b=this.$c;c=new O;c.da(b);a.lg.push(c)};
w.Kd=function(){var a=this.pg.pi.pop();this.Tb.da(a);a=this.pg.qi.pop();this.$.da(a);a=this.pg.lg.pop();this.$c.da(a);eh(this)};w.Xj=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Tb.oi();this.$.oi();this.$c.Zl(0,b,0,a);eh(this)};
w.Wg=function(a){0==this.kf?(a.type="custom",this.e=new Hg(this,a),this.e.q.Ej(this.width,this.height)):1==this.kf?(a.type="ellipsoid",this.e=new Hg(this,a),this.e.q.Ej(this.width,this.height)):2==this.kf?Ec(K("owg.engine3d"),"** WARNING: not implemented"):3==this.kf&&Ec(K("owg.engine3d"),"** WARNING: not implemented")};w.Be=function(a,b,c,d,e){this.Hg&&this.Hg.Be(a,b,c,d,e)};w.Gj=function(a){var b=Array(2);b[0]=0;b[1]=0;this.Hg&&(b[0]=this.Hg.Tl(a),b[1]=32);return b};
w.nf=function(a,b,c,d){var e=new O;e.kg(c);var f=this.height-b-1;b=2*(a-0)/this.width-1;c=2*(f-0)/this.height-1;a=2*(a-0)/this.width-1;var f=2*(f-0)/this.height-1,g=new N;g.m(b,c,-1);b=e.Qa(g);c=new N;c.m(a,f,1);c=e.Qa(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.p=d[2];b.le=e;b.me=a;b.oe=c;return b};
"undefined"!=typeof window&&(window.Dn=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)});
function ch(){Tg=new Date;var a=Tg.valueOf()-Ug.valueOf();Ug=Tg;for(var b=0;b<Vg.length;b++){var c=Vg[b];if(!c.b.isContextLost()){if(c.e){var d=c.e,e=a;d.O.Ie(e);d.gc.Ie(e);d.q.Ie(e);d.hc&&d.hc.Ie(e)}c.je&&c.je(a,c);c.rm(0,0,c.width,c.height);c.Cj();if(c.e){var d=c.e,e=d.Qd,f=d.Tb,g=new O;g.da(f);e.pi.push(g);e=d.Qd;f=d.$;g=new O;g.da(f);e.qi.push(g);e=d.Qd;f=d.jp;g=new O;g.da(f);e.lg.push(g);d.O.ld(d.Qd);d.gc.ld(d.Qd);d.q.ld(d.Qd);d.hc&&d.hc.ld(d.Qd);d.Qd.pi.pop();d.Qd.qi.pop();d.Qd.lg.pop();c.e.sb()}d=
c.b.getError();d!=c.b.NO_ERROR&&d!=c.b.CONTEXT_LOST_WEBGL&&dh("WebGL Error: "+d);c.ie&&c.ie(c);"undefined"!=typeof window&&window.Dn(ch,c.I)}}}function $g(a,b,c){a.width=b;a.height=c;a.Oe&&a.Oe(b,c,a);a.e&&a.e.q.Ej(b,c)}w=$.prototype;w.gm=ga("he");w.zi=ga("je");w.pm=ga("ie");w.km=function(a){this.Ld&&(W(this.Ld),this.Ld=l);a&&(this.Ld=V(this.I,Ed,function(b){a(b.button,b.clientX-this.mi/2,b.clientY-this.ni/2,this)},p,this))};
w.mm=function(a){this.Md&&(W(this.Md),this.Md=l);a&&(this.Md=V(this.I,Fd,function(b){a(b.button,b.clientX-this.mi/2,b.clientY-this.ni/2,this)},p,this))};w.lm=function(a){this.If&&(W(this.If),this.If=l);a&&(this.If=V(this.I,Gd,function(b){a(b.clientX-this.mi/2,b.clientY-this.ni/2,this)},p,this))};w.nm=function(a){this.rd&&(W(this.rd),this.rd=l);if(a){var b=new Vf(this.I);this.rd=V(b,Gd,function(b){b.preventDefault();a(b.Pe,this)},p,this)}};w.qm=ga("Oe");
w.hm=function(a){Xg&&(W(Xg),Xg=l);a&&(Xg=V(window,Hd,function(b){a(b.keyCode,this)},p,this))};w.im=function(a){Yg&&(W(Yg),Yg=l);a&&(Yg=V(window,Id,function(b){a(b.keyCode,this)},p,this))};w.Wd=function(a,b,c){this.e&&(this.e.q&&this.e.q.ta)&&this.e.q.ta.Wd(a,b,c)};w.ng=function(a,b,c,d){this.e&&(this.e.q&&this.e.q.ta)&&this.e.q.ta.ng(a,b,c,d)};w.ih=function(a,b){return this.e&&this.e.q&&this.e.q.ai?this.e.q.ai.ih(a,b):l};
w.qf=function(a,b){return this.e&&this.e.q&&this.e.q.Jf?this.e.q.Jf.qf(a,b):-1};w.hh=function(a,b){return this.e&&this.e.q&&this.e.q.Eh?this.e.q.Eh.hh(a,b):-1};w.Tg=function(){return this.e&&this.e.q&&this.e.q.ta?this.e.q.ta.Tg():0};w.ho=function(){return this.e?this.e.O.of().elevation:0};w.jg=function(a,b){return this.e&&this.e.q&&this.e.q.ta?this.e.q.ta.jg(a,b):!this.e.q.ta?{hasvalue:k,elevation:0,lod:0}:{hasvalue:p,elevation:0,lod:-1}};w.Fj=function(a,b,c,d,e,f,g){this.wa.Fj(a,b,c,d,e,f,g)};
w.mh=function(a){this.wa.mh(a)};w.qh=function(){this.wa.qh()};function De(a){if(1>a.rf.length)fh("Fatal error with render target stack. PushRenderTarget/PopRenderTarget do not correspond.");else{var b=a.rf.pop(),c=a.rf.length;0<c?a.rf[c-1].sh():b.tm()}}B("engine3d",$);$.prototype.AltitudeAboveEllipsoid=$.prototype.ho;$.prototype.AltitudeAboveGround=$.prototype.Tg;$.prototype.Clear=$.prototype.Cj;$.prototype.CreateScene=$.prototype.Wg;$.prototype.DrawText=$.prototype.Be;$.prototype.GetClearColor=$.prototype.po;
$.prototype.GetDirectionMousePos=$.prototype.nf;$.prototype.GetViewport=$.prototype.ro;$.prototype.InitEngine=$.prototype.Jj;$.prototype.LoadMesh=$.prototype.so;$.prototype.LoadTexture=$.prototype.to;$.prototype.PickGlobe=$.prototype.Wd;$.prototype.PopMatrices=$.prototype.Kd;$.prototype.PushMatrices=$.prototype.Sc;$.prototype.SetClearColor=$.prototype.fm;$.prototype.SetInitCallback=$.prototype.gm;$.prototype.SetKeyDownCallback=$.prototype.hm;$.prototype.SetKeyUpCallback=$.prototype.im;
$.prototype.SetModelMatrix=$.prototype.Tc;$.prototype.SetMouseDownCallback=$.prototype.km;$.prototype.SetMouseMoveCallback=$.prototype.lm;$.prototype.SetMouseUpCallback=$.prototype.mm;$.prototype.SetMouseWheelCallback=$.prototype.nm;$.prototype.SetOrtho2D=$.prototype.Xj;$.prototype.SetProjectionMatrix=$.prototype.om;$.prototype.SetRenderCallback=$.prototype.pm;$.prototype.SetResizeCallback=$.prototype.qm;$.prototype.SetTimerCallback=$.prototype.zi;$.prototype.SetViewMatrix=$.prototype.ph;
$.prototype.SetViewport=$.prototype.rm;$.prototype.GetElevationAt=$.prototype.jg;$.prototype.OnDestroy=$.prototype.Rc;function gh(a){a=a.ic;a.he&&a.he(a.id)}function hh(a,b){var c=b.ic;c.je&&c.je(c.id,a)}function ih(a){var b=a.ic;if(b.ie){var c=[];if(a.e.q&&a.e.q.ta&&a.e.q.ta.K)for(var d=0;d<a.e.q.ta.K.length;d++){var e=a.e.q.ta.K[d];c[c.length]={quadcode:e.i,sw:[e.$e,e.Ye],ne:[e.Sf,e.Pf],available:e.xc}}b.ie(b.id,{gl:a.b,cameraVec:a.e.q.Eb.sa(),eyeVec:a.e.O.Vc.sa(),vMatrix:a.$.sa(),pMatrix:a.$c.sa(),viewPort:{width:a.width,height:a.height},visibleTiles:c})}}function jh(a,b,c,d){d=d.ic;d.Ld&&d.Ld(d.id,a,b,c)}
function kh(a,b,c,d){d=d.ic;d.Md&&d.Md(d.id,a,b,c)}function lh(a,b,c){c=c.ic;c.If&&c.If(c.id,a,b)}function mh(a,b){var c=b.ic;c.rd&&c.rd(c.id,a)}function nh(a,b,c){c=c.ic;c.Oe&&c.Oe(c.id,a,b)}function oh(a,b){var c=b.ic;c.sk&&c.sk(c.id,a)}function ph(a,b){var c=b.ic;c.tk&&c.tk(c.id,a)}function qh(a){var b=a.ic;b.Gf&&b.Gf(a.ic.id)}function rh(a){var b=a.ic;b.Hf&&b.Hf(a.ic.id)}
function sh(){this.name="ogContext";this.type=F;this.Mk=p;this.e=this.c=l;this.fontcolor=new bd(1,1,1,1);this.qp=1;this.Hf=this.Gf=this.So=this.he=this.je=this.ie=this.Oe=this.tk=this.sk=this.If=this.rd=this.Md=this.Ld=l}sh.prototype=new I;
sh.prototype.Ra=function(a){this.he=a.cbfInit;this.So=a.cbfExit;this.Oe=a.cbfResize;a.fullscreen&&(this.Mk=k);this.c=new $;this.c.ic=this;if(A(a["new"])){a=document.createElement("div");document.body.appendChild(a);var b=document.createElement("canvas");a.appendChild(b);this.c.Jj(b,this.Mk)}else a.canvas&&this.c.Jj(document.getElementById(a.canvas),this.Mk);this.c.gm(gh);this.c.zi(hh);this.c.pm(ih);this.c.km(jh);this.c.mm(kh);this.c.lm(lh);this.c.nm(mh);this.c.qm(nh);this.c.hm(oh);this.c.im(ph);this.c.wa.Gf=
qh;this.c.wa.Hf=rh};sh.prototype.Be=function(a,b,c){this.c&&this.c.Be(a,b,c,1,this.fontcolor)};sh.prototype.Gj=function(a){return this.c?this.c.Gj(a):l};sh.prototype.nb=function(){this.c.Rc();this.c=l};function th(){this.name="ogWorld";this.type=Ea}th.prototype=new I;th.prototype.Ra=function(a){if(a==l)Ec(K("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent,c=this.parent.parent.c,b={rendertotexture:b.Cn,shownavigation:b.kl};a.scenetype==fb?(c.kf=1,c.Wg(b),c.e&&(c.e.Rg=this)):a.scenetype==gb?(c.kf=2,c.Wg(b),c.e&&(c.e.Rg=this)):a.scenetype==hb?(c.kf=3,c.Wg(b),c.e&&(c.e.Rg=this)):a.scenetype==ib&&(c.kf=0,c.Wg(b),c.e&&(c.e.Rg=this))}};
th.prototype.xi=function(a,b){var c=this.parent.parent.c.e.q.ta;switch(a){case 0:c.xi(zf);c.Bn=b!=l?b:{};break;case 1:c.xi(Af),c.Bn=b!=l?b:{}}};function uh(){this.name="ogScene";this.type=G;this.Ef=this.Rg=l;this.Ji=[];this.lc=fb;this.kl=this.Cn=k}uh.prototype=new I;w=uh.prototype;w.Ra=function(a){a==l?Ec(K("owg.ogScene"),"** ERROR: no options for scene creation!"):(A(a.type)&&(this.lc=a.type),A(a.rendertotexture)&&(this.Cn=a.rendertotexture),A(a.shownavigation)&&(this.kl=a.shownavigation))};w.gh=function(a,b){var c={};this.parent.c.Wd(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;d[4]=c.x;d[5]=c.y;d[6]=c.z;return d};
w.ih=function(a,b){var c=this.parent.c.ih(a,b);return c?c.tp.id:-1};w.qf=function(a,b){return this.parent.c.qf(a,b)};w.hh=function(a,b){return this.parent.c.hh(a,b)};function vh(a,b){var c=H(b);if(c&&c.type==Ta){var d=Pc(c);d.Ca(c.fc,c.ec,c.cc);d.Db(0.017453292519943295*c.Ua,0.017453292519943295*c.pitch,0.017453292519943295*c.kc);d.oa=c}a.Ef=c}
w.Wj=function(a,b){var c=this.parent.c;if(0==a)b.type="globe";else if(1==a)b.type="fly";else if(2==a)b.type="constrained";else if(3==a)b.type="dynamic";else return;c.e.Wj(b)};w.Ij=function(a){this.parent.c.e.hc.Ij(a)};function wh(){this.name="ogPOI";this.type=Ya;this.Q=p;this.k=this.za=l}wh.prototype=new I;
wh.prototype.Ra=function(a){var b="",c=40,d=l;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new T(e[0],e[1],e[2])).V(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);a.textstyle&&(this.hg=a.textstyle);a.iconstyle&&(this.Mf=a.iconstyle);this.za=this.parent.parent.c.Fg.Ol(b,this.hg,d,this.Mf);this.za.Q=p;a.flagpoleColor&&(b=this.za,d=a.flagpoleColor,b.wn=d[0],b.vn=d[1],b.un=d[2],b.tn=d[3]);a.flagpole==k?this.za.Ca(f[0],f[1],f[2],0):this.za.Ca(f[0],f[1],f[2],l);this.za.yi(c);a.centerOnIcon==k&&(c=
this.za,c.Ki=k,Pg(c));a.pivotPoint&&(c=a.pivotPoint,f=this.za,b=c[1],d=c[2],f.bl=c[0],f.cl=b,f.dl=d,Pg(f));this.za.tp=this;(c=xh(this))&&c.Ta.push(this.za);a.visibilityRange&&(c=this.za,a=a.visibilityRange,c.vl=1E3*a[0]*M,c.ul=1E3*a[1]*M)};wh.prototype.nb=function(){var a=this.parent.parent,b=xh(this);if(b)for(var c=this.za,d=0;d<b.Ta.length;d++)if(b.Ta[d]==c){b.Ta.splice(d,1);break}a.c.Fg.Ql(this.za)};wh.prototype.qa=function(){this.Q=k;this.za.Q=k};
wh.prototype.ra=function(){this.Q=p;this.za.Q=p};function xh(a){var b=l;a=a.parent.parent.c;a.e&&a.e.q&&(b=a.e.q.ai);return b};function yh(){this.name="ogPOILayer";this.type=Ia;this.Q=p;this.Ta=[];this.te="";this.Mf=this.hg=l;this.Zo={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.Yo={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}
yh.prototype=new I;
function zh(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")"}a.fontColor&&(b=a.fontColor,a.fontColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.strokeColor&&(b=a.strokeColor,a.strokeStyle="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.shadowColor&&(b=a.shadowColor,a.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}yh.prototype.Ra=function(a){a.name&&(this.te=a.name);a.textstyle?(zh(a.textstyle),this.hg=a.textstyle):this.hg=this.Zo;a.iconstyle?(zh(a.iconstyle),this.Mf=a.iconstyle):this.Mf=this.Yo};yh.prototype.nb=function(){for(var a=0;a<this.Ta.length;a++)J(this.Ta[a])};yh.prototype.qa=function(){this.Q=k;for(var a=0;a<this.Ta.length;a++)this.Ta[a].qa()};yh.prototype.ra=function(){this.Q=p;for(var a=0;a<this.Ta.length;a++)this.Ta[a].ra()};function Ah(){this.name="ogElevationLayer";this.type=Ga;this.Rf=-1}Ah.prototype=new I;Ah.prototype.$g=function(){var a=l,b=this.parent.parent.parent.c;b.e&&b.e.q&&(a=b.e.q.ta);return a};Ah.prototype.zj=function(a){var b=this.$g();b&&(this.Rf=b.zj(a))};Ah.prototype.Sj=function(){var a=this.$g();a&&-1!=this.Rf&&a.Sj(this.Rf)};Ah.prototype.Ra=function(a){this.zj(a)};function bh(a){this.c=a;this.b=a.b;this.Vf=l;this.Qm=this.dc=p;this.ri=[];this.si=[];this.ti=[];this.ui=[];this.Sn=2E3;this.fp=new T;this.Hf=this.Gf=l}
function ye(a,b,c,d,e,f,g){a.Vf=a.c.e.O;var j=a.Vf.ah();a.nl=j.Ua;a.ll=j.pitch;a.ml=j.kc;e!=l&&f!=l&&g!=l?(a.Ln=0.017453292519943295*e,a.Jn=0.017453292519943295*f,a.Kn=0.017453292519943295*g):(a.Ln=a.nl,a.Jn=a.ll,a.Kn=a.ml);a.ug=a.Ln-a.nl;Math.abs(a.ug)>Math.PI&&(a.ug=0<a.ug?a.ug-2*Math.PI:a.ug+2*Math.PI);a.sg=a.Jn-a.ll;Math.abs(a.sg)>Math.PI&&(a.sg=0<a.sg?a.sg-2*Math.PI:a.sg+2*Math.PI);a.tg=a.Kn-a.ml;Math.abs(a.tg)>Math.PI&&(a.tg=0<a.tg?a.tg-2*Math.PI:a.tg+2*Math.PI);g=a.Vf.of();e=[g.longitude,g.latitude,
g.elevation];f=[b,c,d];a.Hh=Jc*Math.acos(Math.sin(0.017453292519943295*e[1])*Math.sin(0.017453292519943295*f[1])+Math.cos(0.017453292519943295*e[1])*Math.cos(0.017453292519943295*f[1])*Math.cos(0.017453292519943295*(f[0]-e[0])));isNaN(a.Hh)&&(a.Hh=0);g=[g.longitude,g.latitude,g.elevation+a.Hh/4];b=[b,c,d+a.Hh/4];a.ri=e;a.si=g;a.ti=b;a.ui=f;a.Qm=k;a.Gf&&a.Gf(a.c);a.c.zi(function(b){if(a.Qm){a.Vk+=b;b=a.Vk/a.Sn;a.N=0.5*Math.sin(Math.PI*b-Math.PI/2)+0.5;1<b&&(a.N=1,a.qh());b=Math.pow(1-a.N,3)*a.ri[0]+
3*a.N*Math.pow(1-a.N,2)*a.si[0]+3*a.N*a.N*(1-a.N)*a.ti[0]+Math.pow(a.N,3)*a.ui[0];var c=Math.pow(1-a.N,3)*a.ri[1]+3*a.N*Math.pow(1-a.N,2)*a.si[1]+3*a.N*a.N*(1-a.N)*a.ti[1]+Math.pow(a.N,3)*a.ui[1],d=Math.pow(1-a.N,3)*a.ri[2]+3*a.N*Math.pow(1-a.N,2)*a.si[2]+3*a.N*a.N*(1-a.N)*a.ti[2]+Math.pow(a.N,3)*a.ui[2];a.fp.pc(b,c,d);a.Vf.Ca(b,c,d);a.Vf.Db(a.nl+a.N*a.ug,a.ll+a.N*a.sg,a.ml+a.N*a.tg);1==a.N&&a.qh()}});a.N=0;a.Vk=0;a.dc=k}bh.prototype.qh=function(){this.c.zi(l);this.dc=p;this.Hf&&this.Hf(this.c)};
bh.prototype.Fj=function(a,b,c,d,e,f,g){this.Vf=this.c.e.O;d*=M;var j=new T(a,b,c),m=[];j.V(m);var n=new O;n.Rd(a,b);a=new O;a.md(m[0],m[1],m[2]);m=new O;m.W(a,n);n={};e!=l&&f!=l&&g!=l?(n.Ua=0.017453292519943295*e,n.pitch=0.017453292519943295*f,n.kc=0.017453292519943295*g):n=this.Vf.ah();a=n.pitch-Math.PI/2;d=new N(d*Math.sin(a)*Math.cos(n.Ua),d*Math.sin(a)*Math.sin(n.Ua),d*Math.cos(a));d=m.Qa(d).a;j.pc(d[0],d[1],d[2]);d=j.H[1];m=j.H[0];j=j.H[2];j>c?ye(this,m,d,j,e,f,g):ye(this,m,d,-j,n.Ua,-(57.29577951308232*
n.pitch),n.kc)};bh.prototype.mh=ga("Sn");function Nf(a,b){this.c=a;this.b=a.b;this.na=this.Rb=this.ha=this.S=this.D=l;this.ye=new O;this.fl=[];this.options=b;this.Dc=new bd;this.Dc.m(1,1,1,1)}
Nf.prototype.wi=function(a){this.fl=a;var b=0,c=[],d=[];if(this.options.segmentation)for(var e=0;e<a.length-1;e++){var f=[];pf(a[e][0],a[e][1],f);f[2]=a[e][2];var g=[];pf(a[e+1][0],a[e+1][1],g);g[2]=a[e+1][2];for(var g=[g[0]-f[0],g[1]-f[1],g[2]-g[2]],j=0;j<this.options.segmentation+1;j++){var m=f[2]+g[2]*j/this.options.segmentation,n=[];qf(f[0]+g[0]*j/this.options.segmentation,f[1]+g[1]*j/this.options.segmentation,n);n[2]=m;m=new T(n[0],n[1],n[2]);n=[];m.V(n);c.push(n[0]);c.push(n[1]);c.push(n[2]);
c.push(this.options.color[0]);c.push(this.options.color[1]);c.push(this.options.color[2]);c.push(this.options.color[3]);d.push(b);d.push(b+1);b+=1}}else for(e=0;e<a.length;e++)m=new T(a[e][0],a[e][1],a[e][2]),n=[],m.V(n),c.push(n[0]),c.push(n[1]),c.push(n[2]),c.push(this.options.color[0]),c.push(this.options.color[1]),c.push(this.options.color[2]),c.push(this.options.color[3]),d.push(e),d.push(e+1);d.pop();d.pop();this.Uh=e*this.options.segmentation;this.D=new Float32Array(c);this.S=new Uint16Array(d);
this.jb=d.length;this.Ne()};Nf.prototype.t=function(){this.ha&&(this.b.deleteBuffer(this.ha),this.ha=l);this.Rb&&(this.b.deleteBuffer(this.Rb),this.ha=l);this.ha=this.Ae=l};
Nf.prototype.va=function(){this.fl!=l&&(this.ha||this.Ne(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ha),this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Rb),this.b.enableVertexAttribArray(0),this.b.enableVertexAttribArray(1),this.b.vertexAttribPointer(0,3,this.b.FLOAT,p,28,0),this.b.vertexAttribPointer(1,4,this.b.FLOAT,p,28,12),id(this.c.Za,this.c.ya,this.Dc),this.b.lineWidth(this.options.linewidth),this.b.enable(this.b.POLYGON_OFFSET_FILL),this.b.polygonOffset(1,1E3),this.b.drawElements(this.b.LINES,
this.jb,this.b.UNSIGNED_SHORT,0),this.b.disable(this.b.POLYGON_OFFSET_FILL),this.b.disableVertexAttribArray(0),this.b.disableVertexAttribArray(1),this.b.lineWidth(1))};Nf.prototype.Ne=function(){this.ha=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ha);this.b.bufferData(this.b.ARRAY_BUFFER,this.D,this.b.STATIC_DRAW);this.Rb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Rb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.S,this.b.STATIC_DRAW)};function Bh(){this.name="ogEarthPolylineObject";this.type=db;this.options=this.Re=l}Bh.prototype=new I;w=Bh.prototype;w.Ra=function(a){this.options=a;this.Re=new Nf(this.parent.parent.parent.c,a);this.Re.wi(a.coords)};w.nb=function(){this.Re&&(this.Re.t(),this.Re=l,this.status=3)};w.qa=function(){this.Re.Q=k};w.Ke=s();w.ra=function(){this.Re.Q=p};function Ch(a){this.c=a;this.b=a.b;this.cc=this.fc=this.ec=0;this.canvas=l;this.C=this.w=0;this.R=this.A=l;this.qn=-1}w=Ch.prototype;
w.rh=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.$a.l);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.$a.$b=k};w.Ca=function(a,b,c){var d=[];(new T(a,b,c)).V(d);this.A.kh(d[0],d[1],d[2],0,0,0)};w.va=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.A&&md(this.A);this.c.Sc();var a=new O;a.Yd(M*this.scale,M*this.scale,1);this.c.Tc(a);this.A&&this.A.va(p,0,0,l,l);this.c.Kd();this.c.b.disable(this.c.b.BLEND)};
w.yi=ga("scale");w.gh=function(a,b){if(this.A)var c=this.c.nf(a,b,this.c.ya,k),d=this.A.Le(c.x,c.y,c.p,c.le,c.me,c.oe);if(d){var e=c=0,f=d.Nc,g=d.Fd,j=1-f-g;0==d.Tn?(c=f*-this.w/2+g*this.w/2+j*-this.w/2/(f+g+j)+this.w/2,e=f*this.C/2+g*this.C/2+j*-this.C/2/(f+g+j)+this.C/2):1==d.Tn&&(c=f*this.w/2+g*this.w/2+j*-this.w/2/(f+g+j)+this.w/2,e=f*this.C/2+g*-this.C/2+j*-this.C/2/(f+g+j)+this.C/2);c/=this.w;e/=this.C;d={};d.id=this.qn;d.x=c;d.y=e;return d}return l};w.t=function(){this.A&&(this.A.t(),this.$a.t())};function Dh(){this.name="ogBillboard";this.type=Za;this.status=kb;this.k=-1;this.Q=p}Dh.prototype=new I;w=Dh.prototype;
w.Ra=function(a){if(a==l)Ec(K("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==l)Ec(K("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=G)Ec(K("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.Wc=new Ch(this.parent.parent.c);this.Wc.qn=this.id;var b=this.Wc,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.R=b.canvas.getContext("2d");b.w=b.R.canvas.width;b.C=b.R.canvas.height;
break;case "[object HTMLVideoElement]":b.w=c.videoWidth,b.C=c.videoHeight}b.$a=new R(b.c);b.$a.l=b.b.createTexture();b.A=new Q(b.c);b.A.Uc(b.$a);b.gd=b.w;b.fd=b.C;c=[];c.push(-b.w/2,b.C/2,0,0,0);c.push(-b.w/2,-b.C/2,0,0,1/b.fd*b.C);c.push(b.w/2,-b.C/2,0,1/b.gd*b.w,1/b.fd*b.C);c.push(b.w/2,b.C/2,0,1/b.gd*b.w,0);fd(b.A,c);gd(b.A,[0,1,2,0,2,3],"TRIANGLES");b.A.ba=[-b.w/2,-b.C/2,0];b.A.Aa=[b.w/2,b.C/2,0];b.A.w=b.w;b.A.C=b.C;b.rh();a=a.position;this.Wc.Ca(a[0],a[1],a[2]);Eh(this).yj(this.Wc)}};
w.nb=function(){this.Wc&&(Eh(this).Rj(this.Wc),this.Wc.t(),this.status=3)};w.va=function(){this.Wc.va()};function Eh(a){var b=l;a=a.parent.parent.c;a.e&&a.e.q&&(b=a.e.q.Eh);return b}w.qa=function(){this.Q=k;this.Wc.Q=k};w.ra=function(){this.Q=p;this.Wc.Q=p};function Fh(){this.name="ogMeshObject";this.type=Qa;this.kb=[];this.Ed=[]}Fh.prototype=new I;w=Fh.prototype;w.Ra=function(a){this.options=a;if(this.options.jsonobject){a=this.options.jsonobject;for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=Z(Ra,this,this.options);this.kb.push(c);this.Ed.push(c.A)}}};w.nb=function(){for(var a=0;a<this.kb.length;a++)J(this.kb[a]);this.Ed=this.kb=l};w.qa=function(){for(var a=0;a<this.kb.length;a++)this.kb[a].qa()};
w.sf=function(a,b,c,d){for(var e=0;e<this.kb.length;e++)this.kb[e].sf(a,b,c,d)};w.Ke=function(a,b,c,d,e,f){for(var g=0;g<this.kb.length;g++)this.kb[g].Ke(a,b,c,d,e,f)};w.oh=function(a,b,c,d){for(var e=0;e<this.kb.length;e++)this.kb[e].oh(a,b,c,d)};w.tf=function(a,b,c){for(var d=0;d<this.kb.length;d++)this.kb[d].tf(a,b,c)};w.Db=function(a,b,c){for(var d=0;d<this.kb.length;d++)this.kb[d].Db(a,b,c)};w.ra=function(){for(var a=0;a<this.kb.length;a++)this.kb[a].ra()};function Gh(){this.An=Ca()}var Hh=new Gh;Gh.prototype.set=ga("An");Gh.prototype.reset=function(){this.set(Ca())};Gh.prototype.get=ha("An");function Ih(a){this.hl=a||"";this.Jp=Hh}w=Ih.prototype;w.Ep=k;w.Gp=k;w.Fp=k;w.Fn=p;w.Hp=p;function Jh(a){return 10>a?"0"+a:String(a)}function Kh(a,b){var c=(a.Nn-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Lh(a){Ih.call(this,a)}Da(Lh,Ih);Lh.prototype.Fn=k;function Mh(a){this.Uf=a||100;this.Ff=[]}w=Mh.prototype;w.Sh=0;w.add=function(a){this.Ff[this.Sh]=a;this.Sh=(this.Sh+1)%this.Uf};w.get=function(a){a=Nh(this,a);return this.Ff[a]};w.set=function(a,b){a=Nh(this,a);this.Ff[a]=b};w.Kf=function(){return this.Ff.length};w.clear=function(){this.Sh=this.Ff.length=0};w.Nk=function(){for(var a=this.Kf(),b=[],c=this.Kf()-this.Kf();c<a;c++)b[c]=this.get(c);return b};w.Wi=function(){for(var a=[],b=this.Kf(),c=0;c<b;c++)a[c]=c;return a};
function Nh(a,b){b>=a.Ff.length&&fa(Error("Out of bounds exception"));return a.Ff.length<a.Uf?b:(a.Sh+Number(b))%a.Uf};function Oh(a,b){this.Ve=a||"";this.hl=b||"";this.Eg=[];this.gj=new Mh(Ph);this.yp=Ba(this.Oo,this);this.ep=new Lh(this.hl);this.dp={};if(k!=this.Om){this.Om=k;Hc();var c=Gc,d=this.yp;c.Oh||(c.Oh=[]);c.Oh.push(d)}this.Ri="1"==Qh(this.Ve,"enabled");z.setInterval(Ba(this.Cp,this),7500)}var Ph=500;w=Oh.prototype;w.eo="LOGGING";w.ap=p;w.mb=l;w.Hl=p;w.Om=p;w.wm=l;w.Rk=Ca();w.Od=function(){this.Ri&&Rh(this)};function Sh(a,b){a.Ri=b;a.Ri&&Rh(a);Th(a,"enabled",b?"1":"0")}
function Uh(a){return!!a.mb&&!a.mb.closed}w.To=function(){this.gj.clear();Uh(this)&&this.Jl()};
w.Oo=function(a){if(!this.dp[a.Um]){var b=this.ep,c;switch(a.Yc.value){case vc.value:c="dbg-sh";break;case wc.value:c="dbg-sev";break;case xc.value:c="dbg-w";break;case yc.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.hl," ");if(b.Ep){var e=new Date(a.Nn);d.push("[",Jh(e.getFullYear()-2E3)+Jh(e.getMonth()+1)+Jh(e.getDate())+" "+Jh(e.getHours())+":"+Jh(e.getMinutes())+":"+Jh(e.getSeconds())+"."+Jh(Math.floor(e.getMilliseconds()/10)),"] ")}b.Gp&&d.push("[",ub(Kh(a,b.Jp.get())),"s] ");b.Fp&&
d.push("[",ob(a.Um),"] ");b.Hp&&d.push("[",ob(a.Yc.name),"] ");d.push('<span class="',c,'">',nb(ub(ob(a.$m))));b.Fn&&a.Bk&&d.push("<br>",nb(ub(a.Ak||"")));d.push("</span><br>");b=d.join("");this.Ri?(Rh(this),this.gj.add(b),Vh(this,b)):this.gj.add(b);this.ap&&a.Yc.value>=wc.value&&Sh(this,k)}};function Vh(a,b){a.Eg.push(b);z.clearTimeout(a.wm);750<Ca()-a.Rk?a.Il():a.wm=z.setTimeout(Ba(a.Il,a),250)}
w.Il=function(){this.Rk=Ca();if(Uh(this)){var a=this.mb.document.body,a=a&&100>=a.scrollHeight-(a.scrollTop+a.clientHeight);this.mb.document.write(this.Eg.join(""));this.Eg.length=0;a&&this.mb.scrollTo(0,1E6)}};function Wh(a){for(var b=a.gj.Nk(),c=0;c<b.length;c++)Vh(a,b[c])}
function Rh(a){if(!Uh(a)&&!a.Hl){var b=Qh(a.Ve,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.Hl=k;a.mb=window.open("",Fb?a.Ve.replace(/[\s\-\.\,]/g,"_"):a.Ve,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);!a.mb&&!a.Ip&&(alert("Logger popup was blocked"),a.Ip=k);a.Hl=p;a.mb&&a.Jl()}}w.Xi=u("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
w.Jl=function(){Uh(this)&&(this.mb.document.open(),Vh(this,"<style>"+this.Xi()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.eo+"<br><small>Logger: "+this.Ve+"</small></div><hr>"),Wh(this))};function Th(a,b,c){a=(b+a.Ve).replace(/[;=\s]/g,"_");document.cookie=a+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(Ca()+2592E6)).toUTCString()}
function Qh(a,b,c){a=(b+a).replace(/[;=\s]/g,"_");b=String(document.cookie);var d=b.indexOf(a+"=");return-1!=d?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,-1==c?b.length:c))):c||""}w.Cp=function(){Uh(this)&&Th(this,"dbg",(this.mb.screenX||this.mb.screenLeft||0)+","+(this.mb.screenY||this.mb.screenTop||0)+","+(this.mb.outerWidth||800)+","+(this.mb.outerHeight||500))};function Xh(a,b){if(Yh){var c=Zh(),d;for(d in c){var c=d.replace("fancywindow.sel.",""),c=K(c),e=c.Yc,f=window.localStorage.getItem(d).toString();(!e||e.toString()!=f)&&c.di(Cc(f))}}Oh.call(this,a,b)}Da(Xh,Oh);var Yh;a:{try{Yh=!!window.localStorage.getItem;break a}catch($h){}Yh=p}w=Xh.prototype;
w.Il=function(){this.Rk=Ca();if(Uh(this)){for(var a=Uf(this.zc,"log"),b=100>=a.scrollHeight-(a.scrollTop+a.offsetHeight),c=0;c<this.Eg.length;c++){var d=this.zc.rg("div","logmsg");d.innerHTML=this.Eg[c];a.appendChild(d)}this.Eg.length=0;this.En();b&&(a.scrollTop=a.scrollHeight)}};
w.Jl=function(){if(Uh(this)){var a=this.mb.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.Ve+"</title><style>"+this.Xi()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.Ve+"</b></p><p>"+this.eo+'</p><span id="clearbutton">clear</span><span id="exitbutton">exit</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();(Fb?a.body:this.mb).onresize=Ba(this.En,this);this.zc=new Tf(a);Uf(this.zc,"openbutton").onclick=Ba(this.up,this);Uf(this.zc,"closebutton").onclick=Ba(this.Uo,this);Uf(this.zc,"clearbutton").onclick=Ba(this.To,this);Uf(this.zc,"exitbutton").onclick=Ba(this.bp,this);Wh(this)}};
w.up=function(){var a=Uf(this.zc,"optionsarea");a.innerHTML="";for(var b=ai(),c=this.zc,d=0;d<b.length;d++){var e=K(b[d]),e=c.rg("div",{},bi(this,"sel"+b[d],e.Yc?e.Yc.name:"INHERIT"),c.rg("span",{},b[d]||"(root)"));a.appendChild(e)}Uf(this.zc,"options").style.display="block";return p};
function bi(a,b,c){a=a.zc;b=a.rg("select",{id:b});for(var d=0;d<Ac.length;d++){var e=Ac[d],f=a.rg("option",{},e.name);c==e.name&&(f.selected=k);b.appendChild(f)}b.appendChild(a.rg("option",{selected:"INHERIT"==c},"INHERIT"));return b}
w.Uo=function(){Uf(this.zc,"options").style.display="none";for(var a=ai(),b=this.zc,c=0;c<a.length;c++){var d=K(a[c]),e=Uf(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;"INHERIT"==e?d.di(l):d.di(Cc(e))}if(Yh){a=ai();b=Zh();for(c=0;c<a.length;c++)d="fancywindow.sel."+a[c],e=K(a[c]).Yc,d in b?e?window.localStorage.getItem(d)!=e.name&&window.localStorage.setItem(d,e.name):window.localStorage.removeItem(d):e&&window.localStorage.setItem(d,e.name)}return p};
w.En=function(){var a=this.zc,b=Uf(a,"log"),c=Uf(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.Ih.body.offsetHeight-c.offsetHeight-(Fb?4:0)+"px"};w.bp=function(){Sh(this,p);this.mb&&this.mb.close()};w.Xi=function(){return Xh.Gg.Xi.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:90% monospace}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:80px;font:x-small arial;}#exitbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};
function Zh(){for(var a={},b=0,c=window.localStorage.length;b<c;b++){var d=window.localStorage.key(b);d!=l&&0==d.lastIndexOf("fancywindow.sel.",0)&&(a[d]=k)}return a}function ai(){var a=Xb(Fc);a.sort();return a};function ci(a){this.y=this.x=l;this.index=-1;0==arguments.length?this.y=this.x=0:2==arguments.length?(this.x=arguments[0],this.y=arguments[1]):3==arguments.length?(this.x=arguments[0],this.y=arguments[1],this.index=arguments[2]):alert("Invalid poly2tri.Point constructor call!");this.Kh=[]}w=ci.prototype;w.set=function(a,b){this.x=a;this.y=b};w.add=function(a){this.x+=a.x;this.y+=a.y};w.sub=function(a){this.x-=a.x;this.y-=a.y};w.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
w.j=function(a){return this.x==a.x&&this.y==a.y};function di(a,b){return a.y==b.y?a.x-b.x:a.y-b.y}
function ei(a){this.Bb=this.Sa=l;2==arguments.length?arguments[0].y>arguments[1].y?(this.Bb=arguments[0],this.Sa=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.Bb=arguments[0],this.Sa=arguments[1]):arguments[0].x==arguments[1].x?alert("Invalid poly2tri.edge constructor call: repeated points!"):(this.Sa=arguments[0],this.Bb=arguments[1]):(this.Sa=arguments[0],this.Bb=arguments[1]):alert("Invalid poly2tri.Edge constructor call!");this.Bb.Kh.push(this)}
function fi(a,b,c){this.d=[l,l,l];this.Pa=[l,l,l];this.Mm=p;this.Ia=[p,p,p];this.Ja=[p,p,p];3==arguments.length&&(this.d[0]=a,this.d[1]=b,this.d[2]=c)}w=fi.prototype;w.Jd=function(a){return this.d[a]};w.Dj=function(a,b){for(var c=k,d=0;d<arguments.length;++d)c=c&&(arguments[d].j(this.d[0])||arguments[d].j(this.d[1])||arguments[d].j(this.d[2]));return c};w.Ul=function(){0!=arguments.length&&(this.Mm=arguments[0]);return this.Mm};
w.hd=function(a){var b;if(3==arguments.length){var c=arguments[0],d=arguments[1];b=arguments[2];c.j(this.d[2])&&d.j(this.d[1])||c.j(this.d[1])&&d.j(this.d[2])?this.Pa[0]=b:c.j(this.d[0])&&d.j(this.d[2])||c.j(this.d[2])&&d.j(this.d[0])?this.Pa[1]=b:c.j(this.d[0])&&d.j(this.d[1])||c.j(this.d[1])&&d.j(this.d[0])?this.Pa[2]=b:alert("Invalid poly2tri.Triangle.MarkNeighbor call (1)!")}else 1==arguments.length?(b=arguments[0],b.Dj(this.d[1],this.d[2])?(this.Pa[0]=b,b.hd(this.d[1],this.d[2],this)):b.Dj(this.d[0],
this.d[2])?(this.Pa[1]=b,b.hd(this.d[0],this.d[2],this)):b.Dj(this.d[0],this.d[1])&&(this.Pa[2]=b,b.hd(this.d[0],this.d[1],this))):alert("Invalid poly2tri.Triangle.MarkNeighbor call! (2)")};function gi(a){a.Pa[0]=l;a.Pa[1]=l;a.Pa[2]=l}function hi(a){a.Ja[0]=p;a.Ja[1]=p;a.Ja[2]=p}function ii(a,b){return b.j(a.d[0])?a.d[2]:b.j(a.d[1])?a.d[0]:b.j(a.d[2])?a.d[1]:l}function ji(a,b){return b.j(a.d[0])?a.d[1]:b.j(a.d[1])?a.d[2]:b.j(a.d[2])?a.d[0]:l}
function ki(a,b){return b.j(a.d[0])?a.Pa[1]:b.j(a.d[1])?a.Pa[2]:a.Pa[0]}function li(a,b){return b.j(a.d[0])?a.Pa[2]:b.j(a.d[1])?a.Pa[0]:a.Pa[1]}function mi(a,b){return b.j(a.d[0])?a.Ia[1]:b.j(a.d[1])?a.Ia[2]:a.Ia[0]}function ni(a,b){return b.j(a.d[0])?a.Ia[2]:b.j(a.d[1])?a.Ia[0]:a.Ia[1]}function oi(a,b,c){b.j(a.d[0])?a.Ia[1]=c:b.j(a.d[1])?a.Ia[2]=c:a.Ia[0]=c}function pi(a,b,c){b.j(a.d[0])?a.Ia[2]=c:b.j(a.d[1])?a.Ia[0]=c:a.Ia[1]=c}
function qi(a,b){return b.j(a.d[0])?a.Ja[1]:b.j(a.d[1])?a.Ja[2]:a.Ja[0]}function ri(a,b){return b.j(a.d[0])?a.Ja[2]:b.j(a.d[1])?a.Ja[0]:a.Ja[1]}function si(a,b,c){b.j(a.d[0])?a.Ja[1]=c:b.j(a.d[1])?a.Ja[2]=c:a.Ja[0]=c}function ti(a,b,c){b.j(a.d[0])?a.Ja[2]=c:b.j(a.d[1])?a.Ja[0]=c:a.Ja[1]=c}function ui(a,b){return b.j(a.d[0])?a.Pa[0]:b.j(a.d[1])?a.Pa[1]:a.Pa[2]}function vi(a,b,c){b=ii(b,c);return ii(a,b)}
w.Lj=function(a){if(1==arguments.length)this.Lj(this.d[0],arguments[0]);else if(2==arguments.length){var b=arguments[0],c=arguments[1];b.j(this.d[0])?(this.d[1]=this.d[0],this.d[0]=this.d[2],this.d[2]=c):b.j(this.d[1])?(this.d[2]=this.d[1],this.d[1]=this.d[0],this.d[0]=c):b.j(this.d[2])?(this.d[0]=this.d[2],this.d[2]=this.d[1],this.d[1]=c):alert("Invalid poly2tri.Triangle.Legalize call!")}else alert("Invalid poly2tri.Triangle.Legalize call!")};
function wi(a,b,c){if(b.j(a.d[0])){if(c.j(a.d[1]))return 2;if(c.j(a.d[2]))return 1}else if(b.j(a.d[1])){if(c.j(a.d[2]))return 0;if(c.j(a.d[0]))return 2}else if(b.j(a.d[2])){if(c.j(a.d[0]))return 1;if(c.j(a.d[1]))return 0}return-1}
w.eh=function(a){if(1==arguments.length)"number"==typeof arguments[0]?this.Ia[arguments[0]]=k:this.eh(arguments[0].Sa,arguments[0].Bb);else if(2==arguments.length){var b=arguments[0],c=arguments[1];if(c.j(this.d[0])&&b.j(this.d[1])||c.j(this.d[1])&&b.j(this.d[0]))this.Ia[2]=k;else if(c.j(this.d[0])&&b.j(this.d[2])||c.j(this.d[2])&&b.j(this.d[0]))this.Ia[1]=k;else if(c.j(this.d[1])&&b.j(this.d[2])||c.j(this.d[2])&&b.j(this.d[1]))this.Ia[0]=k}else alert("Invalid poly2tri.Triangle.MarkConstrainedEdge call!")};
var xi=3*Math.PI/4,yi=Math.PI/2;function zi(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return-1E-16<a&&1E-16>a?0:0<a?-1:1}function Ai(a,b,c,d){var e=d.x;d=d.y;var f=a.x-e;a=a.y-d;return 1E-16>=f*(b.y-d)-(b.x-e)*a||1E-16>=(c.x-e)*a-f*(c.y-d)?p:k}
function Bi(a){this.G=this.next=this.gf=this.h=l;this.value=0;1==arguments.length?(this.h=arguments[0],this.value=this.h.x):2==arguments.length?(this.h=arguments[0],this.gf=arguments[1],this.value=this.h.x):alert("Invalid poly2tri.Node constructor call!")}function Ci(a,b){this.Ph=a;this.pl=b;this.ci=a}Ci.prototype.head=ha("Ph");Ci.prototype.Nj=function(a){var b=this.ci;if(a<b.value)for(;(b=b.G)!=l;){if(a>=b.value)return this.ci=b}else for(;(b=b.next)!=l;)if(a<b.value)return this.ci=b.G;return l};
function Di(){this.Kc=this.pd=this.ue=l;this.width=0;this.Sk=p}Di.prototype.Cj=function(){this.Kc=this.pd=this.ue=l;this.width=0;this.Sk=p};function Ei(){this.Ia=l;this.right=p}function Fi(a){this.Un=[];this.Zc=[];this.d=a;this.Kh=[];this.aq=this.$p=this.Zp=this.pl=this.Ph=this.Nh=l;this.aa=new Di;this.Jh=new Ei;Gi(this,this.d)}Fi.prototype.head=ha("Ph");function Gi(a,b){for(var c=0;c<b.length;++c)a.Kh.push(new ei(b[c],b[(c+1)%b.length]))}Fi.prototype.Jd=function(a){return this.d[a]};
Fi.prototype.Nj=function(a){return this.Nh.Nj(a.x)};function Hi(a,b){for(var c=0;3>c;++c)if(b.Pa[c]==l){var d;a:{d=a.Nh;var e=ii(b,b.Jd(c)),f=e.x,g=d.ci,j=g.h.x;if(f==j)if(e.j(g.G.h))g=g.G;else if(e.j(g.next.h))g=g.next;else{if(!e.j(g.h)){alert("Invalid poly2tri.AdvancingFront.LocatePoint call!");d=l;break a}}else if(f<j)for(;(g=g.G)!=l&&!e.j(g.h););else for(;(g=g.next)!=l&&!e.j(g.h););g!=l&&(d.ci=g);d=g}d!=l&&(d.gf=b)}}
function Ii(a,b){if(b!=l&&!b.Ul()){b.Ul(k);a.Un.push(b);for(var c=0;3>c;++c)b.Ia[c]||Ii(a,b.Pa[c])}}
function Ji(a){var b;if(3==arguments.length){b=arguments[0];var c=arguments[1],d=arguments[2];b.Jh.Ia=c;b.Jh.right=c.Sa.x>c.Bb.x;if(!Ki(d.gf,c.Sa,c.Bb)){var e=b;if(e.Jh.right)for(var f=d;f.next.h.x<c.Sa.x;)-1==zi(c.Bb,f.next.h,c.Sa)?Li(e,c,f):f=f.next;else for(f=d;f.G.h.x>c.Sa.x;)1==zi(c.Bb,f.G.h,c.Sa)?Mi(e,c,f):f=f.G;Ji(b,c.Sa,c.Bb,d.gf,c.Bb)}}else if(5==arguments.length){if(b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3],f=arguments[4],!Ki(e,c,d)){var g=ji(e,f),g=zi(d,g,c);if(0==g)alert("poly2tri.sweep.EdgeEvent: Collinear not supported!");
else{var j=ii(e,f),j=zi(d,j,c);0==j?alert("poly2tri.sweep.EdgeEvent: Collinear not supported!"):g==j?(e=1==g?li(e,f):ki(e,f),Ji(b,c,d,e,f)):Ni(b,c,d,e,f)}}}else alert("Invalid poly2tri.sweep.EdgeEvent call!")}function Ki(a,b,c){var d=wi(a,b,c);return-1!=d?(a.eh(d),a=a.Pa[d],a!=l&&a.eh(b,c),k):p}function Oi(a,b){var c=new fi(b.G.h,b.h,b.next.h);c.hd(b.G.gf);c.hd(b.gf);a.Zc.push(c);b.G.next=b.next;b.next.G=b.G;Pi(a,c)||Hi(a,c)}
function Qi(a){var b=a.next.h.x-a.h.x,c=a.next.h.y-a.h.y,d=a.G.h.x-a.h.x;a=a.G.h.y-a.h.y;return Math.atan2(b*a-c*d,b*d+c*a)}
function Pi(a,b){for(var c=0;3>c;++c)if(!b.Ja[c]){var d=b.Pa[c];if(d!=l){var e=b.Jd(c),f=vi(d,b,e),g=f.j(d.d[0])?0:f.j(d.d[1])?1:f.j(d.d[2])?2:-1;if(d.Ia[g]||d.Ja[g])b.Ia[c]=d.Ia[g];else{var j;var m=ji(b,e),n=ii(b,e);j=e.x-f.x;var q=e.y-f.y,t=m.x-f.x,m=m.y-f.y,r=j*m-t*q;if(0>=r)j=p;else{var v=n.x-f.x,n=n.y-f.y,x=v*q-j*n;j=0>=x?p:0<(j*j+q*q)*(t*n-v*m)+(t*t+m*m)*x+(v*v+n*n)*r}if(j)return b.Ja[c]=k,d.Ja[g]=k,Ri(b,e,d,f),(e=!Pi(a,b))&&Hi(a,b),(e=!Pi(a,d))&&Hi(a,d),b.Ja[c]=p,d.Ja[g]=p,k}}}return p}
function Ri(a,b,c,d){var e,f,g,j;e=li(a,b);f=ki(a,b);g=li(c,d);j=ki(c,d);var m,n,q,t;m=ni(a,b);n=mi(a,b);q=ni(c,d);t=mi(c,d);var r,v,x,y;r=ri(a,b);v=qi(a,b);x=ri(c,d);y=qi(c,d);a.Lj(b,d);c.Lj(d,b);ti(c,b,r);si(a,b,v);ti(a,d,x);si(c,d,y);pi(c,b,m);oi(a,b,n);pi(a,d,q);oi(c,d,t);gi(a);gi(c);e&&c.hd(e);f&&a.hd(f);g&&a.hd(g);j&&c.hd(j);a.hd(c)}
function Si(a,b){if(!(a.aa.width>(a.aa.Sk?a.aa.ue.h.y-b.h.y:a.aa.Kc.h.y-b.h.y))){Oi(a,b);var c;if(!(b.G==a.aa.ue&&b.next==a.aa.Kc)){if(b.G==a.aa.ue){c=zi(b.h,b.next.h,b.next.next.h);if(1==c)return;b=b.next}else if(b.next==a.aa.Kc){c=zi(b.h,b.G.h,b.G.G.h);if(-1==c)return;b=b.G}else b=b.G.h.y<b.next.h.y?b.G:b.next;Si(a,b)}}}function Li(a,b,c){c.h.x<b.Sa.x&&(-1==zi(c.h,c.next.h,c.next.next.h)?Ti(a,b,c):(Ui(a,b,c),Li(a,b,c)))}
function Ti(a,b,c){Oi(a,c.next);c.next.h!=b.Sa&&(-1==zi(b.Bb,c.next.h,b.Sa)&&-1==zi(c.h,c.next.h,c.next.next.h))&&Ti(a,b,c)}function Ui(a,b,c){-1==zi(c.next.h,c.next.next.h,c.next.next.next.h)?Ti(a,b,c.next):-1==zi(b.Bb,c.next.next.h,b.Sa)&&Ui(a,b,c.next)}function Mi(a,b,c){c.h.x>b.Sa.x&&(1==zi(c.h,c.G.h,c.G.G.h)?Vi(a,b,c):(Wi(a,b,c),Mi(a,b,c)))}function Wi(a,b,c){1==zi(c.G.h,c.G.G.h,c.G.G.G.h)?Vi(a,b,c.G):1==zi(b.Bb,c.G.G.h,b.Sa)&&Wi(a,b,c.G)}
function Vi(a,b,c){Oi(a,c.G);c.G.h!=b.Sa&&(1==zi(b.Bb,c.G.h,b.Sa)&&1==zi(c.h,c.G.h,c.G.G.h))&&Vi(a,b,c)}
function Ni(a,b,c,d,e){var f=ui(d,e);if(f==l)alert("[BUG:FIXME] FLIP failed due to missing triangle!");else{var g=vi(f,d,e);Ai(e,ji(d,e),ii(d,e),g)?(Ri(d,e,f,g),Hi(a,d),Hi(a,f),e==c&&g==b?c==a.Jh.Ia.Bb&&b==a.Jh.Ia.Sa&&(d.eh(b,c),f.eh(b,c),Pi(a,d),Pi(a,f)):(-1==zi(c,g,b)?(g=wi(f,e,g),f.Ja[g]=k,Pi(a,f),hi(f)):(g=wi(d,e,g),d.Ja[g]=k,Pi(a,d),hi(d),d=f),Ni(a,b,c,d,e))):(g=Xi(b,c,f,g),Yi(a,b,c,d,f,g),Ji(a,b,c,d,e))}}
function Xi(a,b,c,d){a=zi(b,d,a);if(1==a)return ji(c,d);if(-1==a)return ii(c,d);alert("[Unsupported] poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!")}function Yi(a,b,c,d,e,f){var g=ui(e,f);g==l?alert("[BUG:FIXME] FLIP failed due to missing triangle"):(e=vi(g,e,f),Ai(c,ji(d,c),ii(d,c),e)?Ni(a,c,e,g,e):(e=Xi(b,c,g,e),Yi(a,b,c,d,g,e)))};function Zi(){this.name="ogGeometry";this.type=Pa;this.se="";this.options=this.qd=this.ke=l;this.Ed=[];this.Ed.F=[0,0,0];this.Qf=this.Ga=-1;this.color=[1,1,1,1];this.Dc=[1,1,1,1];this.Op="unknown";this.xp=this.Sm=10;this.Zm=-1E3;this.Ym=9E3}Zi.prototype=new I;w=Zi.prototype;
w.Ra=function(a){if(a.dynamic)this.oc(a.data);else if(A(a.url)&&"GeoJSON"==a.type)if(a=a.url,a==l)alert("invalid json-url");else{this.se=a;this.X=new window.XMLHttpRequest;this.X.open("GET",this.se,k);var b=this;this.X.onreadystatechange=function(){b.ak()};this.X.send()}};w.nb=function(){$i(this).vi(this.Ga)};function $i(a){var b=l;a=a.parent.parent.c;a.e&&a.e.q&&(b=a.e.q.sl);return b}w.qa=s();w.ra=s();
w.ak=function(){if(4==this.X.readyState)if(404==this.X.status)this.qd&&this.qd(this.id);else{var a=cd(this.X.responseText);this.oc(a)}};
function aj(a,b,c,d){var e={Wh:p,Hh:0,Fc:[0,0,0],wp:[0,0,0]};b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]];d=[d[0]-c[0],d[1]-c[1],d[2]-c[2]];var f=[a[0]-c[0],a[1]-c[1],a[2]-c[2]],g=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],j=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],m=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],n=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],q=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],t=g*m-j*j;1E-14>t?(e.Wh=k,f=0,g=j>m?n/j:q/m):(f=(j*q-m*n)/t,g=(g*q-j*n)/t);e.Fc=[a[0]+f*b[0],a[1]+f*b[1],a[2]+f*b[2]];e.wp=[c[0]+g*d[0],c[1]+g*d[1],c[2]+g*d[2]];return e}
function bj(a,b,c,d,e,f,g,j,m,n,q){n.push(b[0]);n.push(b[1]);n.push(b[2]);b=a;a++;n.push(f[0]);n.push(f[1]);n.push(f[2]);f=a;a++;n.push(e[0]);n.push(e[1]);n.push(e[2]);e=a;a++;n.push(m[0]);n.push(m[1]);n.push(m[2]);m=a;a++;n.push(c[0]);n.push(c[1]);n.push(c[2]);c=a;a++;n.push(g[0]);n.push(g[1]);n.push(g[2]);g=a;a++;n.push(d[0]);n.push(d[1]);n.push(d[2]);d=a;a++;n.push(j[0]);n.push(j[1]);n.push(j[2]);j=a;a++;q.push(c);q.push(g);q.push(d);q.push(g);q.push(j);q.push(d);q.push(b);q.push(e);q.push(f);
q.push(f);q.push(e);q.push(m);q.push(b);q.push(f);q.push(c);q.push(f);q.push(g);q.push(c);q.push(e);q.push(d);q.push(j);q.push(m);q.push(e);q.push(j);q.push(b);q.push(c);q.push(e);q.push(c);q.push(d);q.push(e);q.push(f);q.push(j);q.push(g);q.push(f);q.push(m);q.push(j);return a}
function cj(a,b,c){var d={VertexSemantic:"",Vertices:l,IndexSemantic:"",Indices:l,VertexSemantic:"p",IndexSemantic:"TRIANGLES"};d.Vertices=b;d.Indices=c;b=new Q(a.parent.parent.c);b.oc(d,l,l,b);4==a.color.length?b.mc.m(a.color[0],a.color[1],a.color[2],a.color[3]):3==a.color.length&&b.mc.m(a.color[0],a.color[1],a.color[2],1);return b}
w.oc=function(a){dh("CreateFromJSONObject");var b=p;if("FeatureCollection"==a.type&&(dh("[GeoJSON Parser] type = FeatureCollection"),A(a.features))){a=a.features;for(var c=a.length,d=0;d<c;d++)if(A(a[d].type)&&"Feature"==a[d].type&&A(a[d].properties)&&A(a[d].geometry)){var e=a[d].properties,f=a[d].geometry;A(e.id)&&(this.Op=e.id);A(e.color)&&(this.color=e.color);A(e.highlightcolor)&&(this.Dc=e.highlightcolor);A(e.linewidth)&&(this.Sm=e.linewidth);A(e.pointsize)&&(this.xp=e.pointsize);A(e.minelv)&&
(this.Zm=e.minelv);A(e.maxelv)&&(this.Ym=e.maxelv);if(A(f.type))if(e=f.type,"LineString"==e)A(f.coordinates&&ma(f.coordinates))&&(b=dj(this,f.coordinates));else if("MultiLineString"==e){if(A(f.coordinates&&ma(f.coordinates))){f=f.coordinates;for(e=0;e<f.length;e++)dj(this,f[e])&&(b=k)}}else if("Polygon"==e){if(A(f.coordinates&&ma(f.coordinates))){var b=f.coordinates,e=0,g=[],f=[],j=[];new T;var m=b.length;if(0==m)b=p;else{if(1<=m){for(var n=0;n<m;n++)if(0==n)for(var q=0;q<b[n].length;q++)g.push(new ci(b[n][q][0],
b[n][q][1],e)),j.push([b[n][q][0],b[n][q][1]]),e++;else{for(var t=[],q=0;q<b[n].length;q++)t.push(new ci(b[n][q][0],b[n][q][1]),e),j.push([b[n][q][0],b[n][q][1]]),e++;f.push(t)}b=new Fi(g);e=h;for(e in f)for(m in g=b,j=f[e],Gi(g,j),m=h,j)g.d.push(j[m]);e=f=b;g=e.d[0].x;j=e.d[0].x;n=e.d[0].y;m=e.d[0].y;q=h;for(q in e.d)t=e.d[q],t.x>g&&(g=t.x),t.x<j&&(j=t.x),t.y>n&&(n=t.y),t.y<m&&(m=t.y);n=0.3*(n-m);e.Ph=new ci(g+0.3*(g-j),m-n);e.pl=new ci(j-n,m-n);e.d.sort(di);e=f;m=j=g=h;m=new fi(e.d[0],e.pl,e.Ph);
e.Zc.push(m);g=new Bi(m.Jd(1),m);j=new Bi(m.Jd(0),m);m=new Bi(m.Jd(2));e.Nh=new Ci(g,m);g.next=j;j.next=m;j.G=g;m.G=j;e=f;for(g=1;g<e.d.length;++g){var j=e.Jd(g),m=e,n=j,q=m.Nj(n),t=m,r=n,v=q,x=new fi(r,v.h,v.next.h);x.hd(v.gf);t.Zc.push(x);r=new Bi(r);r.next=v.next;r.G=v;v.next.G=r;v.next=r;Pi(t,x)||Hi(t,x);t=r;n.x<=q.h.x+1E-16&&Oi(m,q);n=t;q=n.next;for(v=h;q.next!=l;){v=Qi(q);if(v>yi||v<-yi)break;Oi(m,q);q=q.next}for(q=n.G;q.G!=l;){v=Qi(q);if(v>yi||v<-yi)break;Oi(m,q);q=q.G}if(n.next!=l&&n.next.next!=
l&&(v=Math.atan2(n.h.y-n.next.next.h.y,n.h.x-n.next.next.h.x),v<xi)){m.aa.ue=-1==zi(n.h,n.next.h,n.next.next.h)?n.next.next:n.next;for(m.aa.pd=m.aa.ue;m.aa.pd.next!=l&&m.aa.pd.h.y>=m.aa.pd.next.h.y;)m.aa.pd=m.aa.pd.next;if(m.aa.pd!=m.aa.ue){for(m.aa.Kc=m.aa.pd;m.aa.Kc.next!=l&&m.aa.Kc.h.y<m.aa.Kc.next.h.y;)m.aa.Kc=m.aa.Kc.next;m.aa.Kc!=m.aa.pd&&(m.aa.width=m.aa.Kc.h.x-m.aa.ue.h.x,m.aa.Sk=m.aa.ue.h.y>m.aa.Kc.h.y,Si(m,m.aa.pd))}}m=t;for(n=0;n<j.Kh.length;++n)Ji(e,j.Kh[n],m)}e=f.Nh.head().next.gf;for(g=
f.Nh.head().next.h;!mi(e,g);)e=li(e,g);Ii(f,e);b=b.Un;f=[];for(e=0;e<b.length;e++)g=b[e].Jd(1).index,j=b[e].Jd(2).index,f.push(b[e].Jd(0).index),f.push(g),f.push(j)}b=k}}}else"MultiPolygon"==e?fh("MultiPolygon is not yet supported"):"Point"==e?fh("Point is not yet supported"):"MultiPoint"==e&&fh("MultiPoint is not yet supported")}}b&&(this.Ga=$i(this).Kl(this.Ed))};function ej(a,b){for(var c=0;c<a.length;c+=3)a[c+0]-=b[0],a[c+1]-=b[1],a[c+2]-=b[2]}
function dj(a,b){var c=new T,d=[0,0,0],e=[0,0,0],f=[],g=b.length;if(1<g)for(var j=0;j<g;j++){var m=b[j][0],n=b[j][1];c.m(m,n,a.Ym);c.V(d);c.m(m,n,a.Zm);c.V(e);f.push([d[0],d[1],d[2]]);f.push([e[0],e[1],e[2]])}else return p;g=f.length;for(m=e=d=c=0;m<f.length;m++)c+=f[m][0]/g,d+=f[m][1]/g,e+=f[m][2]/g;a.Ed.F[0]=c;a.Ed.F[1]=d;a.Ed.F[2]=e;var g=[],m=[],q=0.5*a.Sm*M,n=0,t,r,v,x,y,D,C,E,U,la,X,Y,P,aa,ba,ca,xa,ya,za;if(4==f.length){j=f[0];t=f[1];r=f[2];v=f[3];var L=r[0]-j[0],da=r[1]-j[1],va=r[2]-j[2],ea=
t[0]-j[0],sa=t[1]-j[1],ia=t[2]-j[2],f=da*ia-va*sa;P=va*ea-L*ia;n=L*sa-da*ea;L=q/Math.sqrt(f*f+P*P+n*n);f*=L;P*=L;n*=L;D=[j[0]+f,j[1]+P,j[2]+n];C=[t[0]+f,t[1]+P,t[2]+n];E=[r[0]+f,r[1]+P,r[2]+n];U=[v[0]+f,v[1]+P,v[2]+n];la=[j[0]-f,j[1]-P,j[2]-n];X=[t[0]-f,t[1]-P,t[2]-n];Y=[r[0]-f,r[1]-P,r[2]-n];P=[v[0]-f,v[1]-P,v[2]-n];bj(0,D,la,Y,E,C,X,P,U,m,g);ej(m,[c,d,e]);c=cj(a,m,g);a.Ed.push(c)}else if(6<=f.length){j=f[0];t=f[1];r=f[2];v=f[3];x=f[4];y=f[5];L=r[0]-j[0];da=r[1]-j[1];va=r[2]-j[2];ea=t[0]-j[0];sa=
t[1]-j[1];ia=t[2]-j[2];aa=da*ia-va*sa;ba=va*ea-L*ia;ca=L*sa-da*ea;L=q/Math.sqrt(aa*aa+ba*ba+ca*ca);aa*=L;ba*=L;ca*=L;D=[j[0]+aa,j[1]+ba,j[2]+ca];C=[t[0]+aa,t[1]+ba,t[2]+ca];la=[j[0]-aa,j[1]-ba,j[2]-ca];X=[t[0]-aa,t[1]-ba,t[2]-ca];for(j=4;j<f.length;j+=2)x=f[j],y=f[j+1],L=x[0]-r[0],da=x[1]-r[1],va=x[2]-r[2],ea=v[0]-r[0],sa=v[1]-r[1],ia=v[2]-r[2],xa=da*ia-va*sa,ya=va*ea-L*ia,za=L*sa-da*ea,L=q/Math.sqrt(xa*xa+ya*ya+za*za),xa*=L,ya*=L,za*=L,ea=v[0]-t[0],sa=v[1]-t[1],ia=v[2]-t[2],U=Math.sqrt(ea*ea+sa*
sa+ia*ia),ea/=U,sa/=U,ia/=U,L=v[0]-y[0],da=v[1]-y[1],va=v[2]-y[2],U=Math.sqrt(L*L+da*da+va*va),L/=U,da/=U,Y=[y[0]+xa,y[1]+ya,y[2]+za],t=[y[0]-xa,y[1]-ya,y[2]-za],P=[x[0]+xa,x[1]+ya,x[2]+za],E=[x[0]-xa,x[1]-ya,x[2]-za],U=aj([C[0],C[1],C[2]],[C[0]+ea,C[1]+sa,C[2]+ia],[Y[0],Y[1],Y[2]],[Y[0]+L,Y[1]+da,Y[2]+ia]),Y=aj([X[0],X[1],X[2]],[X[0]+ea,X[1]+sa,X[2]+ia],[t[0],t[1],Y[2]],[t[0]+L,t[1]+da,t[2]+ia]),t=aj([D[0],D[1],D[2]],[D[0]+ea,D[1]+sa,D[2]+ia],[P[0],P[1],P[2]],[P[0]+L,P[1]+da,P[2]+ia]),L=aj([la[0],
la[1],la[2]],[la[0]+ea,la[1]+sa,la[2]+ia],[E[0],E[1],E[2]],[E[0]+L,E[1]+da,E[2]+ia]),!U.Wh&&!Y.Wh&&!t.Wh&&!L.Wh?(U=[U.Fc[0],U.Fc[1],U.Fc[2]],P=[Y.Fc[0],Y.Fc[1],Y.Fc[2]],E=[t.Fc[0],t.Fc[1],t.Fc[2]],Y=[L.Fc[0],L.Fc[1],L.Fc[2]]):(U=[v[0]+aa,v[1]+ba,v[2]+ca],P=[v[0]-aa,v[1]-ba,v[2]-ca],E=[r[0]+aa,r[1]+ba,r[2]+ca],Y=[r[0]-aa,r[1]-ba,r[2]-ca]),n=bj(n,D,la,Y,E,C,X,P,U,m,g),aa=xa,ba=ya,ca=za,t=v,r=x,v=y,C=U,X=P,D=E,la=Y;f=[y[0]+aa,y[1]+ba,y[2]+ca];q=[y[0]-aa,y[1]-ba,y[2]-ca];j=[x[0]+aa,x[1]+ba,x[2]+ca];r=
[x[0]-aa,x[1]-ba,x[2]-ca];bj(n,E,Y,r,j,U,P,q,f,m,g);ej(m,[c,d,e]);c=cj(a,m,g);a.Ed.push(c)}else return p;return k};function fj(){this.name="ogAoeImageLayer";this.type=ab;this.Q=p;this.wb=[];this.te=""}fj.prototype=new I;w=fj.prototype;w.Ra=function(a){a.name&&(this.te=a.name)};w.nb=function(){for(var a=0;a<this.wb.length;a++){for(var b=a;b<this.wb.length;b++)this.wb[a].Ga-=1;J(this.wb[a])}};w.qa=function(){this.Q=k;for(var a=0;a<this.wb.length;a++)this.wb[a].qa()};w.ra=function(){this.Q=p;for(var a=0;a<this.wb.length;a++)this.wb[a].ra()};w.xj=function(a){this.wb.push(a);a.Qf=this.id};
w.Qj=function(a){for(var b=0;b<this.wb.length;b++)if(this.wb[b]==a){for(var c=b+1;c<this.wb.length;c++)this.wb[c].Ga-=1;J(this.wb[b]);this.wb.splice(b,1)}};function gj(){this.name="ogVectorLayer";this.type=La;this.Q=p;this.ia=[];this.te=""}gj.prototype=new I;w=gj.prototype;w.Ra=function(a){a.name&&(this.te=a.name)};function hj(a,b){var c=Z(Sa,a.parent.parent,b);a.ia.push(c);c.Fq=a;return c}w.vi=function(a){for(var b=0;b<this.ia.length;b++)this.ia[b]==a&&(J(this.ia[b]),this.ia.splice(b,1))};w.nb=function(){ij(this)};w.qa=function(){this.Q=k;for(var a=0;a<this.ia.length;a++)this.ia[a].qa()};w.ra=function(){this.Q=p;for(var a=0;a<this.ia.length;a++)this.ia[a].ra()};
function ij(a){for(var b=0;b<a.ia.length;b++){for(var c=b;c<a.ia.length;c++)a.ia[b].Ga-=1;J(a.ia[b])}}w.Kl=function(a){this.ia.push(a);a.Qf=this.id};w.vi=function(a){for(var b=0;b<this.ia.length;b++)if(this.ia[b]==a){for(var c=b+1;c<this.ia.length;c++)this.ia[c].Ga-=1;J(this.ia[b]);this.ia.splice(b,1)}};function jj(){this.name="ogImageLayer";this.type=Fa;this.Rf=-1}jj.prototype=new I;jj.prototype.$g=function(){var a=l,b=this.parent.parent.parent.c;b.e&&b.e.q&&(a=b.e.q.ta);return a};jj.prototype.Aj=function(a){var b=this.$g();b&&(this.Rf=b.Aj(a))};jj.prototype.Uj=function(){var a=this.$g();a&&-1!=this.Rf&&a.Uj(this.Rf)};jj.prototype.Ra=function(a){this.Aj(a)};function kj(){this.name="ogBillboardLayer";this.type=$a;this.Q=p;this.Wa=[];this.te=""}kj.prototype=new I;w=kj.prototype;w.Ra=function(a){a.name&&(this.te=a.name)};w.nb=function(){for(var a=0;a<this.Wa.length;a++)J(this.Wa[a])};w.qa=function(){this.Q=k;for(var a=0;a<this.Wa.length;a++)this.Wa[a].qa()};w.ra=function(){this.Q=p;for(var a=0;a<this.Wa.length;a++)this.Wa[a].ra()};w.Rj=function(a){for(var b=0;b<this.Wa.length;b++)this.Wa[b]==a&&(J(this.Wa[b]),this.Wa.splice(b,1))};w.yj=function(a){this.Wa.push(a)};function lj(){this.name="ogPointSpriteObject";this.type=cb;this.Ae=this.options=this.Cd=l;this.cj=this.Qi=0}lj.prototype=new I;w=lj.prototype;
w.Ra=function(a){this.options=a;this.Cd=new td(this.parent.parent.parent.c);a.Vertices&&this.Cd.wi(a.Vertices);if(a.PointUrl){var b=a.PointUrl;if(b==l)alert("invalid xyzurl");else{this.Up=b;this.X=new window.XMLHttpRequest;this.X.open("GET",this.Up,k);var c=this;this.X.onreadystatechange=function(){4==c.X.readyState&&(404==c.X.status?alert("xyz-file not found..."):mj(c))};this.X.onprogress=function(){mj(c)};this.X.send();this.cj=this.Qi=0}this.rp=a.NumberOfPoints;this.Cd.vj=this.rp}this.Cd.lh(a.Center[0],
a.Center[1],a.Center[2])};w.nb=function(){this.Cd&&(this.Cd.t(),this.Cd=l,this.status=3)};w.qa=function(){this.Cd.Q=k};w.Ke=s();w.ra=function(){this.Cd.Q=p};function mj(a){var b=a.X.responseText;a.Qi=b.lastIndexOf("\n");for(var b=b.substr(a.cj,a.Qi-a.cj-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}a.Cd.wi(c);a.cj=a.Qi};function nj(){this.name="ogGeometryLayer";this.type=Ja;this.Q=p;this.ma=[];this.te=""}nj.prototype=new I;w=nj.prototype;w.Ra=function(a){a.name&&(this.te=a.name)};w.nb=function(){for(var a=0;a<this.ma.length;a++){for(var b=a;b<this.ma.length;b++)this.ma[a].Ga-=1;J(this.ma[a])}};w.qa=function(){this.Q=k;for(var a=0;a<this.ma.length;a++)this.ma[a].qa()};w.ra=function(){this.Q=p;for(var a=0;a<this.ma.length;a++)this.ma[a].ra()};w.Hd=function(a){this.ma.push(a);a.Qf=this.id};
w.Tj=function(a){for(var b=0;b<this.ma.length;b++)if(this.ma[b]==a){for(var c=b+1;c<this.ma.length;c++)this.ma[c].Ga-=1;J(this.ma[b]);this.ma.splice(b,1)}};function oj(){this.name="ogSurface";this.type=Ra;this.Dq=this.tq=p;this.elevation=this.latitude=this.longitude=0;this.status=kb;this.A=l;this.elevation=this.latitude=this.longitude=0}oj.prototype=new I;w=oj.prototype;w.Ke=function(a,b,c,d,e,f){this.longitude=a;this.latitude=b;this.elevation=c;this.A.lh(a,b,c,d,e,f)};
w.oh=function(a,b,c,d){this.longitude=a;this.latitude=b;this.elevation=c;var e=this.A;e.fc=a;e.ec=b;e.cc=c;var f=new T(a,b,c);c=Array(3);f.V(c);f=new O;f.Rd(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new O;c.Je(a);a=new O;a.Je([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.Me();b=new O;b.ig(d[0],d[1],d[2],d[3]);b.Me();f=new O;f.W(a,b);d=new O;d.W(a,f);b=new O;b.Je([0,
-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.Me();a=new O;a.W(b,d);d=new O;d.W(c,a);c=new O;c.Yd(M,M,M);a=new O;a.W(d,c);e.na=a;ld(e)};w.Db=function(a,b,c){this.A.Db(a,b,c)};w.tf=function(a,b,c){this.A.tf(a,b,c)};
w.Ra=function(a){if(a==l)Ec(K("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==l)Ec(K("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=Qa)Ec(K("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.A=new Q(this.parent.parent.parent.parent.c);this.A.Q=p;this.A.sp=this.id;var b=this;this.A.oc(a.jsonobject,function(){0!=b.longitude&&0!=b.latitude&&b.Ke(b.longitude,b.latitude,b.elevation);b.status=jb;b.M&&b.M(b.id)},function(){b.status=
3;b.L&&b.L(b.id)});this.se=a.url;this.A.Zn=a.jsonobject.VisibilityDistance?a.jsonobject.VisibilityDistance*M:5E4*M}this.longitude=a.jsonobject.Center[0];this.latitude=a.jsonobject.Center[1];this.elevation=a.jsonobject.Center[2]}};w.nb=function(){this.A&&(this.A.t(),this.A=l,this.status=3)};w.ra=function(){this.A&&(this.A.Q=p)};w.qa=function(){this.A&&(this.A.Q=k)};w.sf=function(a,b,c,d){this.A&&this.A.sf(a,b,c,d)};var pj=-1;function Z(a,b,c){var d=l;a==F?d=new sh:a==G?d=new uh:a==Ea?d=new th:a==Fa?d=new jj:a==Ga?d=new Ah:a!=Ha&&(a==Ia?d=new yh:a==Ja?d=new nj:a!=Ka&&a!=Ma&&(a==Na?d=new Ic:a==Ya?d=new wh:a!=Oa&&(a==Pa?d=new Kf:a==Qa?d=new Fh:a==Ra?d=new oj:a==Ta?d=new Oc:a!=Ua&&a!=Va&&a!=Wa&&a!=Xa&&(a==Za?d=new Dh:a==$a?d=new kj:a==ab?d=new fj:a==bb?d=new ze:a==cb?d=new lj:a==db?d=new Bh:a==La?d=new gj:a==Sa&&(d=new Zi)))));d!=l&&(pj++,d.id=pj,d.parent=b,lb.push(d),d.Ra(c));return d}B("_CreateObject",Z);
B("ogGetObjectFromId",function(a){return H(a)});B("ogGetObjectType",function(a){return(a=H(a))?a.type:eb});B("ogGetObjectName",function(a){return(a=H(a))?a.name:""});
B("ogGetObjectPosition",function(a){a=H(a);var b={};if(a)switch(a.type){case Pa:b={};A(a.options.jsonobject)&&A(a.options.jsonobject.Center)&&(b.longitude=a.options.jsonobject.Center[0],b.latitude=a.options.jsonobject.Center[1],b.elevation=a.options.jsonobject.Center[2]);break;case Ya:var c=new T;c.pc(a.za.af,a.za.bf,a.za.cf);b={};b.longitude=c.H[0];b.latitude=c.H[1];b.elevation=c.H[2]}return b});B("ogGetNumObjects",function(){return lb.length});
B("ogGetObjectAt",function(a){a=0>a||a>lb.length-1?l:lb[a];return a==l?-1:a.id});B("ogGetParentObject",function(a){return(a=H(a))&&a.parent?a.parent.id:-1});B("ogSetObjectName",function(a,b){var c=H(a);c&&(c.name=b)});B("ogGetObjectByName",function(a){a:{for(var b=0;b<lb.length;b++)if(lb[b].name==a){a=lb[b];break a}a=l}return a?a.id:-1});B("ogGetObjectStatus",function(a){return(a=H(a))?a.status:3});B("ogOnLoad",function(a,b){var c=H(a);c&&(c.status==jb?b(a):c.M=b)});
B("ogOnFailure",function(a,b){var c=H(a);c&&(3==c.status?b(a):c.L=b)});function qj(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=Z(F,l,a);return a!=l?a.id:-1}B("ogCreateContext",qj);B("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?k:p;f.canvas=a;return qj(f,c,d,e)});B("ogCreateNewContext",function(a,b,c,d){var e={};e.fullscreen=a?k:p;e["new"]=k;return qj(e,b,c,d)});B("ogDestroyContext",function(a){(a=H(a))&&a.type==F&&J(a)});
B("ogGetGL",function(a){return(a=H(a))&&a.type==F?a.c.b:l});B("ogGetWidth",function(a){return(a=H(a))&&a.type==F?a.c?a.c.width:0:0});B("ogGetHeight",function(a){return(a=H(a))&&a.type==F?a.c?a.c.height:0:0});B("ogGetScene",function(a){return(a=H(a))&&a.type==F&&a.e?a.e.id:-1});B("ogSetBackgroundColor",function(a,b,c,d,e){(a=H(a))&&a.type==F&&a.c&&a.c.fm(b,c,d,e)});B("ogSetTextColor",function(a,b,c,d){(a=H(a))&&a.type==F&&a.fontcolor.m(b,c,d,1)});
B("ogDrawText",function(a,b,c,d){(a=H(a))&&a.type==F&&a.Be(b,c,d)});B("ogGetTextSize",function(a,b){var c=H(a);if(c&&c.type==F&&(c=c.Gj(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});B("ogSetMouseDownFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.Ld=b)});B("ogSetMouseUpFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.Md=b)});B("ogSetMouseMoveFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.If=b)});B("ogSetMouseWheelFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.rd=b)});
B("ogSetKeyDownFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.sk=b)});B("ogSetKeyUpFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.tk=b)});B("ogSetResizeFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.Oe=b)});B("ogSetRenderFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.ie=b)});B("ogSetTimerFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.je=b)});B("ogSetRenderGeometryFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.fq=b)});
B("ogSetBeginRenderFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.dq=b)});B("ogSetEndRenderFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.eq=b)});B("ogSetFlyToStartedFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.Gf=b)});B("ogSetInPositionFunction",function(a,b){var c=H(a);c&&c.type==F&&(c.Hf=b)});B("ogSetNumRenderPasses",function(a,b){var c=H(a);c&&c.type==F&&(c.qp=b)});B("ogExec",s());B("ogSetArtworkDirectory",function(a){qd=a});
function rj(a,b,c){A(c)||(c={});if((a=H(a))&&a.type==F){c.type=b;if(b==fb||b==hb||b==gb||b==ib)return b==ib?Mc=M=1:(M=1.1920930376163766E-7,Mc=8388607),b=Z(G,a,c),a.e=b,b.id;Ec(K("owg.og"),"** WARNING: wrong scene type");return-1}Ec(K("owg.og"),"** WARNING: context is not valid");return-1}B("ogCreateScene",rj);B("ogGetContext",function(a){if((a=H(a))&&a.type==G)if(a=a.parent)return a.id;return-1});B("ogGetWorld",function(a){if((a=H(a))&&a.type==G)if(a=a.Rg)return a.id;return-1});
B("ogPickGlobe",function(a,b,c){return(a=H(a))&&a.type==G&&a.lc==fb?a.gh(b,c):[p,0,0,0,0,0,0]});B("ogToCartesian",function(a,b,c,d){if((a=H(a))&&a.type==G&&(a.lc==fb||a.lc==ib)){var e=[];(new T(b,c,d)).V(e)}return e||l});B("ogToWGS84",function(a,b,c,d){if((a=H(a))&&a.type==G&&a.lc==fb){var e=new T;e.pc(b,c,d);e=[e.H[0],e.H[1],e.H[2]]}return e||l});B("ogHideLogo",function(a,b){var c=H(a);c&&c.type==G&&c.Ij(b)});B("ogCreateCamera",function(a){if((a=H(a))&&a.type==G){var b=Z(Ta,a,l);a.Ji.push(b);return b.id}return-1});
B("ogDestroyCamera",function(a){(a=H(a))&&a.type==Ta&&J(a)});B("ogSetPosition",function(a,b,c,d){(a=H(a))&&a.type==Ta&&a.Ca(b,c,d)});function sj(a){return(a=H(a))&&a.type==G?(a=a.Ef,Qc(a),a.of()):l}B("ogGetPosition",sj);function tj(a,b,c,d){return(a=H(a))&&a.type==Ta?(360<b&&(b-=360),0>b&&(b=360+b),a.Db(b,c,d)):l}B("ogSetOrientation",tj);B("ogSetOrientationFromQuaternion",function(a,b,c,d,e){return(a=H(a))&&a.type==Ta?a.nh(b,c,d,e):l});
function uj(a){return(a=H(a))&&a.type==G?(a=a.Ef,Qc(a),a.ah()):l}B("ogGetOrientation",uj);function vj(a){return(a=H(a))&&a.type==G?a.Ef.id:-1}B("ogGetActiveCamera",vj);B("ogSetActiveCamera",function(a){(a=H(a))&&a.type==Ta&&vh(a.parent,a.id)});B("ogGetNumCameras",function(a){if((a=H(a))&&a.type==G)return a.Ji.length});B("ogGetCameraAt",function(a,b){var c=H(a);return c&&c.type==G?c.Ji[b].id:-1});
B("ogLookAt",function(a,b,c,d){var e=vj(a);Qc(H(e));var f=sj(a),g=[];(new T(f.longitude,f.latitude,f.elevation)).V(g);var j=new N(g[0],g[1],g[2]),m=[];(new T(b,c,d)).V(m);b=(new N(m[0],m[1],m[2])).mf();b.Yj(j);j=new O;j.Rd(f.longitude,f.latitude);f=new O;f.md(g[0],g[1],g[2]);g=new O;g.W(f,j);g.Me();g=g.Qa(b);g.Qc();g=g.a;f=g[0];j=g[1];b=g[2];g=57.29577951308232*Math.acos(f/Math.sqrt(1-b*b));0>j&&0<f&&(g=360-g);0>j&&0>f&&(g=360-g);f=-(90-57.29577951308232*Math.acos(b));-0.9>b&&(g=180+g,f=-f);a=uj(a);
tj(e,g,f,a.roll)});B("ogSetNavigationMode",function(a,b,c){A(c)||(c={});(a=H(a))&&a.type==G&&a.Wj(b,c)});function wj(a){if((a=H(a))&&a.type==G){var b={};b.scenetype=a.lc;b.shownavigation=a.kl;b=Z(Ea,a,b);a.Rg=b;var c=Z(Ta,a,l);Qc(c);vh(a,c.id);a.Ji.push(c);return b.id}return-1}B("ogCreateWorld",wj);B("ogCreateGlobe",function(a){a=rj(a,fb);return wj(a)});B("ogSetNorthpoleColor",function(a,b,c,d){if((a=H(a))&&a.type==Ea)a.parent.parent.c.e.q.ta.Xf=[b,c,d]});
B("ogSetSouthpoleColor",function(a,b,c,d){if((a=H(a))&&a.type==Ea)a.parent.parent.c.e.q.ta.eg=[b,c,d]});B("ogSetRenderQuality",function(a,b){var c=H(a);c&&c.type==Ea&&(c=c.parent.parent.c.e.q.ta,0<b&&3>=b&&(c.zn=b))});B("ogSetRenderEffect",function(a,b,c){(a=H(a))&&a.type==Ea&&a.xi(b,c)});B("ogGetElevationAt",function(a,b,c){var d={hasvalue:p,elevation:0,lod:0};(a=H(a))&&a.type==Ea&&(d=a.parent.parent.c.jg(b,c));return d});
B("ogLoadTextureAsync",function(a,b){var c=H(a);if(c&&c.type==G){var d={};d.url=b;return Z(Na,c,d).id}return-1});B("ogDestroyTexture",function(a){(a=H(a))&&a.type==Na&&J(a)});B("ogBlitTexture",function(a,b,c,d){(a=H(a))&&a.type==Na&&a.U(b,c,d)});B("ogAddImageLayer",function(a,b){var c=H(a);return c&&c.type==Ea?Z(Fa,c,b).id:-1});B("ogRemoveImageLayer",function(a){if((a=H(a))&&a.type==Fa)a.Uj(),J(a)});B("ogAddElevationLayer",function(a,b){var c=H(a);return c&&c.type==Ea?Z(Ga,c,b).id:-1});
B("ogRemoveElevationLayer",function(a){if((a=H(a))&&a.type==Ga)a.Sj(),J(a)});B("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;return(a=H(a))&&a.type==Ea?Z(Ia,a,e).id:-1});B("ogRemovePOILayer",function(a){(a=H(a))&&a.type==Ia&&J(a)});B("ogHidePOILayer",function(a){(a=H(a))&&a.type==Ia&&a.qa()});B("ogShowPOILayer",function(a){(a=H(a))&&a.type==Ia&&a.ra()});B("ogAddVectorLayer",function(a,b){var c=H(a);return c&&c.type==Ea?Z(La,c,b).id:-1});
B("ogRemoveVectorLayer",function(a){if((a=H(a))&&a.type==La)ij(a),J(a)});B("ogLoadVectorAsync",function(a,b){var c=H(a);return c&&c.type==La?hj(c,{url:b,dynamic:p,type:"GeoJSON"}).id:-1});B("ogDestroyVector",function(a){if((a=H(a))&&a.type==Sa)if(a.k){var b=a.k;b&&b.type==La&&b.vi(a)}else J(a);return-1});B("ogAddGeoJSON",function(a,b){var c=H(a);return c&&c.type==La?hj(c,{dynamic:k,type:"GeoJSON",data:b}).id:-1});
B("ogCreatePOI",function(a,b){var c=H(a);if(c&&c.type==Ia){b.textstyle=c.hg;b.iconstyle=c.Mf;var d=Z(Ya,c.parent.parent,b);c.Ta.push(d);d.xq=c;c=d.id}else c=-1;return c});B("ogDestroyPOI",function(a){if((a=H(a))&&a.type==Ya)if(a.k){var b=a.k;if(b&&b.type==Ia)for(var c=0;c<b.Ta.length;c++)b.Ta[c]==a&&(J(b.Ta[c]),b.Ta.splice(c,1))}else J(a);return-1});B("ogChangePOIText",function(a,b){var c=H(a);if(c&&c.type==Ya){var d=c.parent.parent;c.hg&&d.c.Fg.Nl(c.za,b,c.hg)}});
B("ogChangePOIIcon",function(a,b){var c=H(a);if(c&&c.type==Ya){var d=c.parent.parent;c.Mf&&d.c.Fg.Ml(c.za,b,c.Mf)}});B("ogChangePOISize",function(a,b){var c=H(a);c&&c.type==Ya&&c.za.yi(b)});B("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=H(a))&&a.type==Ya){var e=[];(new T(b,c,d)).V(e);b=e[0];c=e[1];e=e[2];a.za.Zf?a.za.Ca(b,c,e,0):a.za.Ca(b,c,e,l)}});B("ogChangePOIPosition",function(a,b,c,d){(a=H(a))&&a.type==Ya&&(a.za.Zf?a.za.Ca(b,c,d,0):a.za.Ca(b,c,d,l))});
B("ogHidePOI",function(a){(a=H(a))&&a.type==Ya&&a.qa()});B("ogShowPOI",function(a){(a=H(a))&&a.type==Ya&&a.ra()});B("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=H(a))&&a.type==Ya)b=new bd(b,c,d,e),a.za.el=b});B("ogPickPOI",function(a,b,c){return(a=H(a))&&a.type==G&&a.lc==fb?a.ih(b,c):-1});B("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=H(a);return d&&d.type==Ea?Z(Ja,d,c).id:-1});
B("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=H(a);return d&&d.type==Ea?Z(ab,d,c).id:-1});B("ogCreateAoeImage",function(a,b){var c=H(a);if(c&&c.type==ab){var d=Z(bb,c.parent.parent,b);c.xj(d);return d.id}return-1});B("ogDestroyAoeImage",function(a){if((a=H(a))&&a.type==bb){var b=H(a.Qf);b&&b.type==ab&&b.Qj(a)}return-1});B("ogHideGeometryLayer",function(a){(a=H(a))&&a.type==Ja&&a.qa()});B("ogShowGeometryLayer",function(a){(a=H(a))&&a.type==Ja&&a.ra()});
B("ogRemoveGeometryLayer",function(a){(a=H(a))&&a.type==Ja&&J(a);return-1});B("ogCreateGeometry",function(a,b){var c={};A(b.type)?c=b:c.jsonobject=b;var d=H(a);return d&&d.type==Ja?(c=Z(Pa,d.parent.parent,c),d.Hd(c),c.id):-1});B("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=H(a);return d&&d.type==Ja?(c=Z(Pa,d.parent.parent,c),d.Hd(c),c.id):-1});B("ogDestroyGeometry",function(a){if((a=H(a))&&a.type==Pa){var b=H(a.Qf);b&&b.type==Ja&&b.Tj(a)}return-1});
B("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){return(a=H(a))&&a.type==Pa?a.Ke(b,c,d,e,f,g):-1});B("ogSetGeometryOrientation",function(a,b,c,d){return(a=H(a))&&a.type==Pa?a.Db(b,c,d):-1});B("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){return(a=H(a))&&a.type==Pa?a.oh(b,c,d,e):-1});B("ogSetGeometryScale",function(a,b,c,d){(a=H(a))&&a.type==Pa&&a.tf(b,c,d)});B("ogGetNumMeshes",function(a){return(a=H(a))&&a.type==Pa?a.gb.length:-1});
B("ogGetMeshAt",function(a,b){var c=H(a);return c&&c.type==Pa?c.gb[b].id:-1});B("ogHideGeometry",function(a){(a=H(a))&&a.type==Pa&&a.qa()});B("ogShowGeometry",function(a){(a=H(a))&&a.type==Pa&&a.ra()});B("ogHighlightGeometry",function(a,b,c,d,e){(a=H(a))&&a.type==Pa&&a.sf(b,c,d,e)});B("ogPickGeometry",function(a,b,c){if((a=H(a))&&a.type==G&&a.lc==fb)if(b=a.qf(b,c),b=H(b))return b.parent.parent.id;return-1});
B("ogCreatePolylineWGS84",function(a,b,c){return(a=H(a))&&a.type==Ja?(c.coords=b,c.type="EarthPolyline",b=Z(Pa,a.parent.parent,c),a.Hd(b),b.id):-1});B("ogGetSurfaceAt",function(a,b){var c=H(a);return c&&c.type==Qa?c.kb[b].id:-1});B("ogHideMesh",function(a){(a=H(a))&&a.type==Qa&&a.qa()});B("ogShowMesh",function(a){(a=H(a))&&a.type==Qa&&a.ra()});B("ogPickMesh",function(a,b,c){if((a=H(a))&&a.type==G&&a.lc==fb)if(b=a.qf(b,c),b=H(b))return b.parent.id;return-1});
B("ogHideSurface",function(a){(a=H(a))&&a.type==Ra&&a.qa()});B("ogShowSurface",function(a){(a=H(a))&&a.type==Ra&&a.ra()});B("ogPickSurface",function(a,b,c){return(a=H(a))&&a.type==G&&a.lc==fb?a.qf(b,c):-1});B("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=H(a);return d&&d.type==Ea?Z($a,d,c).id:-1});B("ogRemoveBillboardLayer",function(a){(a=H(a))&&a.type==$a&&J(a)});B("ogHideBillboardLayer",function(a){(a=H(a))&&a.type==$a&&a.qa()});
B("ogShowBillboardLayer",function(a){(a=H(a))&&a.type==$a&&a.ra()});B("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=H(a))&&a.type==$a){var f={};f.canvas=b;f.position=[c,d,e];b=Z(Za,a.parent.parent,f);a.yj(b);b.k=a.id;return b.id}return-1});B("ogDestroyBillboard",function(a){if((a=H(a))&&a.type==Za)if(a.k){var b=H(a.k);b&&b.type==$a&&b.Rj(a)}else J(a);return-1});B("ogHideBillboard",function(a){(a=H(a))&&a.type==Za&&a.qa();return-1});
B("ogShowBillboard",function(a){(a=H(a))&&a.type==Za&&a.ra();return-1});B("ogPickBillboard",function(a,b,c){return(a=H(a))&&a.type==G&&a.lc==fb?a.hh(b,c):-1});B("ogUpdateBillboard",function(a,b){var c=H(a);c&&c.type==Za?(c.Wc.canvas=b,c.Wc.rh(),c=h):c=-1;return c});B("ogFlyTo",function(a,b,c,d,e,f,g){(a=H(a).parent.c)&&ye(a.wa,b,c,d,e,f,g)});B("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=H(a).parent.c)&&a.Fj(b,c,d,e,f,g,j)});B("ogSetFlightDuration",function(a,b){var c=H(a).parent.c;c&&c.mh(b)});
B("ogStopFlyTo",function(a){(a=H(a).parent.c)&&a.qh()});B("ogLockNavigation",function(a){(a=H(a).parent.c)&&a.e.O.dh(k)});B("ogUnlockNavigation",function(a){(a=H(a).parent.c)&&a.e.O.dh(p)});B("ogSetCanvasSizeOffset",function(a,b,c){a=H(a).parent.c;a.Gl=b;a.Pk=c;Zg()});B("ogDebug",function(){var a=new Xh;Sh(a,k);a.Od()});B("ogWarning",function(a){Ec(K("warning"),a)});function fh(a){K("error").log(wc,a,h)}B("ogError",fh);function dh(a){K("message").info(a)}B("ogLog",dh);
B("ogWorldToWindow",function(a,b,c,d){var e;if((a=H(a))&&a.type==G&&(a.lc==fb||a.lc==ib))e=a.parent.c,a=new O,a.W(e.$c,e.Tf),b=new N(b,c,d),d=a.Qa(b),b=d.a[0],c=-d.a[1],d=d.a[2],b=Math.floor(0.5*(b+1)*e.width+0.5),c=Math.floor(0.5*(c+1)*e.height-1+0.5),e=[b,c,0.5*(d+1)];return e||l});
B("ogCalcDistanceWGS84",function(a,b,c,d){a=Jc*Math.acos(Math.sin(0.017453292519943295*b)*Math.sin(0.017453292519943295*d)+Math.cos(0.017453292519943295*b)*Math.cos(0.017453292519943295*d)*Math.cos(0.017453292519943295*(c-a)));isNaN(a)&&(a=0);return a});B("ogSetMinAltitude",function(a,b){var c=H(a);c&&(c.type==G&&c.lc==fb)&&c.parent.c.e.O.jm(b)});B("ogNavKeyDown",function(a,b){var c=H(a);c&&c.parent.c.e.O.Fe({keyCode:b,stopPropagation:s(),preventDefault:s(),cancelBubble:p,cancel:p,returnValue:p})});
B("ogNavKeyUp",function(a,b){var c=H(a);c&&c.parent.c.e.O.Ge({keyCode:b,stopPropagation:s(),preventDefault:s(),cancelBubble:p,cancel:p,returnValue:p})});
	
	}
	return OWG;
});